{"status": {"state": "ACTIVE", "message_list": [], "description": "Accessibility: \n* https://[CONTROLLER_IP]:6443\n* Admin certificates are available in controller node $HOME/CA\n", "resources": {"service_definition_list": [{"singleton": false, "uuid": "65a78bcf-970b-472c-b501-866e109c8a56", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "948bd950-535f-48cc-8d7b-d71481804058", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "65a78bcf-970b-472c-b501-866e109c8a56"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "GenerateEncryptionKey", "uuid": "3f09d402-0d2a-4b87-9a36-9dcaa2f08571"}, {"kind": "app_task", "name": "ConfigureController", "uuid": "36fbc5cf-b495-443c-b95f-f87384a4ff86"}], "name": "16c98103_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "GenerateEncryptionKey", "uuid": "3f09d402-0d2a-4b87-9a36-9dcaa2f08571"}, "edge_type": "user_defined", "type": "", "uuid": "70e92b06-2a20-451c-9014-7fc31ffa8bc8", "to_task_reference": {"kind": "app_task", "name": "ConfigureController", "uuid": "36fbc5cf-b495-443c-b95f-f87384a4ff86"}}], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "0696b4e7-fb3c-42bd-a819-113b0f163c8a"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "65a78bcf-970b-472c-b501-866e109c8a56"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "GenerateEncryptionKey", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\n\nENCRYPTION_KEY=$(head -c 32 /dev/urandom | base64)\necho \"kind: EncryptionConfig\napiVersion: v1\nresources:\n  - resources:\n      - secrets\n    providers:\n      - aescbc:\n          keys:\n            - name: key1\n              secret: ${ENCRYPTION_KEY}\n      - identity: {}\" | tee encryption-config.yaml", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "0771aa80-129f-40f8-a3ce-daddd5122bc4"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "3f09d402-0d2a-4b87-9a36-9dcaa2f08571"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "65a78bcf-970b-472c-b501-866e109c8a56"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "ConfigureController", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\nINTERNAL_IP=@@{address}@@\nETCD_SERVER_PORT=2379\nETCD_CLIENT_PORT=2380\nMASTER_API_PORT=8080\nSERVICE_SUBNET=\"@@{SERVICE_SUBNET}@@\"\nCLUSTER_SUBNET=\"@@{CLUSTER_SUBNET}@@\"\n\n\ncount=0\nfor i in $(echo \"@@{address}@@\" | tr \",\" \"\\n\"); do\n  CON+=\"controller${count}=https://${i}:${ETCD_CLIENT_PORT}\",\n  ETCD+=\"https://${i}:${ETCD_SERVER_PORT}\",\n  count=$((count+1))\ndone\nALL_CONTROLLERS=$(echo $CON | sed  's/,$//')\nETCD_SERVERS=$(echo $ETCD | sed  's/,$//')\n\n# -*- Bootstrapping a H/A etcd cluster.\nETCD_NAME=controller@@{calm_array_index}@@\nsudo mkdir -p /etc/etcd/ /var/lib/etcd\ntar -xvf etcd-v3.2.6-linux-amd64.tar.gz\nsudo mv etcd-v3.2.6-linux-amd64/etcd* /usr/bin/\nsudo cp ca.pem kubernetes-key.pem kubernetes.pem /etc/etcd/\nrm -rf etcd-v3.2.6-linux-amd64*\n\necho \"[Unit]\nDescription=etcd\nDocumentation=https://github.com/coreos\n\n[Service]\nExecStart=/usr/bin/etcd \\\\\n  --name ${ETCD_NAME} \\\\\n  --cert-file=/etc/etcd/kubernetes.pem \\\\\n  --key-file=/etc/etcd/kubernetes-key.pem \\\\\n  --peer-cert-file=/etc/etcd/kubernetes.pem \\\\\n  --peer-key-file=/etc/etcd/kubernetes-key.pem \\\\\n  --trusted-ca-file=/etc/etcd/ca.pem \\\\\n  --peer-trusted-ca-file=/etc/etcd/ca.pem \\\\\n  --peer-client-cert-auth \\\\\n  --client-cert-auth \\\\\n  --initial-advertise-peer-urls https://${INTERNAL_IP}:${ETCD_CLIENT_PORT} \\\\\n  --listen-peer-urls https://${INTERNAL_IP}:${ETCD_CLIENT_PORT} \\\\\n  --listen-client-urls https://${INTERNAL_IP}:${ETCD_SERVER_PORT},http://127.0.0.1:${ETCD_SERVER_PORT} \\\\\n  --advertise-client-urls https://${INTERNAL_IP}:${ETCD_SERVER_PORT} \\\\\n  --initial-cluster-token etcd-cluster-0 \\\\\n  --initial-cluster ${ALL_CONTROLLERS} \\\\\n  --initial-cluster-state new \\\\\n  --data-dir=/var/lib/etcd\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/etcd.service\n\n# -*- Bootstrapping an H/A Kubernetes Control Plane\nsudo mkdir -p /var/lib/kubernetes/\nsudo mv kube-apiserver kube-controller-manager kube-scheduler /usr/bin/ \nsudo cp ca.pem /var/lib/kubernetes/\nsudo mv ca-key.pem kubernetes-key.pem kubernetes.pem encryption-config.yaml /var/lib/kubernetes/\n\necho \"[Unit]\nDescription=Kubernetes API Server\nDocumentation=https://github.com/GoogleCloudPlatform/kubernetes\n\n[Service]\nExecStart=/usr/bin/kube-apiserver \\\\\n  --admission-control=NamespaceLifecycle,LimitRanger,ServiceAccount,DefaultStorageClass,ResourceQuota \\\\\n  --advertise-address=${INTERNAL_IP} \\\\\n  --allow-privileged=true \\\\\n  --apiserver-count=3 \\\\\n  --audit-log-maxage=30 \\\\\n  --audit-log-maxbackup=3 \\\\\n  --audit-log-maxsize=100 \\\\\n  --audit-log-path=/var/lib/audit.log \\\\\n  --authorization-mode=RBAC \\\\\n  --bind-address=0.0.0.0 \\\\\n  --client-ca-file=/var/lib/kubernetes/ca.pem \\\\\n  --enable-swagger-ui=true \\\\\n  --etcd-cafile=/var/lib/kubernetes/ca.pem \\\\\n  --etcd-certfile=/var/lib/kubernetes/kubernetes.pem \\\\\n  --etcd-keyfile=/var/lib/kubernetes/kubernetes-key.pem \\\\\n  --etcd-servers=${ETCD_SERVERS} \\\\\n  --event-ttl=1h \\\\\n  --experimental-encryption-provider-config=/var/lib/kubernetes/encryption-config.yaml \\\\\n  --insecure-bind-address=0.0.0.0 \\\\\n  --kubelet-certificate-authority=/var/lib/kubernetes/ca.pem \\\\\n  --kubelet-client-certificate=/var/lib/kubernetes/kubernetes.pem \\\\\n  --kubelet-client-key=/var/lib/kubernetes/kubernetes-key.pem \\\\\n  --kubelet-https=true \\\\\n  --runtime-config=rbac.authorization.k8s.io/v1alpha1 \\\\\n  --service-account-key-file=/var/lib/kubernetes/ca-key.pem \\\\\n  --service-cluster-ip-range=${SERVICE_SUBNET} \\\\\n  --service-node-port-range=30000-32767 \\\\\n  --tls-cert-file=/var/lib/kubernetes/kubernetes.pem \\\\\n  --tls-private-key-file=/var/lib/kubernetes/kubernetes-key.pem \\\\\n  --v=2\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/kube-apiserver.service\n\necho \"[Unit]\nDescription=Kubernetes Controller Manager\nDocumentation=https://github.com/GoogleCloudPlatform/kubernetes\n\n[Service]\nExecStart=/usr/bin/kube-controller-manager \\\\\n  --address=0.0.0.0 \\\\\n  --allocate-node-cidrs=true \\\\\n  --cluster-cidr=${CLUSTER_SUBNET} \\\\\n  --cluster-name=kubernetes \\\\\n  --cluster-signing-cert-file=/var/lib/kubernetes/ca.pem \\\\\n  --cluster-signing-key-file=/var/lib/kubernetes/ca-key.pem \\\\\n  --leader-elect=true \\\\\n  --master=http://${INTERNAL_IP}:${MASTER_API_PORT} \\\\\n  --root-ca-file=/var/lib/kubernetes/ca.pem \\\\\n  --service-account-private-key-file=/var/lib/kubernetes/ca-key.pem \\\\\n  --service-cluster-ip-range=${SERVICE_SUBNET} \\\\\n  --v=2\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/kube-controller-manager.service\n\necho \"[Unit]\nDescription=Kubernetes Scheduler\nDocumentation=https://github.com/GoogleCloudPlatform/kubernetes\n\n[Service]\nExecStart=/usr/bin/kube-scheduler \\\\\n  --leader-elect=true \\\\\n  --master=http://${INTERNAL_IP}:${MASTER_API_PORT} \\\\\n  --v=2\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/kube-scheduler.service\n\nsudo systemctl daemon-reload\nsudo systemctl enable etcd\nsudo systemctl start etcd\nsleep 5\nsudo systemctl enable kube-apiserver kube-controller-manager kube-scheduler\nsudo systemctl start kube-apiserver kube-controller-manager kube-scheduler", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "0771aa80-129f-40f8-a3ce-daddd5122bc4"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "36fbc5cf-b495-443c-b95f-f87384a4ff86"}], "description": "", "name": "80edfe72_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "16c98103_dag", "uuid": "0696b4e7-fb3c-42bd-a819-113b0f163c8a"}, "message_list": [], "variable_list": [], "uuid": "181b2cc8-b196-482e-8988-0e6dce472c23"}, "message_list": [], "name": "action_create"}, {"description": "System action for deleting an application. Deletes physical machines as well", "type": "system", "uuid": "7a3e9f25-e8ed-4b23-9810-87e5f02a3f00", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "65a78bcf-970b-472c-b501-866e109c8a56"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "d83d296d_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "ed6d9917-657f-49f2-b3ee-386844af328a"}], "description": "", "name": "c9c07e72_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "d83d296d_dag", "uuid": "ed6d9917-657f-49f2-b3ee-386844af328a"}, "message_list": [], "variable_list": [], "uuid": "70fffd70-6ca8-4bdc-bb8e-29b8b064262a"}, "message_list": [], "name": "action_delete"}, {"description": "System action for starting an application", "type": "system", "uuid": "361a0398-1735-40e0-8484-40b2f28f36fa", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "65a78bcf-970b-472c-b501-866e109c8a56"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "FinalSteps", "uuid": "cc22096f-a459-452e-bdf9-7802278c286d"}, {"kind": "app_task", "name": "SetupFlannel", "uuid": "ac3f9a61-3250-4b57-966c-06df0a372784"}, {"kind": "app_task", "name": "SetupKubeDns", "uuid": "34eb13cc-644d-4659-b9f2-02ab96c96c89"}, {"kind": "app_task", "name": "SetupNutanixVolumePlugin", "uuid": "09eb47ba-8acb-4c38-890f-c6b762e61ee0"}], "name": "3a7a0f2a_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "FinalSteps", "uuid": "cc22096f-a459-452e-bdf9-7802278c286d"}, "edge_type": "user_defined", "type": "", "uuid": "57ae2a71-3cdc-4f61-b037-ef15804804dd", "to_task_reference": {"kind": "app_task", "name": "SetupFlannel", "uuid": "ac3f9a61-3250-4b57-966c-06df0a372784"}}, {"from_task_reference": {"kind": "app_task", "name": "SetupFlannel", "uuid": "ac3f9a61-3250-4b57-966c-06df0a372784"}, "edge_type": "user_defined", "type": "", "uuid": "a4d6f87b-c814-4588-b7e9-55d75f98636e", "to_task_reference": {"kind": "app_task", "name": "SetupKubeDns", "uuid": "34eb13cc-644d-4659-b9f2-02ab96c96c89"}}, {"from_task_reference": {"kind": "app_task", "name": "SetupKubeDns", "uuid": "34eb13cc-644d-4659-b9f2-02ab96c96c89"}, "edge_type": "user_defined", "type": "", "uuid": "ad4738f0-8d23-4294-ab3b-2a4ef9a67ca2", "to_task_reference": {"kind": "app_task", "name": "SetupNutanixVolumePlugin", "uuid": "09eb47ba-8acb-4c38-890f-c6b762e61ee0"}}], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "3558ccf1-1f70-4541-8b0c-d49cc2fc1b82"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "65a78bcf-970b-472c-b501-866e109c8a56"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "FinalSteps", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\necho \"@@{Kubernetes_Minion.COMPLETE}@@\"\nINTERNAL_IP=@@{address}@@\n\nsleep 20\n\nmkdir -p CA Net DNS\nmv *.pem *.csr *.json *.kubeconfig CA/\n\nkubectl config set-cluster kubernetes-prod-cluster --certificate-authority=$HOME/CA/ca.pem --embed-certs=true --server=https://${INTERNAL_IP}:6443\nkubectl config set-credentials admin --client-certificate=$HOME/CA/admin.pem --client-key=$HOME/CA/admin-key.pem\nkubectl config set-context kubernetes-prod-cluster --cluster=kubernetes-prod-cluster --user=admin\nkubectl config use-context kubernetes-prod-cluster\n\nkubectl get componentstatuses\nkubectl get nodes", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "0771aa80-129f-40f8-a3ce-daddd5122bc4"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "cc22096f-a459-452e-bdf9-7802278c286d"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "65a78bcf-970b-472c-b501-866e109c8a56"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SetupFlannel", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\necho '---\nkind: ClusterRole\napiVersion: rbac.authorization.k8s.io/v1beta1\nmetadata:\n  name: flannel\nrules:\n  - apiGroups:\n      - \"\"\n    resources:\n      - pods\n    verbs:\n      - get\n  - apiGroups:\n      - \"\"\n    resources:\n      - nodes\n    verbs:\n      - list\n      - watch\n  - apiGroups:\n      - \"\"\n    resources:\n      - nodes/status\n    verbs:\n      - patch\n---\nkind: ClusterRoleBinding\napiVersion: rbac.authorization.k8s.io/v1beta1\nmetadata:\n  name: flannel\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: flannel\nsubjects:\n- kind: ServiceAccount\n  name: flannel\n  namespace: kube-system\n---\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: flannel\n  namespace: kube-system\n---\nkind: ConfigMap\napiVersion: v1\nmetadata:\n  name: kube-flannel-cfg\n  namespace: kube-system\n  labels:\n    tier: node\n    app: flannel\ndata:\n  cni-conf.json: |\n    {\n      \"name\": \"cbr0\",\n      \"type\": \"flannel\",\n      \"delegate\": {\n        \"isDefaultGateway\": true\n      }\n    }\n  net-conf.json: |\n    {\n      \"Network\": \"@@{CLUSTER_SUBNET}@@\",\n      \"Backend\": {\n        \"Type\": \"vxlan\"\n      }\n    }\n---\napiVersion: extensions/v1beta1\nkind: DaemonSet\nmetadata:\n  name: kube-flannel-ds\n  namespace: kube-system\n  labels:\n    tier: node\n    app: flannel\nspec:\n  template:\n    metadata:\n      labels:\n        tier: node\n        app: flannel\n    spec:\n      hostNetwork: true\n      nodeSelector:\n        beta.kubernetes.io/arch: amd64\n      tolerations:\n      - key: node-role.kubernetes.io/master\n        operator: Exists\n        effect: NoSchedule\n      serviceAccountName: flannel\n      initContainers:\n      - name: install-cni\n        image: quay.io/coreos/flannel:v0.9.0-amd64\n        command:\n        - cp\n        args:\n        - -f\n        - /etc/kube-flannel/cni-conf.json\n        - /etc/cni/net.d/10-flannel.conf\n        volumeMounts:\n        - name: cni\n          mountPath: /etc/cni/net.d\n        - name: flannel-cfg\n          mountPath: /etc/kube-flannel/\n      containers:\n      - name: kube-flannel\n        image: quay.io/coreos/flannel:v0.9.0-amd64\n        command: [ \"/opt/bin/flanneld\", \"--ip-masq\", \"--kube-subnet-mgr\" ]\n        securityContext:\n          privileged: true\n        env:\n        - name: POD_NAME\n          valueFrom:\n            fieldRef:\n              fieldPath: metadata.name\n        - name: POD_NAMESPACE\n          valueFrom:\n            fieldRef:\n              fieldPath: metadata.namespace\n        volumeMounts:\n        - name: run\n          mountPath: /run\n        - name: flannel-cfg\n          mountPath: /etc/kube-flannel/\n      volumes:\n        - name: run\n          hostPath:\n            path: /run\n        - name: cni\n          hostPath:\n            path: /etc/cni/net.d\n        - name: flannel-cfg\n          configMap:\n            name: kube-flannel-cfg' | tee kube-flannel.yml\nkubectl create -f kube-flannel.yml\nmv kube-flannel.yml Net/\n\nkubectl get nodes --output=jsonpath='{range .items[*]}{.spec.podCIDR} via {.status.addresses[?(@.type==\"InternalIP\")].address} {\"\\n\"}{end}' | sudo tee /etc/sysconfig/network-scripts/route-eth0\necho \"@@{SERVICE_SUBNET}@@ via $(kubectl get nodes kubernetes-minion0 --output=jsonpath='{.status.addresses[?(@.type==\"InternalIP\")].address}')\" | sudo tee -a /etc/sysconfig/network-scripts/route-eth0\nsleep 5\nsudo systemctl restart network", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "0771aa80-129f-40f8-a3ce-daddd5122bc4"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "ac3f9a61-3250-4b57-966c-06df0a372784"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "65a78bcf-970b-472c-b501-866e109c8a56"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SetupKubeDns", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\necho 'apiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: kube-dns\n  namespace: kube-system\n  labels:\n    kubernetes.io/cluster-service: \"true\"\n    addonmanager.kubernetes.io/mode: Reconcile\n---\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: kube-dns\n  namespace: kube-system\n  labels:\n    addonmanager.kubernetes.io/mode: EnsureExists\ndata:\n  upstreamNameservers: |\n    [\"8.8.8.8\", \"4.2.2.2\"]\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: kube-dns\n  namespace: kube-system\n  labels:\n    k8s-app: kube-dns\n    kubernetes.io/cluster-service: \"true\"\n    kubernetes.io/name: \"KubeDNS\"\nspec:\n  selector:\n    k8s-app: kube-dns\n  clusterIP: @@{KUBE_CLUSTER_DNS}@@\n  ports:\n    - name: dns\n      port: 53\n      protocol: UDP\n    - name: dns-tcp\n      port: 53\n      protocol: TCP\n---\napiVersion: extensions/v1beta1\nkind: Deployment\nmetadata:\n  name: kube-dns\n  namespace: kube-system\n  labels:\n    k8s-app: kube-dns\n    kubernetes.io/cluster-service: \"true\"\n    addonmanager.kubernetes.io/mode: Reconcile\nspec:\n  strategy:\n    rollingUpdate:\n      maxSurge: 10%\n      maxUnavailable: 0\n  selector:\n    matchLabels:\n      k8s-app: kube-dns\n  template:\n    metadata:\n      labels:\n        k8s-app: kube-dns\n      annotations:\n        scheduler.alpha.kubernetes.io/critical-pod: ''\n    spec:\n      tolerations:\n      - key: \"CriticalAddonsOnly\"\n        operator: \"Exists\"\n      volumes:\n      - name: kube-dns-config\n        configMap:\n          name: kube-dns\n          optional: true\n      containers:\n      - name: kubedns\n        image: gcr.io/google_containers/k8s-dns-kube-dns-amd64:1.14.4\n        resources:\n          limits:\n            memory: 170Mi\n          requests:\n            cpu: 100m\n            memory: 70Mi\n        livenessProbe:\n          httpGet:\n            path: /healthcheck/kubedns\n            port: 10054\n            scheme: HTTP\n          initialDelaySeconds: 60\n          timeoutSeconds: 5\n          successThreshold: 1\n          failureThreshold: 5\n        readinessProbe:\n          httpGet:\n            path: /readiness\n            port: 8081\n            scheme: HTTP\n          initialDelaySeconds: 3\n          timeoutSeconds: 5\n        args:\n        - --domain=cluster.local.\n        - --dns-port=10053\n        - --config-dir=/kube-dns-config\n        - --v=2\n        env:\n        - name: PROMETHEUS_PORT\n          value: \"10055\"\n        ports:\n        - containerPort: 10053\n          name: dns-local\n          protocol: UDP\n        - containerPort: 10053\n          name: dns-tcp-local\n          protocol: TCP\n        - containerPort: 10055\n          name: metrics\n          protocol: TCP\n        volumeMounts:\n        - name: kube-dns-config\n          mountPath: /kube-dns-config\n      - name: dnsmasq\n        image: gcr.io/google_containers/k8s-dns-dnsmasq-nanny-amd64:1.14.4\n        livenessProbe:\n          httpGet:\n            path: /healthcheck/dnsmasq\n            port: 10054\n            scheme: HTTP\n          initialDelaySeconds: 60\n          timeoutSeconds: 5\n          successThreshold: 1\n          failureThreshold: 5\n        args:\n        - -v=2\n        - -logtostderr\n        - -configDir=/etc/k8s/dns/dnsmasq-nanny\n        - -restartDnsmasq=true\n        - --\n        - -k\n        - --cache-size=1000\n        - --log-facility=-\n        - --server=/cluster.local./127.0.0.1#10053\n        - --server=/in-addr.arpa/127.0.0.1#10053\n        - --server=/ip6.arpa/127.0.0.1#10053\n        ports:\n        - containerPort: 53\n          name: dns\n          protocol: UDP\n        - containerPort: 53\n          name: dns-tcp\n          protocol: TCP\n        resources:\n          requests:\n            cpu: 150m\n            memory: 20Mi\n        volumeMounts:\n        - name: kube-dns-config\n          mountPath: /etc/k8s/dns/dnsmasq-nanny\n      - name: sidecar\n        image: gcr.io/google_containers/k8s-dns-sidecar-amd64:1.14.4\n        livenessProbe:\n          httpGet:\n            path: /metrics\n            port: 10054\n            scheme: HTTP\n          initialDelaySeconds: 60\n          timeoutSeconds: 5\n          successThreshold: 1\n          failureThreshold: 5\n        args:\n        - --v=2\n        - --logtostderr\n        - --probe=kubedns,127.0.0.1:10053,kubernetes.default.svc.cluster.local.,5,A\n        - --probe=dnsmasq,127.0.0.1:53,kubernetes.default.svc.cluster.local.,5,A\n        ports:\n        - containerPort: 10054\n          name: metrics\n          protocol: TCP\n        resources:\n          requests:\n            memory: 20Mi\n            cpu: 10m\n      dnsPolicy:\n      serviceAccountName: kube-dns' | tee kube-dns.yaml\n      \nkubectl create -f kube-dns.yaml\nmv kube-dns.yaml DNS/", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "0771aa80-129f-40f8-a3ce-daddd5122bc4"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "34eb13cc-644d-4659-b9f2-02ab96c96c89"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "65a78bcf-970b-472c-b501-866e109c8a56"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SetupNutanixVolumePlugin", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\nif [ \"@@{PRISM_CLUSTER_IP}@@\" == \"\" ] && [ \"@@{PRISM_USERNAME}@@\" == \"\" ] && [ \"@@{PRISM_PASSWORD}@@\" == \"\" ]; then\n\texit\nfi\nmkdir volume_plugin\nNTNX_SECRET=$(echo -n \"@@{PRISM_USERNAME}@@:@@{PRISM_PASSWORD}@@\" | base64)\necho 'apiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: nutanixabs-provisioner\n---\nkind: ClusterRole\napiVersion: rbac.authorization.k8s.io/v1beta1\nmetadata:\n  name: nutanixabs-provisioner-runner\nrules:\n  - apiGroups: [\"\"]\n    resources: [\"persistentvolumes\"]\n    verbs: [\"get\", \"list\", \"watch\", \"create\", \"delete\"]\n  - apiGroups: [\"\"]\n    resources: [\"persistentvolumeclaims\"]\n    verbs: [\"get\", \"list\", \"watch\", \"update\"]\n  - apiGroups: [\"storage.k8s.io\"]\n    resources: [\"storageclasses\"]\n    verbs: [\"get\", \"list\", \"watch\"]\n  - apiGroups: [\"\"]\n    resources: [\"events\"]\n    verbs: [\"list\", \"watch\", \"create\", \"update\", \"patch\"]\n  - apiGroups: [\"\"]\n    resources: [\"services\"]\n    verbs: [\"get\"]\n  - apiGroups: [\"\"]\n    resources: [\"secrets\"]\n    verbs: [\"get\", \"create\", \"delete\"]\n---\nkind: ClusterRoleBinding\napiVersion: rbac.authorization.k8s.io/v1beta1\nmetadata:\n  name: run-nutanixabs-provisioner\nsubjects:\n  - kind: ServiceAccount\n    name: nutanixabs-provisioner\n    namespace: default\nroleRef:\n  kind: ClusterRole\n  name: nutanixabs-provisioner-runner\n  apiGroup: rbac.authorization.k8s.io\n---\napiVersion: extensions/v1beta1\nkind: Deployment\nmetadata:\n  name: nutanixabs-provisioner\nspec:\n  replicas: 1\n  strategy:\n    type: Recreate\n  template:\n    metadata:\n      labels:\n        app: nutanixabs-provisioner\n    spec:\n      serviceAccount: nutanixabs-provisioner\n      hostNetwork: true\n      containers:\n        -\n          image: \"subodh73/nutanixabs-provisioner\"\n          name: nutanixabs-provisioner\n          args: [\"--v=4\"]\n          imagePullPolicy: IfNotPresent\n---\napiVersion: v1\nkind: Secret\nmetadata:\n  name: ntnx-secret\n  namespace: default\ndata:\n  key: <SECRET>\ntype: nutanix/abs\n---\nkind: StorageClass\napiVersion: storage.k8s.io/v1\nmetadata:\n  name: silver \nprovisioner: nutanix/abs\nparameters:\n     prismEndPoint: @@{PRISM_CLUSTER_IP}@@:9440\n     dataServiceEndPoint: @@{PRISM_DATA_SERVICE_IP}@@:3260\n     user: @@{PRISM_USERNAME}@@\n     password: @@{PRISM_PASSWORD}@@\n     secretName: ntnx-secret\n     storageContainer: @@{CONTAINER_NAME}@@\n     fsType: ext4\n     chapAuthEnabled: \"false\"' | tee volume_plugin/nutanix-provisioner.yaml\n\nsed -i \"s/<SECRET>/${NTNX_SECRET}/\" volume_plugin/nutanix-provisioner.yaml\nkubectl create -f volume_plugin/nutanix-provisioner.yaml", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "0771aa80-129f-40f8-a3ce-daddd5122bc4"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "09eb47ba-8acb-4c38-890f-c6b762e61ee0"}], "description": "", "name": "ec49e982_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "3a7a0f2a_dag", "uuid": "3558ccf1-1f70-4541-8b0c-d49cc2fc1b82"}, "message_list": [], "variable_list": [], "uuid": "d947e531-a020-4b99-9b4b-6f3fc665c5ae"}, "message_list": [], "name": "action_start"}, {"description": "System action for stopping an application", "type": "system", "uuid": "d71fbdca-cce8-45d0-8981-e4332b6f40b2", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "65a78bcf-970b-472c-b501-866e109c8a56"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "990f28cf_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "fdc227e6-0828-4d50-babf-26c20c3e58ab"}], "description": "", "name": "e34ef8d6_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "990f28cf_dag", "uuid": "fdc227e6-0828-4d50-babf-26c20c3e58ab"}, "message_list": [], "variable_list": [], "uuid": "0a7823be-b563-467d-b056-78527970edc9"}, "message_list": [], "name": "action_stop"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "c0ba9119-1847-45f8-abbb-4b7b283122f5", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "65a78bcf-970b-472c-b501-866e109c8a56"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "9afd1d8b_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "4c0acab6-84b8-4a1f-b0c3-49b8a5966b9c"}], "description": "", "name": "3c8f0554_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "9afd1d8b_dag", "uuid": "4c0acab6-84b8-4a1f-b0c3-49b8a5966b9c"}, "message_list": [], "variable_list": [], "uuid": "c51a449f-4fda-4864-aafb-3d3803f64ee6"}, "message_list": [], "name": "action_soft_delete"}], "depends_on_list": [], "name": "Kubernetes_Master", "state": "ACTIVE", "port_list": [], "editables": {}, "tier": "", "message_list": [], "variable_list": [], "description": ""}, {"singleton": false, "uuid": "d4254ddc-5560-4e40-927a-7b25ce88f366", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "601796fd-c282-4bd6-8f92-19b5dd0d267f", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "d4254ddc-5560-4e40-927a-7b25ce88f366"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "ConfigureMinion", "uuid": "0ac403c2-1f3a-4439-b842-b6ce4bd0dace"}, {"kind": "app_task", "name": "SetFlag", "uuid": "fc170bae-0dfe-4187-895e-a230c51693e2"}], "name": "2a209891_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "ConfigureMinion", "uuid": "0ac403c2-1f3a-4439-b842-b6ce4bd0dace"}, "edge_type": "user_defined", "type": "", "uuid": "89431292-a3c1-40f7-8675-865c66d672b3", "to_task_reference": {"kind": "app_task", "name": "SetFlag", "uuid": "fc170bae-0dfe-4187-895e-a230c51693e2"}}], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "a71f3f19-da5a-40dd-8d0d-7f2c4c5eee7b"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "d4254ddc-5560-4e40-927a-7b25ce88f366"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "ConfigureMinion", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\nCONTROLLER_IP=@@{K8SC.address}@@\nKUBERNETES_CLUSTER_DNS=\"@@{KUBE_CLUSTER_DNS}@@\"\nUSERNAME=\"@@{CENTOS.username}@@\"\nCLUSTER_SUBNET=\"@@{CLUSTER_SUBNET}@@\"\n\necho \"@@{CENTOS.secret}@@\" | tee centos.pem\nchmod 400 centos.pem\n\nsleep 60\n# -*- Bootstrapping Kubernetes Workers\nHOSTNAME=$(hostname -s)\nscp -i centos.pem -o StrictHostKeyChecking=no ${USERNAME}@${CONTROLLER_IP}:${HOSTNAME}*.pem ./\nscp -i centos.pem -o StrictHostKeyChecking=no ${USERNAME}@${CONTROLLER_IP}:${HOSTNAME}*.kubeconfig ./\nscp -i centos.pem -o StrictHostKeyChecking=no ${USERNAME}@${CONTROLLER_IP}:kube-proxy.kubeconfig ./\nscp -i centos.pem -o StrictHostKeyChecking=no ${USERNAME}@${CONTROLLER_IP}:ca.pem ./\n\nsudo mkdir -p /var/lib/{kubelet,kube-proxy,kubernetes} /var/run/kubernetes\nsudo mv kubectl kube-proxy kubelet /usr/bin/\n\nsudo mv ${HOSTNAME}-key.pem ${HOSTNAME}.pem /var/lib/kubelet/\nsudo mv ${HOSTNAME}.kubeconfig /var/lib/kubelet/kubeconfig\nsudo mv ca.pem /var/lib/kubernetes/\n\n# -*- Install Docker\ntar -xvf docker-1.12.6.tgz\nsudo cp docker/docker* /usr/bin/\necho \"[Unit]\nDescription=Docker Application Container Engine\nDocumentation=http://docs.docker.com\n\n[Service]\nExecStart=/usr/bin/docker daemon \\\\\n  --iptables=false \\\\\n  --ip-masq=false \\\\\n  --host=unix:///var/run/docker.sock \\\\\n  --log-level=error \\\\\n  --storage-driver=overlay\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/docker.service\n\necho \"[Unit]\nDescription=Kubernetes Kubelet\nDocumentation=https://github.com/GoogleCloudPlatform/kubernetes\nAfter=docker.service\nRequires=docker.service\n\n[Service]\nExecStart=/usr/bin/kubelet \\\n  --allow-privileged=true \\\n  --cluster-dns=${KUBERNETES_CLUSTER_DNS} \\\n  --cluster-domain=cluster.local \\\n  --container-runtime=docker \\\n  --enable-custom-metrics \\\n  --kubeconfig=/var/lib/kubelet/kubeconfig \\\n  --network-plugin=cni \\\n  --pod-cidr=${CLUSTER_SUBNET} \\\n  --register-node=true \\\n  --require-kubeconfig \\\n  --runtime-request-timeout=10m \\\n  --tls-cert-file=/var/lib/kubelet/${HOSTNAME}.pem \\\n  --tls-private-key-file=/var/lib/kubelet/${HOSTNAME}-key.pem \\\n  --v=2\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/kubelet.service\n\nsudo mv kube-proxy.kubeconfig /var/lib/kube-proxy/kubeconfig\n\necho \"[Unit]\nDescription=Kubernetes Kube Proxy\nDocumentation=https://github.com/GoogleCloudPlatform/kubernetes\n\n[Service]\nExecStart=/usr/bin/kube-proxy \\\\\n  --cluster-cidr=${CLUSTER_SUBNET} \\\\\n  --masquerade-all=true \\\n  --kubeconfig=/var/lib/kube-proxy/kubeconfig \\\\\n  --proxy-mode=iptables \\\\\n  --v=2\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/kube-proxy.service\n\nsudo mkdir -p /etc/cni/net.d\necho '{\n  \"name\": \"cbr0\",\n  \"type\": \"flannel\",\n  \"delegate\": {\n    \"isDefaultGateway\": true\n  }\n}' | sudo tee /etc/cni/net.d/10-flannel.conf\n\nsudo mkdir -p /opt/cni/bin\nsudo tar -zxvf cni-plugins-amd64-v0.6.0.tgz -C /opt/cni/bin\n\n# -*- Configure Iscsi iqn\necho \"InitiatorName=iqn.1994-05.com.nutanix:k8s-worker\" | sudo tee /etc/iscsi/initiatorname.iscsi \n\nsudo systemctl daemon-reload\nsudo systemctl enable docker kubelet kube-proxy iscsid\nsudo systemctl start docker kubelet kube-proxy iscsid", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "0771aa80-129f-40f8-a3ce-daddd5122bc4"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "0ac403c2-1f3a-4439-b842-b6ce4bd0dace"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "d4254ddc-5560-4e40-927a-7b25ce88f366"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SetFlag", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#script\nprint \"COMPLETE=True\"", "eval_variables": ["COMPLETE"], "eval_scope": "local", "type": "", "script_type": "static"}, "timeout_secs": "0", "type": "SET_VARIABLE", "variable_list": [], "uuid": "fc170bae-0dfe-4187-895e-a230c51693e2"}], "description": "", "name": "658fecfa_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "2a209891_dag", "uuid": "a71f3f19-da5a-40dd-8d0d-7f2c4c5eee7b"}, "message_list": [], "variable_list": [], "uuid": "321b7eca-6bed-4f30-9432-8dca6b84d02b"}, "message_list": [], "name": "action_create"}, {"description": "System action for deleting an application. Deletes physical machines as well", "type": "system", "uuid": "b13f5c58-d1f2-4201-9ecf-44247f993d48", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "d4254ddc-5560-4e40-927a-7b25ce88f366"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "1ca74521_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "2e1dd4a4-7430-4a88-9b31-67aeabf354b7"}], "description": "", "name": "4356ce2d_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "1ca74521_dag", "uuid": "2e1dd4a4-7430-4a88-9b31-67aeabf354b7"}, "message_list": [], "variable_list": [], "uuid": "5614b92c-76f5-48e1-ad08-8888fecb9ff0"}, "message_list": [], "name": "action_delete"}, {"description": "System action for starting an application", "type": "system", "uuid": "6771fba8-d580-42d2-a2ab-d1311e8863df", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "d4254ddc-5560-4e40-927a-7b25ce88f366"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "Get Images", "uuid": "f67f0b21-8735-4ea2-856d-e52d6f4f773f"}, {"kind": "app_task", "name": "Load Images", "uuid": "f6b7efc8-4e76-4ef5-bdb5-a0fd9016fbcc"}], "name": "983862b1_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "Get Images", "uuid": "f67f0b21-8735-4ea2-856d-e52d6f4f773f"}, "edge_type": "user_defined", "type": "", "uuid": "8eaa4a10-0a63-4478-8cdc-339ae7ef2e2a", "to_task_reference": {"kind": "app_task", "name": "Load Images", "uuid": "f6b7efc8-4e76-4ef5-bdb5-a0fd9016fbcc"}}], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "269074ad-3ac4-4c59-bc21-0c80894c9598"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "d4254ddc-5560-4e40-927a-7b25ce88f366"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Get Images", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash -ex\n\nmkdir images\ncd images\n\nwget http://\"@@{artifact_server}@@\"/artifacts/calmdemo-nginx-web-image-v1.2.tar.gz\nwget http://\"@@{artifact_server}@@\"/artifacts/calmdemo-nginx-web-image-v2.0.tar.gz\nwget http://\"@@{artifact_server}@@\"/artifacts/nodejs-mongo-ha-app-image.tar.gz\nwget http://\"@@{artifact_server}@@\"/artifacts/mongo-image-latest.tar.gz ", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "0771aa80-129f-40f8-a3ce-daddd5122bc4"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "f67f0b21-8735-4ea2-856d-e52d6f4f773f"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "d4254ddc-5560-4e40-927a-7b25ce88f366"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Load Images", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash -ex\n\nsudo docker load -i images/calmdemo-nginx-web-image-v1.2.tar.gz\nsudo docker load -i images/calmdemo-nginx-web-image-v2.0.tar.gz \nsudo docker load -i images/nodejs-mongo-ha-app-image.tar.gz\nsudo docker load -i images/mongo-image-latest.tar.gz", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "0771aa80-129f-40f8-a3ce-daddd5122bc4"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "f6b7efc8-4e76-4ef5-bdb5-a0fd9016fbcc"}], "description": "", "name": "6583643e_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "983862b1_dag", "uuid": "269074ad-3ac4-4c59-bc21-0c80894c9598"}, "message_list": [], "variable_list": [], "uuid": "1395ad61-6541-456c-ab17-ee020c863928"}, "message_list": [], "name": "action_start"}, {"description": "System action for stopping an application", "type": "system", "uuid": "5697da4e-7a0c-44aa-8107-e86609f6f45b", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "d4254ddc-5560-4e40-927a-7b25ce88f366"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "cba58264_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "1a269dca-4083-4733-88cc-d14525b775bb"}], "description": "", "name": "3cee8199_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "cba58264_dag", "uuid": "1a269dca-4083-4733-88cc-d14525b775bb"}, "message_list": [], "variable_list": [], "uuid": "f624e457-58bc-4997-9618-a17583a38ca6"}, "message_list": [], "name": "action_stop"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "212e6962-e519-4e9a-894d-79bf67bb0f01", "state": "ACTIVE", "critical": false, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "d4254ddc-5560-4e40-927a-7b25ce88f366"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "389a6493_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "36c814f3-ddab-4557-bb6b-88aa90f471a3"}], "description": "", "name": "25b466fc_runbook", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "389a6493_dag", "uuid": "36c814f3-ddab-4557-bb6b-88aa90f471a3"}, "message_list": [], "variable_list": [], "uuid": "a6a0c7c7-37f8-47d1-a2e1-12a5952d1066"}, "message_list": [], "name": "action_soft_delete"}], "depends_on_list": [], "name": "Kubernetes_Minion", "state": "ACTIVE", "port_list": [], "editables": {}, "tier": "", "message_list": [], "variable_list": [{"val_type": "STRING", "description": "", "name": "artifact_server", "type": "LOCAL", "value": "artifact-server.gso.lab", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {}, "message_list": [], "uuid": "1ae9cc5b-83f3-4fdd-b6e9-b5c059055eee"}], "description": ""}], "substrate_definition_list": [{"description": "", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "d4400f23-e982-4740-82d9-6c413f675d08", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "28a8843a-8ae9-4ed9-9a2e-f910fe59b444"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Provision_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "ddf33f90-a46c-4894-8631-81709f09a066"}, {"kind": "app_task", "name": "SYS_GEN__check_login_for_K8SC_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "651fb286-2106-4b06-9aa7-bd12b6286ed0"}], "name": "SYS_GEN__DAG_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Nutanix_Provision_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "ddf33f90-a46c-4894-8631-81709f09a066"}, "edge_type": "inherent", "type": "", "uuid": "3672df68-e726-4972-a5cd-009985f1678e", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__check_login_for_K8SC_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "651fb286-2106-4b06-9aa7-bd12b6286ed0"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "4a2f0308-9bfa-45e3-9816-93104d0e2cb5"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "28a8843a-8ae9-4ed9-9a2e-f910fe59b444"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Provision_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "state": "ACTIVE", "attrs": {"name": "K8SC", "resources": {"nic_list": [{"nic_type": "NORMAL_NIC", "ip_endpoint_list": [], "network_function_chain_reference": null, "network_function_nic_type": "INGRESS", "mac_address": "", "subnet_reference": {"kind": "subnet", "type": "", "name": "", "uuid": "c313afa7-22ec-4571-b386-c747cfb68029"}, "type": ""}], "serial_port_list": [], "guest_tools": null, "num_vcpus_per_socket": 2, "num_sockets": 2, "gpu_list": [], "memory_size_mib": 2048, "parent_reference": null, "hardware_clock_timezone": "", "guest_customization": {"cloud_init": {"meta_data": "", "type": "", "user_data": "#cloud-config\nusers:\n  - name: centos\n    ssh-authorized-keys:\n      - @@{INSTANCE_PUBLIC_KEY}@@\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']"}, "type": "", "sysprep": null}, "power_state": "ON", "type": "", "boot_config": null, "disk_list": [{"data_source_reference": {"kind": "app_package", "type": "", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "a56e1157-2c16-472e-9fb0-452fa9e02de3"}, "type": "", "disk_size_mib": 1, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 1, "adapter_type": "SCSI"}, "device_type": "DISK"}}]}, "availability_zone_reference": null, "backup_policy": null, "type": "", "cluster_reference": null, "categories": ""}, "timeout_secs": "0", "type": "PROVISION_NUTANIX", "variable_list": [], "uuid": "ddf33f90-a46c-4894-8631-81709f09a066"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "28a8843a-8ae9-4ed9-9a2e-f910fe59b444"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__check_login_for_K8SC_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "state": "ACTIVE", "attrs": {"type": "CHECK_LOGIN", "timeout": "60", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@"}, "timeout_secs": "0", "type": "CHECK_LOGIN", "variable_list": [], "uuid": "651fb286-2106-4b06-9aa7-bd12b6286ed0"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "4a2f0308-9bfa-45e3-9816-93104d0e2cb5"}, "message_list": [], "variable_list": [], "uuid": "7bf674a7-dbc0-4199-94f6-d4857d93570f"}, "message_list": [], "name": "action_create"}, {"description": "System action for powering on an application", "type": "system", "uuid": "3a21aee2-6dc9-4ccb-82fd-5f3ad55d3910", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "28a8843a-8ae9-4ed9-9a2e-f910fe59b444"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Operation_PowerOn_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "d25b7dc8-2efe-4b9c-b3fd-b264a12f764e"}, {"kind": "app_task", "name": "check_login_for_K8SC_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "16fcb1a9-65ac-4e0c-b565-bd4d51abd49b"}], "name": "SYS_GEN__DAG_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Nutanix_Operation_PowerOn_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "d25b7dc8-2efe-4b9c-b3fd-b264a12f764e"}, "edge_type": "inherent", "type": "", "uuid": "df4629eb-4eea-46fb-a8aa-174f84269793", "to_task_reference": {"kind": "app_task", "name": "check_login_for_K8SC_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "16fcb1a9-65ac-4e0c-b565-bd4d51abd49b"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "2d5de4cd-632a-4557-b277-45691aa3e4f2"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "28a8843a-8ae9-4ed9-9a2e-f910fe59b444"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Operation_PowerOn_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "state": "ACTIVE", "attrs": {"type": "GENERIC_OPERATION"}, "timeout_secs": "0", "type": "VMOPERATION_NUTANIX", "variable_list": [], "uuid": "d25b7dc8-2efe-4b9c-b3fd-b264a12f764e"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "28a8843a-8ae9-4ed9-9a2e-f910fe59b444"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "check_login_for_K8SC_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "state": "ACTIVE", "attrs": {"type": "CHECK_LOGIN", "timeout": "60", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@"}, "timeout_secs": "0", "type": "CHECK_LOGIN", "variable_list": [], "uuid": "16fcb1a9-65ac-4e0c-b565-bd4d51abd49b"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "2d5de4cd-632a-4557-b277-45691aa3e4f2"}, "message_list": [], "variable_list": [], "uuid": "1665c5c3-f61d-4389-bea5-2f079115b2ae"}, "message_list": [], "name": "action_poweron"}, {"description": "System action for suspending an application", "type": "system", "uuid": "e842dd44-d593-4342-a293-d52364ff5e16", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "28a8843a-8ae9-4ed9-9a2e-f910fe59b444"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DAG_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "1361c1a6-b4d5-4870-96ae-175cef37e410"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "1361c1a6-b4d5-4870-96ae-175cef37e410"}, "message_list": [], "variable_list": [], "uuid": "48128785-3735-4b42-b44d-f1650860ef97"}, "message_list": [], "name": "action_suspend"}, {"description": "System action for modifying an application", "type": "system", "uuid": "777d8ef1-2091-40e0-8121-c35c20b36d04", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "28a8843a-8ae9-4ed9-9a2e-f910fe59b444"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DAG_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "d2ae53dd-42f0-4d8a-b766-57dc46d1d6c0"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "d2ae53dd-42f0-4d8a-b766-57dc46d1d6c0"}, "message_list": [], "variable_list": [], "uuid": "8cc30609-b366-43e4-ba66-9d71525bf63c"}, "message_list": [], "name": "action_modify"}, {"description": "System action for powering off an application", "type": "system", "uuid": "6987b79b-a383-4ef7-9bf8-9538545921ca", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "28a8843a-8ae9-4ed9-9a2e-f910fe59b444"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Operation_PowerOff_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "f93a5e27-cec9-48e0-9be0-3ce06bab61c0"}], "name": "SYS_GEN__DAG_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "9ccd2bd2-ec9a-454e-80b0-f8ec67435694"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "28a8843a-8ae9-4ed9-9a2e-f910fe59b444"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Operation_PowerOff_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "state": "ACTIVE", "attrs": {"type": "GENERIC_OPERATION"}, "timeout_secs": "0", "type": "VMOPERATION_NUTANIX", "variable_list": [], "uuid": "f93a5e27-cec9-48e0-9be0-3ce06bab61c0"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "9ccd2bd2-ec9a-454e-80b0-f8ec67435694"}, "message_list": [], "variable_list": [], "uuid": "d5a0b374-ee92-448d-aa15-17b91400fdd1"}, "message_list": [], "name": "action_poweroff"}, {"description": "System action for deleting an application. Deletes physical machines as well", "type": "system", "uuid": "3cc53c0c-1282-4546-ae2c-9ed9b0d0e652", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "28a8843a-8ae9-4ed9-9a2e-f910fe59b444"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Delete_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "1d6aec33-851f-43fe-93ea-19c48a2c03ad"}], "name": "SYS_GEN__DAG_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "b46d0918-947b-4648-a848-54196191d38b"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "28a8843a-8ae9-4ed9-9a2e-f910fe59b444"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Delete_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "DELETE_NUTANIX", "variable_list": [], "uuid": "1d6aec33-851f-43fe-93ea-19c48a2c03ad"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "b46d0918-947b-4648-a848-54196191d38b"}, "message_list": [], "variable_list": [], "uuid": "4860f0fc-1d79-4439-b939-aaecab0704d4"}, "message_list": [], "name": "action_delete"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "05666b02-f660-461d-b6a8-671782b38e21", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "28a8843a-8ae9-4ed9-9a2e-f910fe59b444"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Substrate_Element_Delete_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "d706b973-303d-4f24-8a31-bf2821da3334"}], "name": "SYS_GEN__DAG_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "37713f0e-d9f5-488a-acc6-109fee850130"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "28a8843a-8ae9-4ed9-9a2e-f910fe59b444"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Substrate_Element_Delete_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "d706b973-303d-4f24-8a31-bf2821da3334"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "37713f0e-d9f5-488a-acc6-109fee850130"}, "message_list": [], "variable_list": [], "uuid": "e9da900a-5331-4b5e-9a38-46402e0645de"}, "message_list": [], "name": "action_soft_delete"}], "type": "AHV_VM", "name": "K8SC", "state": "ACTIVE", "readiness_probe": {"connection_type": "SSH", "disable_readiness_probe": false, "connection_port": 22, "timeout_secs": "60", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@"}, "editables": {"readiness_probe": {"connection_port": true, "timeout_secs": true}, "create_spec": {"name": true, "resources": {"nic_list": {"0": {"subnet_reference": true}}, "num_vcpus_per_socket": true, "num_sockets": true, "memory_size_mib": true, "guest_customization": true, "disk_list": {"0": {"device_properties": {"disk_address": {}}}}}}}, "os_type": "Linux", "message_list": [], "create_spec": {"name": "K8SC", "resources": {"nic_list": [{"nic_type": "NORMAL_NIC", "ip_endpoint_list": [], "network_function_chain_reference": null, "network_function_nic_type": "INGRESS", "mac_address": "", "subnet_reference": {"kind": "subnet", "type": "", "name": "", "uuid": "c313afa7-22ec-4571-b386-c747cfb68029"}, "type": ""}], "serial_port_list": [], "guest_tools": null, "num_vcpus_per_socket": 2, "num_sockets": 2, "gpu_list": [], "memory_size_mib": 2048, "parent_reference": null, "hardware_clock_timezone": "", "guest_customization": {"cloud_init": {"meta_data": "", "type": "", "user_data": "#cloud-config\nusers:\n  - name: centos\n    ssh-authorized-keys:\n      - @@{INSTANCE_PUBLIC_KEY}@@\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']"}, "type": "", "sysprep": null}, "power_state": "ON", "type": "", "boot_config": null, "disk_list": [{"data_source_reference": {"kind": "app_package", "type": "", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "a56e1157-2c16-472e-9fb0-452fa9e02de3"}, "type": "", "disk_size_mib": 1, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 1, "adapter_type": "SCSI"}, "device_type": "DISK"}}]}, "availability_zone_reference": null, "backup_policy": null, "type": "", "cluster_reference": null, "categories": ""}, "variable_list": [], "uuid": "28a8843a-8ae9-4ed9-9a2e-f910fe59b444"}, {"description": "", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "e72a2de2-60ff-40a9-9bbc-4cadaf00786b", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "b766185a-667f-488a-ba64-00194e53907a"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Provision_b766185a_667f_488a_ba64_00194e53907a", "uuid": "2a5bfbcd-e5e4-4204-b982-ad0d1f84f8c3"}, {"kind": "app_task", "name": "SYS_GEN__check_login_for_K8SM_b766185a_667f_488a_ba64_00194e53907a", "uuid": "c18346a3-d683-4721-907b-80a37eb30758"}], "name": "SYS_GEN__DAG_Substrate_b766185a_667f_488a_ba64_00194e53907a", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Nutanix_Provision_b766185a_667f_488a_ba64_00194e53907a", "uuid": "2a5bfbcd-e5e4-4204-b982-ad0d1f84f8c3"}, "edge_type": "inherent", "type": "", "uuid": "ecef2f71-5b23-4232-bb47-0900417a43fd", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__check_login_for_K8SM_b766185a_667f_488a_ba64_00194e53907a", "uuid": "c18346a3-d683-4721-907b-80a37eb30758"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "4cccc54f-7a5e-4e85-9b59-d3545831970a"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "b766185a-667f-488a-ba64-00194e53907a"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Provision_b766185a_667f_488a_ba64_00194e53907a", "state": "ACTIVE", "attrs": {"name": "K8SM@@{calm_array_index}@@", "resources": {"nic_list": [{"nic_type": "NORMAL_NIC", "ip_endpoint_list": [], "network_function_chain_reference": null, "network_function_nic_type": "INGRESS", "mac_address": "", "subnet_reference": {"kind": "subnet", "type": "", "name": "", "uuid": "c313afa7-22ec-4571-b386-c747cfb68029"}, "type": ""}], "serial_port_list": [], "guest_tools": null, "num_vcpus_per_socket": 2, "num_sockets": 2, "gpu_list": [], "memory_size_mib": 2048, "parent_reference": null, "hardware_clock_timezone": "", "guest_customization": {"cloud_init": {"meta_data": "", "type": "", "user_data": "#cloud-config\nusers:\n  - name: centos\n    ssh-authorized-keys:\n      - @@{INSTANCE_PUBLIC_KEY}@@\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']"}, "type": "", "sysprep": null}, "power_state": "ON", "type": "", "boot_config": null, "disk_list": [{"data_source_reference": {"kind": "app_package", "type": "", "name": "CENTOS_IMAGE_MINION", "uuid": "43b2690d-ca2e-4580-813e-0ea73f68d970"}, "type": "", "disk_size_mib": 1, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 0, "adapter_type": "SCSI"}, "device_type": "DISK"}}, {"data_source_reference": null, "type": "", "disk_size_mib": 10240, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 1, "adapter_type": "SCSI"}, "device_type": "DISK"}}, {"data_source_reference": null, "type": "", "disk_size_mib": 10240, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 2, "adapter_type": "SCSI"}, "device_type": "DISK"}}, {"data_source_reference": null, "type": "", "disk_size_mib": 10240, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 3, "adapter_type": "SCSI"}, "device_type": "DISK"}}]}, "availability_zone_reference": null, "backup_policy": null, "type": "", "cluster_reference": null, "categories": ""}, "timeout_secs": "0", "type": "PROVISION_NUTANIX", "variable_list": [], "uuid": "2a5bfbcd-e5e4-4204-b982-ad0d1f84f8c3"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "b766185a-667f-488a-ba64-00194e53907a"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__check_login_for_K8SM_b766185a_667f_488a_ba64_00194e53907a", "state": "ACTIVE", "attrs": {"type": "CHECK_LOGIN", "timeout": "60", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@"}, "timeout_secs": "0", "type": "CHECK_LOGIN", "variable_list": [], "uuid": "c18346a3-d683-4721-907b-80a37eb30758"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_b766185a_667f_488a_ba64_00194e53907a", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "4cccc54f-7a5e-4e85-9b59-d3545831970a"}, "message_list": [], "variable_list": [], "uuid": "56a51e58-7d42-44f9-93cc-3169b1ed9a76"}, "message_list": [], "name": "action_create"}, {"description": "System action for powering on an application", "type": "system", "uuid": "8c1b8fa5-3aa8-4600-92da-0f05cd760393", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "b766185a-667f-488a-ba64-00194e53907a"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Operation_PowerOn_b766185a_667f_488a_ba64_00194e53907a", "uuid": "a62b2f8b-18c4-4ce0-a920-81883789e70a"}, {"kind": "app_task", "name": "check_login_for_K8SM_b766185a_667f_488a_ba64_00194e53907a", "uuid": "f8f872b8-f63a-4d16-b552-a10c9d950b31"}], "name": "SYS_GEN__DAG_Substrate_b766185a_667f_488a_ba64_00194e53907a", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Nutanix_Operation_PowerOn_b766185a_667f_488a_ba64_00194e53907a", "uuid": "a62b2f8b-18c4-4ce0-a920-81883789e70a"}, "edge_type": "inherent", "type": "", "uuid": "fc88fab7-d63b-4a31-9610-35d8d67c521f", "to_task_reference": {"kind": "app_task", "name": "check_login_for_K8SM_b766185a_667f_488a_ba64_00194e53907a", "uuid": "f8f872b8-f63a-4d16-b552-a10c9d950b31"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "70d48f87-55f8-4ed5-bac0-50b48e83cb1c"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "b766185a-667f-488a-ba64-00194e53907a"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Operation_PowerOn_b766185a_667f_488a_ba64_00194e53907a", "state": "ACTIVE", "attrs": {"type": "GENERIC_OPERATION"}, "timeout_secs": "0", "type": "VMOPERATION_NUTANIX", "variable_list": [], "uuid": "a62b2f8b-18c4-4ce0-a920-81883789e70a"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "b766185a-667f-488a-ba64-00194e53907a"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "check_login_for_K8SM_b766185a_667f_488a_ba64_00194e53907a", "state": "ACTIVE", "attrs": {"type": "CHECK_LOGIN", "timeout": "60", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@"}, "timeout_secs": "0", "type": "CHECK_LOGIN", "variable_list": [], "uuid": "f8f872b8-f63a-4d16-b552-a10c9d950b31"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_b766185a_667f_488a_ba64_00194e53907a", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "70d48f87-55f8-4ed5-bac0-50b48e83cb1c"}, "message_list": [], "variable_list": [], "uuid": "684fbbe2-88ed-4031-aad1-635be044561e"}, "message_list": [], "name": "action_poweron"}, {"description": "System action for suspending an application", "type": "system", "uuid": "144f8385-c687-4949-bf8c-cb358dde1bb0", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "b766185a-667f-488a-ba64-00194e53907a"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DAG_Substrate_b766185a_667f_488a_ba64_00194e53907a", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "cfa426e1-8997-41bd-8ca7-38e6071b1b43"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_b766185a_667f_488a_ba64_00194e53907a", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "cfa426e1-8997-41bd-8ca7-38e6071b1b43"}, "message_list": [], "variable_list": [], "uuid": "9d51a7ca-46fc-4c19-ae14-11fb8215f535"}, "message_list": [], "name": "action_suspend"}, {"description": "System action for modifying an application", "type": "system", "uuid": "6aa5b64b-25f1-425f-9f0f-833804f3e781", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "b766185a-667f-488a-ba64-00194e53907a"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DAG_Substrate_b766185a_667f_488a_ba64_00194e53907a", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "75497c34-0505-4f76-8772-bc5ea3df2f35"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_b766185a_667f_488a_ba64_00194e53907a", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "75497c34-0505-4f76-8772-bc5ea3df2f35"}, "message_list": [], "variable_list": [], "uuid": "0407013d-e4bf-43d2-9be4-44e6fb4ce82d"}, "message_list": [], "name": "action_modify"}, {"description": "System action for powering off an application", "type": "system", "uuid": "ce9a7876-920a-496e-a1dd-089cae2e7ed6", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "b766185a-667f-488a-ba64-00194e53907a"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Operation_PowerOff_b766185a_667f_488a_ba64_00194e53907a", "uuid": "2fbcabbd-4bac-474b-9727-c25352d29777"}], "name": "SYS_GEN__DAG_Substrate_b766185a_667f_488a_ba64_00194e53907a", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "482a2c98-293d-4ea8-a07d-ccca7040bbba"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "b766185a-667f-488a-ba64-00194e53907a"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Operation_PowerOff_b766185a_667f_488a_ba64_00194e53907a", "state": "ACTIVE", "attrs": {"type": "GENERIC_OPERATION"}, "timeout_secs": "0", "type": "VMOPERATION_NUTANIX", "variable_list": [], "uuid": "2fbcabbd-4bac-474b-9727-c25352d29777"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_b766185a_667f_488a_ba64_00194e53907a", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "482a2c98-293d-4ea8-a07d-ccca7040bbba"}, "message_list": [], "variable_list": [], "uuid": "4633a79e-82bd-44a8-acca-2a7a06b5e66e"}, "message_list": [], "name": "action_poweroff"}, {"description": "System action for deleting an application. Deletes physical machines as well", "type": "system", "uuid": "880e35de-d41f-4172-8895-16a796387f5c", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "b766185a-667f-488a-ba64-00194e53907a"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Nutanix_Delete_b766185a_667f_488a_ba64_00194e53907a", "uuid": "7ceebc03-54ef-4850-8130-4211c12aac63"}], "name": "SYS_GEN__DAG_Substrate_b766185a_667f_488a_ba64_00194e53907a", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "07d0df36-55dd-4b14-9530-8c5392723730"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "b766185a-667f-488a-ba64-00194e53907a"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Nutanix_Delete_b766185a_667f_488a_ba64_00194e53907a", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "DELETE_NUTANIX", "variable_list": [], "uuid": "7ceebc03-54ef-4850-8130-4211c12aac63"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_b766185a_667f_488a_ba64_00194e53907a", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "07d0df36-55dd-4b14-9530-8c5392723730"}, "message_list": [], "variable_list": [], "uuid": "840bffcb-9d24-4f4b-881b-c440fd48b345"}, "message_list": [], "name": "action_delete"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "f4c5711d-d824-4860-8d90-4d852c0e155b", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "b766185a-667f-488a-ba64-00194e53907a"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Substrate_Element_Delete_b766185a_667f_488a_ba64_00194e53907a", "uuid": "513eb673-e535-408d-86bf-c00aadc54552"}], "name": "SYS_GEN__DAG_Substrate_b766185a_667f_488a_ba64_00194e53907a", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "7b609ae1-1996-4677-9223-fb9ccfecbf0e"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "b766185a-667f-488a-ba64-00194e53907a"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Substrate_Element_Delete_b766185a_667f_488a_ba64_00194e53907a", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "513eb673-e535-408d-86bf-c00aadc54552"}], "description": "", "name": "SYS_GEN__Runbook_Substrate_b766185a_667f_488a_ba64_00194e53907a", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "7b609ae1-1996-4677-9223-fb9ccfecbf0e"}, "message_list": [], "variable_list": [], "uuid": "6f0a0e37-864e-4128-b21f-0aa3bcdf2a77"}, "message_list": [], "name": "action_soft_delete"}], "type": "AHV_VM", "name": "K8SM", "state": "ACTIVE", "readiness_probe": {"connection_type": "SSH", "disable_readiness_probe": false, "timeout_secs": "60", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@", "connection_port": 22, "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "0771aa80-129f-40f8-a3ce-daddd5122bc4"}}, "editables": {"readiness_probe": {"connection_port": true, "timeout_secs": true}, "create_spec": {"name": true, "resources": {"nic_list": {"0": {"subnet_reference": true}}, "num_vcpus_per_socket": true, "num_sockets": true, "memory_size_mib": true, "guest_customization": true, "disk_list": {"1": {"disk_size_mib": true}, "3": {"disk_size_mib": true}, "2": {"disk_size_mib": true}}}}}, "os_type": "Linux", "message_list": [], "create_spec": {"name": "K8SM@@{calm_array_index}@@", "resources": {"nic_list": [{"nic_type": "NORMAL_NIC", "ip_endpoint_list": [], "network_function_chain_reference": null, "network_function_nic_type": "INGRESS", "mac_address": "", "subnet_reference": {"kind": "subnet", "type": "", "name": "", "uuid": "c313afa7-22ec-4571-b386-c747cfb68029"}, "type": ""}], "serial_port_list": [], "guest_tools": null, "num_vcpus_per_socket": 2, "num_sockets": 2, "gpu_list": [], "memory_size_mib": 2048, "parent_reference": null, "hardware_clock_timezone": "", "guest_customization": {"cloud_init": {"meta_data": "", "type": "", "user_data": "#cloud-config\nusers:\n  - name: centos\n    ssh-authorized-keys:\n      - @@{INSTANCE_PUBLIC_KEY}@@\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']"}, "type": "", "sysprep": null}, "power_state": "ON", "type": "", "boot_config": null, "disk_list": [{"data_source_reference": {"kind": "app_package", "type": "", "name": "CENTOS_IMAGE_MINION", "uuid": "43b2690d-ca2e-4580-813e-0ea73f68d970"}, "type": "", "disk_size_mib": 1, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 0, "adapter_type": "SCSI"}, "device_type": "DISK"}}, {"data_source_reference": null, "type": "", "disk_size_mib": 10240, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 1, "adapter_type": "SCSI"}, "device_type": "DISK"}}, {"data_source_reference": null, "type": "", "disk_size_mib": 10240, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 2, "adapter_type": "SCSI"}, "device_type": "DISK"}}, {"data_source_reference": null, "type": "", "disk_size_mib": 10240, "device_properties": {"type": "", "disk_address": {"type": "", "device_index": 3, "adapter_type": "SCSI"}, "device_type": "DISK"}}]}, "availability_zone_reference": null, "backup_policy": null, "type": "", "cluster_reference": null, "categories": ""}, "variable_list": [], "uuid": "b766185a-667f-488a-ba64-00194e53907a"}], "credential_definition_list": [{"username": "centos", "description": "", "secret": {"attrs": {"is_secret_modified": false, "secret_reference": {}}}, "name": "CENTOS", "state": "ACTIVE", "editables": {"username": true, "secret": true}, "type": "KEY", "uuid": "0771aa80-129f-40f8-a3ce-daddd5122bc4"}], "package_definition_list": [{"description": "", "action_list": [{"description": "System action for installing an application", "type": "system", "uuid": "c3bd5eae-565b-43f7-baec-186502a569f7", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "ea79eea5-26bf-4dda-a359-17ac9ebb57aa"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PE_Install_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "7100ccdd-292f-41e7-ab89-74eb0940b139"}], "name": "SYS_GEN__DAG_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "6ce21233-1f50-4bd3-bec0-917630a7ec61"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "ea79eea5-26bf-4dda-a359-17ac9ebb57aa"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PE_Install_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "state": "ACTIVE", "attrs": {"install_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "ea79eea5-26bf-4dda-a359-17ac9ebb57aa"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageInstallTask", "uuid": "bc25109d-423c-48d1-ac68-802bb7cc01ed"}], "name": "eaae934f_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "ac82a688-1922-4c0a-b862-b27a3d169363"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "ea79eea5-26bf-4dda-a359-17ac9ebb57aa"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageInstallTask", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\nINTERNAL_IP=@@{address}@@\nMASTER_API_HTTPS=6443\nKUBERNETES_VERSION=\"@@{KUBERNETES_VERSION}@@\" \nSERVICE_SUBNET=\"@@{SERVICE_SUBNET}@@\"\n\nsudo hostnamectl set-hostname --static kubernetes-controller\necho \"${INTERNAL_IP} kubernetes-controller\" | sudo tee -a /etc/hosts\nsudo easy_install netaddr\nFIRST_IP_SERVICE_SUBNET=$(python -c \"from netaddr import * ; print IPNetwork('${SERVICE_SUBNET}')[1]\")\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\n  echo \"${ip} kubernetes-minion${count}\" | sudo tee -a /etc/hosts\n  count=$((count+1))\ndone\n\nsudo yum update -y\n\n# -*- Pre-requisites\nsudo yum install -y wget \n\nwget https://pkg.cfssl.org/R1.2/cfssl_linux-amd64\nwget https://pkg.cfssl.org/R1.2/cfssljson_linux-amd64\nchmod +x cfssljson_linux-amd64 cfssl_linux-amd64\nsudo mv cfssljson_linux-amd64 /usr/local/bin/cfssljson\nsudo mv cfssl_linux-amd64 /usr/local/bin/cfssl\nwget -q \"https://github.com/coreos/etcd/releases/download/v3.2.6/etcd-v3.2.6-linux-amd64.tar.gz\"\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kube-apiserver\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kube-controller-manager\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kube-scheduler\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kubectl\nchmod +x kube-apiserver kube-controller-manager kube-scheduler kubectl\nsudo mv kubectl /usr/local/bin/\n\n# -*- Creating CA Certificates\n\necho '{\n  \"signing\": {\n    \"default\": {\n      \"expiry\": \"8760h\"\n    },\n    \"profiles\": {\n      \"kubernetes\": {\n        \"usages\": [\"signing\", \"key encipherment\", \"server auth\", \"client auth\"],\n        \"expiry\": \"8760h\"\n      }\n    }\n  }\n}' | tee ca-config.json\n\necho '{\n  \"CN\": \"Kubernetes\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"Kubernetes\",\n      \"OU\": \"CA\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee ca-csr.json\n\ncfssl gencert -initca ca-csr.json | cfssljson -bare ca\n\necho '{\n  \"CN\": \"admin\",\n  \"hosts\": [],\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"system:masters\",\n      \"OU\": \"Cluster\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee admin-csr.json\n\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes admin-csr.json | cfssljson -bare admin\n\n# -*- Generating minion certs.\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\ninstance=\"kubernetes-minion${count}\"\necho '{\n  \"CN\": \"system:node:${instance}\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"system:nodes\",\n      \"OU\": \"Kubernetes The Hard Way\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee ${instance}-csr.json\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -hostname=${instance},${ip} -profile=kubernetes ${instance}-csr.json | cfssljson -bare ${instance}\ncount=$((count+1))\ndone \n\n# -*- Creating kube-proxy certificates\n\necho '{\n  \"CN\": \"system:kube-proxy\",\n  \"hosts\": [],\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"system:node-proxier\",\n      \"OU\": \"Cluster\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee kube-proxy-csr.json\n\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes kube-proxy-csr.json | cfssljson -bare kube-proxy\n\necho '{\n  \"CN\": \"kubernetes\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"Kubernetes\",\n      \"OU\": \"Cluster\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee kubernetes-csr.json\n\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -hostname=@@{K8SC.address}@@,${FIRST_IP_SERVICE_SUBNET},127.0.0.1,kubernetes.default -profile=kubernetes kubernetes-csr.json | cfssljson -bare kubernetes\n\n# -*- Setting up Authentication & authenticate using RBAC (Role-Based Access Control).\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\nkubectl config set-cluster kubernetes-prod-cluster --certificate-authority=ca.pem --embed-certs=true --server=https://${INTERNAL_IP}:${MASTER_API_HTTPS} --kubeconfig=kubernetes-minion${count}.kubeconfig\nkubectl config set-credentials system:node:kubernetes-minion${count} --client-certificate=kubernetes-minion${count}.pem --client-key=kubernetes-minion${count}-key.pem --embed-certs=true --kubeconfig=kubernetes-minion${count}.kubeconfig\nkubectl config set-context default --cluster=kubernetes-prod-cluster --user=system:node:kubernetes-minion${count} --kubeconfig=kubernetes-minion${count}.kubeconfig\nkubectl config use-context default --kubeconfig=kubernetes-minion${count}.kubeconfig\ncount=$((count+1))\ndone\nkubectl config set-cluster kubernetes-prod-cluster --certificate-authority=ca.pem --embed-certs=true --server=https://${INTERNAL_IP}:${MASTER_API_HTTPS} --kubeconfig=kube-proxy.kubeconfig\nkubectl config set-credentials kube-proxy --client-certificate=kube-proxy.pem --client-key=kube-proxy-key.pem --embed-certs=true --kubeconfig=kube-proxy.kubeconfig\nkubectl config set-context default --cluster=kubernetes-prod-cluster --user=kube-proxy --kubeconfig=kube-proxy.kubeconfig\n\nkubectl config use-context default --kubeconfig=kube-proxy.kubeconfig", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "0771aa80-129f-40f8-a3ce-daddd5122bc4"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "bc25109d-423c-48d1-ac68-802bb7cc01ed"}], "description": "", "name": "250a0dd1_runbook", "state": "NOT_VALIDATED", "main_task_local_reference": {"kind": "app_task", "name": "eaae934f_dag", "uuid": "ac82a688-1922-4c0a-b862-b27a3d169363"}, "message_list": [], "variable_list": [], "uuid": "bdaa5d74-ff31-46ba-87a5-67150da2889b"}, "type": "", "uninstall_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "ea79eea5-26bf-4dda-a359-17ac9ebb57aa"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageUninstallTask", "uuid": "56399b11-be2d-4351-b92d-c26b49eb2ecb"}], "name": "cfa35d5b_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "64aff83e-0f68-4abf-a027-002d4d021905"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "ea79eea5-26bf-4dda-a359-17ac9ebb57aa"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageUninstallTask", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "0771aa80-129f-40f8-a3ce-daddd5122bc4"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "56399b11-be2d-4351-b92d-c26b49eb2ecb"}], "description": "", "name": "6f5a2b1c_runbook", "state": "NOT_VALIDATED", "main_task_local_reference": {"kind": "app_task", "name": "cfa35d5b_dag", "uuid": "64aff83e-0f68-4abf-a027-002d4d021905"}, "message_list": [], "variable_list": [], "uuid": "0cee906e-3d95-4b5a-9a61-5af8b6daff98"}}, "timeout_secs": "0", "type": "CUSTOM_PACKAGE_INSTALL", "variable_list": [], "uuid": "7100ccdd-292f-41e7-ab89-74eb0940b139"}], "description": "", "name": "SYS_GEN__Runbook_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "6ce21233-1f50-4bd3-bec0-917630a7ec61"}, "message_list": [], "variable_list": [], "uuid": "ed91111c-1d3f-4da5-a623-0f970e7dbdb3"}, "message_list": [], "name": "action_install"}, {"description": "System action for creating an application", "type": "system", "uuid": "f9060434-cd28-42f4-b3a6-53b7933403db", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "ea79eea5-26bf-4dda-a359-17ac9ebb57aa"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "a981177a-88f5-4d1f-aafc-da08f0fb6dba"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "12ff5eb1-0bf2-4229-b5c5-90ad9d27bc78"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "5d79eaed-e01a-43d9-8d38-4a309bd021f7"}], "name": "SYS_GEN__Composite_DAG_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "12ff5eb1-0bf2-4229-b5c5-90ad9d27bc78"}, "edge_type": "inherent", "type": "", "uuid": "4b4dc4c6-de02-4c68-aa80-846678095a03", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "5d79eaed-e01a-43d9-8d38-4a309bd021f7"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "a981177a-88f5-4d1f-aafc-da08f0fb6dba"}, "edge_type": "inherent", "type": "", "uuid": "9c12986c-0e4c-49ee-a355-13dc557bf3c9", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "12ff5eb1-0bf2-4229-b5c5-90ad9d27bc78"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "48b0f876-06dc-497a-bf2e-45bbf10d52ba"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "ea79eea5-26bf-4dda-a359-17ac9ebb57aa"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "ed91111c-1d3f-4da5-a623-0f970e7dbdb3"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "a981177a-88f5-4d1f-aafc-da08f0fb6dba"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "65a78bcf-970b-472c-b501-866e109c8a56"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "80edfe72_runbook", "uuid": "181b2cc8-b196-482e-8988-0e6dce472c23"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "12ff5eb1-0bf2-4229-b5c5-90ad9d27bc78"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "65a78bcf-970b-472c-b501-866e109c8a56"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "ec49e982_runbook", "uuid": "d947e531-a020-4b99-9b4b-6f3fc665c5ae"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "5d79eaed-e01a-43d9-8d38-4a309bd021f7"}], "description": "", "name": "SYS_GEN__Runbook_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "48b0f876-06dc-497a-bf2e-45bbf10d52ba"}, "message_list": [], "variable_list": [], "uuid": "3cecc9cc-d845-40fa-8984-9e3260a98278"}, "message_list": [], "name": "action_create"}, {"description": "System action for uninstalling an application", "type": "system", "uuid": "7d7b62d3-24e9-4fef-ad5e-29d6d1541b15", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "ea79eea5-26bf-4dda-a359-17ac9ebb57aa"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PE_Uninstall_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "034e0d28-83fe-4129-a6a1-6208a7b0b101"}], "name": "SYS_GEN__DAG_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "be32a085-58ef-4c8b-8b16-3b50caae3fe7"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "ea79eea5-26bf-4dda-a359-17ac9ebb57aa"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PE_Uninstall_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "state": "ACTIVE", "attrs": {"install_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "ea79eea5-26bf-4dda-a359-17ac9ebb57aa"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageInstallTask", "uuid": "bc25109d-423c-48d1-ac68-802bb7cc01ed"}], "name": "eaae934f_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "ac82a688-1922-4c0a-b862-b27a3d169363"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "ea79eea5-26bf-4dda-a359-17ac9ebb57aa"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageInstallTask", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\nINTERNAL_IP=@@{address}@@\nMASTER_API_HTTPS=6443\nKUBERNETES_VERSION=\"@@{KUBERNETES_VERSION}@@\" \nSERVICE_SUBNET=\"@@{SERVICE_SUBNET}@@\"\n\nsudo hostnamectl set-hostname --static kubernetes-controller\necho \"${INTERNAL_IP} kubernetes-controller\" | sudo tee -a /etc/hosts\nsudo easy_install netaddr\nFIRST_IP_SERVICE_SUBNET=$(python -c \"from netaddr import * ; print IPNetwork('${SERVICE_SUBNET}')[1]\")\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\n  echo \"${ip} kubernetes-minion${count}\" | sudo tee -a /etc/hosts\n  count=$((count+1))\ndone\n\nsudo yum update -y\n\n# -*- Pre-requisites\nsudo yum install -y wget \n\nwget https://pkg.cfssl.org/R1.2/cfssl_linux-amd64\nwget https://pkg.cfssl.org/R1.2/cfssljson_linux-amd64\nchmod +x cfssljson_linux-amd64 cfssl_linux-amd64\nsudo mv cfssljson_linux-amd64 /usr/local/bin/cfssljson\nsudo mv cfssl_linux-amd64 /usr/local/bin/cfssl\nwget -q \"https://github.com/coreos/etcd/releases/download/v3.2.6/etcd-v3.2.6-linux-amd64.tar.gz\"\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kube-apiserver\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kube-controller-manager\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kube-scheduler\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kubectl\nchmod +x kube-apiserver kube-controller-manager kube-scheduler kubectl\nsudo mv kubectl /usr/local/bin/\n\n# -*- Creating CA Certificates\n\necho '{\n  \"signing\": {\n    \"default\": {\n      \"expiry\": \"8760h\"\n    },\n    \"profiles\": {\n      \"kubernetes\": {\n        \"usages\": [\"signing\", \"key encipherment\", \"server auth\", \"client auth\"],\n        \"expiry\": \"8760h\"\n      }\n    }\n  }\n}' | tee ca-config.json\n\necho '{\n  \"CN\": \"Kubernetes\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"Kubernetes\",\n      \"OU\": \"CA\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee ca-csr.json\n\ncfssl gencert -initca ca-csr.json | cfssljson -bare ca\n\necho '{\n  \"CN\": \"admin\",\n  \"hosts\": [],\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"system:masters\",\n      \"OU\": \"Cluster\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee admin-csr.json\n\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes admin-csr.json | cfssljson -bare admin\n\n# -*- Generating minion certs.\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\ninstance=\"kubernetes-minion${count}\"\necho '{\n  \"CN\": \"system:node:${instance}\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"system:nodes\",\n      \"OU\": \"Kubernetes The Hard Way\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee ${instance}-csr.json\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -hostname=${instance},${ip} -profile=kubernetes ${instance}-csr.json | cfssljson -bare ${instance}\ncount=$((count+1))\ndone \n\n# -*- Creating kube-proxy certificates\n\necho '{\n  \"CN\": \"system:kube-proxy\",\n  \"hosts\": [],\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"system:node-proxier\",\n      \"OU\": \"Cluster\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee kube-proxy-csr.json\n\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes kube-proxy-csr.json | cfssljson -bare kube-proxy\n\necho '{\n  \"CN\": \"kubernetes\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"Kubernetes\",\n      \"OU\": \"Cluster\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee kubernetes-csr.json\n\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -hostname=@@{K8SC.address}@@,${FIRST_IP_SERVICE_SUBNET},127.0.0.1,kubernetes.default -profile=kubernetes kubernetes-csr.json | cfssljson -bare kubernetes\n\n# -*- Setting up Authentication & authenticate using RBAC (Role-Based Access Control).\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\nkubectl config set-cluster kubernetes-prod-cluster --certificate-authority=ca.pem --embed-certs=true --server=https://${INTERNAL_IP}:${MASTER_API_HTTPS} --kubeconfig=kubernetes-minion${count}.kubeconfig\nkubectl config set-credentials system:node:kubernetes-minion${count} --client-certificate=kubernetes-minion${count}.pem --client-key=kubernetes-minion${count}-key.pem --embed-certs=true --kubeconfig=kubernetes-minion${count}.kubeconfig\nkubectl config set-context default --cluster=kubernetes-prod-cluster --user=system:node:kubernetes-minion${count} --kubeconfig=kubernetes-minion${count}.kubeconfig\nkubectl config use-context default --kubeconfig=kubernetes-minion${count}.kubeconfig\ncount=$((count+1))\ndone\nkubectl config set-cluster kubernetes-prod-cluster --certificate-authority=ca.pem --embed-certs=true --server=https://${INTERNAL_IP}:${MASTER_API_HTTPS} --kubeconfig=kube-proxy.kubeconfig\nkubectl config set-credentials kube-proxy --client-certificate=kube-proxy.pem --client-key=kube-proxy-key.pem --embed-certs=true --kubeconfig=kube-proxy.kubeconfig\nkubectl config set-context default --cluster=kubernetes-prod-cluster --user=kube-proxy --kubeconfig=kube-proxy.kubeconfig\n\nkubectl config use-context default --kubeconfig=kube-proxy.kubeconfig", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "0771aa80-129f-40f8-a3ce-daddd5122bc4"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "bc25109d-423c-48d1-ac68-802bb7cc01ed"}], "description": "", "name": "250a0dd1_runbook", "state": "NOT_VALIDATED", "main_task_local_reference": {"kind": "app_task", "name": "eaae934f_dag", "uuid": "ac82a688-1922-4c0a-b862-b27a3d169363"}, "message_list": [], "variable_list": [], "uuid": "bdaa5d74-ff31-46ba-87a5-67150da2889b"}, "type": "", "uninstall_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "ea79eea5-26bf-4dda-a359-17ac9ebb57aa"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageUninstallTask", "uuid": "56399b11-be2d-4351-b92d-c26b49eb2ecb"}], "name": "cfa35d5b_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "64aff83e-0f68-4abf-a027-002d4d021905"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "ea79eea5-26bf-4dda-a359-17ac9ebb57aa"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageUninstallTask", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "0771aa80-129f-40f8-a3ce-daddd5122bc4"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "56399b11-be2d-4351-b92d-c26b49eb2ecb"}], "description": "", "name": "6f5a2b1c_runbook", "state": "NOT_VALIDATED", "main_task_local_reference": {"kind": "app_task", "name": "cfa35d5b_dag", "uuid": "64aff83e-0f68-4abf-a027-002d4d021905"}, "message_list": [], "variable_list": [], "uuid": "0cee906e-3d95-4b5a-9a61-5af8b6daff98"}}, "timeout_secs": "0", "type": "CUSTOM_PACKAGE_UNINSTALL", "variable_list": [], "uuid": "034e0d28-83fe-4129-a6a1-6208a7b0b101"}], "description": "", "name": "SYS_GEN__Runbook_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "be32a085-58ef-4c8b-8b16-3b50caae3fe7"}, "message_list": [], "variable_list": [], "uuid": "ba457547-e01a-44b0-9160-34251eb044d3"}, "message_list": [], "name": "action_uninstall"}, {"description": "System action for deleting an application. Deletes physical machines as well", "type": "system", "uuid": "87371e9e-63f0-429e-9d66-bc1c17716c8b", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "ea79eea5-26bf-4dda-a359-17ac9ebb57aa"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "60193afa-c3fd-4734-82ba-b9aa80b772a1"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "9e1f290a-7217-4a6a-8602-67057deee0b9"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "d82eb3d2-022c-493d-a7f5-fb5b87cc54b1"}], "name": "SYS_GEN__Composite_DAG_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "60193afa-c3fd-4734-82ba-b9aa80b772a1"}, "edge_type": "inherent", "type": "", "uuid": "4786bc3d-9f2b-40f7-9c99-8cab15e2552e", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "9e1f290a-7217-4a6a-8602-67057deee0b9"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "9e1f290a-7217-4a6a-8602-67057deee0b9"}, "edge_type": "inherent", "type": "", "uuid": "a38e49cb-304b-40a2-9019-8fa3cb40d3a9", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "d82eb3d2-022c-493d-a7f5-fb5b87cc54b1"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "60451aaa-9601-466d-a7cd-ce1002e7be82"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "65a78bcf-970b-472c-b501-866e109c8a56"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "e34ef8d6_runbook", "uuid": "0a7823be-b563-467d-b056-78527970edc9"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "60193afa-c3fd-4734-82ba-b9aa80b772a1"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "65a78bcf-970b-472c-b501-866e109c8a56"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "c9c07e72_runbook", "uuid": "70fffd70-6ca8-4bdc-bb8e-29b8b064262a"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "9e1f290a-7217-4a6a-8602-67057deee0b9"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "ea79eea5-26bf-4dda-a359-17ac9ebb57aa"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "ba457547-e01a-44b0-9160-34251eb044d3"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "d82eb3d2-022c-493d-a7f5-fb5b87cc54b1"}], "description": "", "name": "SYS_GEN__Runbook_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "60451aaa-9601-466d-a7cd-ce1002e7be82"}, "message_list": [], "variable_list": [], "uuid": "9939ac55-9405-4fca-b925-562bc174ac48"}, "message_list": [], "name": "action_delete"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "65fc64d3-0978-4f76-a9c0-2341ab9d9183", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "ea79eea5-26bf-4dda-a359-17ac9ebb57aa"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "b999262c-5f98-4d99-9448-f73d8fc30b92"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "5605fbd5-5141-4f7c-acb7-949ba9f60d40"}], "name": "SYS_GEN__Composite_DAG_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "b999262c-5f98-4d99-9448-f73d8fc30b92"}, "edge_type": "inherent", "type": "", "uuid": "25a32873-811c-4772-ba2f-15288148695d", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "5605fbd5-5141-4f7c-acb7-949ba9f60d40"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "379865df-d8a4-4c1d-baaa-1df58e3cedb5"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "65a78bcf-970b-472c-b501-866e109c8a56"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "3c8f0554_runbook", "uuid": "c51a449f-4fda-4864-aafb-3d3803f64ee6"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "b999262c-5f98-4d99-9448-f73d8fc30b92"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "ea79eea5-26bf-4dda-a359-17ac9ebb57aa"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "5605fbd5-5141-4f7c-acb7-949ba9f60d40"}], "description": "", "name": "SYS_GEN__Runbook_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "379865df-d8a4-4c1d-baaa-1df58e3cedb5"}, "message_list": [], "variable_list": [], "uuid": "9a5edd62-7271-44e0-ad3d-6b2b3a36f429"}, "message_list": [], "name": "action_soft_delete"}, {"description": "System action for starting an application", "type": "system", "uuid": "ac98ddfe-0f09-4fbb-9356-748520789507", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "ea79eea5-26bf-4dda-a359-17ac9ebb57aa"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "c7e12daf-b409-48d9-b8dd-0beeacaf3f35"}], "name": "SYS_GEN__Composite_DAG_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "1ba25a18-b0d7-473d-8c79-fa9cbb431267"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "65a78bcf-970b-472c-b501-866e109c8a56"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "ec49e982_runbook", "uuid": "d947e531-a020-4b99-9b4b-6f3fc665c5ae"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "c7e12daf-b409-48d9-b8dd-0beeacaf3f35"}], "description": "", "name": "SYS_GEN__Runbook_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "1ba25a18-b0d7-473d-8c79-fa9cbb431267"}, "message_list": [], "variable_list": [], "uuid": "601c3acd-9147-4235-b468-4a58059bc5c8"}, "message_list": [], "name": "action_start"}, {"description": "System action for stopping an application", "type": "system", "uuid": "2535bd37-b7d4-4d5e-afa4-a7701fce5623", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "ea79eea5-26bf-4dda-a359-17ac9ebb57aa"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "3b7f1174-8fd1-4aea-a7c8-4cf41d833bf7"}], "name": "SYS_GEN__Composite_DAG_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "5e550083-98f9-4d16-93df-dd08d73ed255"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "65a78bcf-970b-472c-b501-866e109c8a56"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "e34ef8d6_runbook", "uuid": "0a7823be-b563-467d-b056-78527970edc9"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "3b7f1174-8fd1-4aea-a7c8-4cf41d833bf7"}], "description": "", "name": "SYS_GEN__Runbook_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "5e550083-98f9-4d16-93df-dd08d73ed255"}, "message_list": [], "variable_list": [], "uuid": "087b7730-0346-4b44-9a7f-e348b5964e01"}, "message_list": [], "name": "action_stop"}], "type": "DEB", "service_local_reference_list": [{"kind": "app_service", "name": "Kubernetes_Master", "uuid": "65a78bcf-970b-472c-b501-866e109c8a56"}], "name": "K8SCP", "state": "ACTIVE", "version": "", "editables": {}, "message_list": [], "options": {"install_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "ea79eea5-26bf-4dda-a359-17ac9ebb57aa"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageInstallTask", "uuid": "bc25109d-423c-48d1-ac68-802bb7cc01ed"}], "name": "eaae934f_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "ac82a688-1922-4c0a-b862-b27a3d169363"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "ea79eea5-26bf-4dda-a359-17ac9ebb57aa"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageInstallTask", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\nINTERNAL_IP=@@{address}@@\nMASTER_API_HTTPS=6443\nKUBERNETES_VERSION=\"@@{KUBERNETES_VERSION}@@\" \nSERVICE_SUBNET=\"@@{SERVICE_SUBNET}@@\"\n\nsudo hostnamectl set-hostname --static kubernetes-controller\necho \"${INTERNAL_IP} kubernetes-controller\" | sudo tee -a /etc/hosts\nsudo easy_install netaddr\nFIRST_IP_SERVICE_SUBNET=$(python -c \"from netaddr import * ; print IPNetwork('${SERVICE_SUBNET}')[1]\")\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\n  echo \"${ip} kubernetes-minion${count}\" | sudo tee -a /etc/hosts\n  count=$((count+1))\ndone\n\nsudo yum update -y\n\n# -*- Pre-requisites\nsudo yum install -y wget \n\nwget https://pkg.cfssl.org/R1.2/cfssl_linux-amd64\nwget https://pkg.cfssl.org/R1.2/cfssljson_linux-amd64\nchmod +x cfssljson_linux-amd64 cfssl_linux-amd64\nsudo mv cfssljson_linux-amd64 /usr/local/bin/cfssljson\nsudo mv cfssl_linux-amd64 /usr/local/bin/cfssl\nwget -q \"https://github.com/coreos/etcd/releases/download/v3.2.6/etcd-v3.2.6-linux-amd64.tar.gz\"\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kube-apiserver\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kube-controller-manager\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kube-scheduler\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kubectl\nchmod +x kube-apiserver kube-controller-manager kube-scheduler kubectl\nsudo mv kubectl /usr/local/bin/\n\n# -*- Creating CA Certificates\n\necho '{\n  \"signing\": {\n    \"default\": {\n      \"expiry\": \"8760h\"\n    },\n    \"profiles\": {\n      \"kubernetes\": {\n        \"usages\": [\"signing\", \"key encipherment\", \"server auth\", \"client auth\"],\n        \"expiry\": \"8760h\"\n      }\n    }\n  }\n}' | tee ca-config.json\n\necho '{\n  \"CN\": \"Kubernetes\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"Kubernetes\",\n      \"OU\": \"CA\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee ca-csr.json\n\ncfssl gencert -initca ca-csr.json | cfssljson -bare ca\n\necho '{\n  \"CN\": \"admin\",\n  \"hosts\": [],\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"system:masters\",\n      \"OU\": \"Cluster\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee admin-csr.json\n\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes admin-csr.json | cfssljson -bare admin\n\n# -*- Generating minion certs.\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\ninstance=\"kubernetes-minion${count}\"\necho '{\n  \"CN\": \"system:node:${instance}\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"system:nodes\",\n      \"OU\": \"Kubernetes The Hard Way\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee ${instance}-csr.json\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -hostname=${instance},${ip} -profile=kubernetes ${instance}-csr.json | cfssljson -bare ${instance}\ncount=$((count+1))\ndone \n\n# -*- Creating kube-proxy certificates\n\necho '{\n  \"CN\": \"system:kube-proxy\",\n  \"hosts\": [],\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"system:node-proxier\",\n      \"OU\": \"Cluster\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee kube-proxy-csr.json\n\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes kube-proxy-csr.json | cfssljson -bare kube-proxy\n\necho '{\n  \"CN\": \"kubernetes\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"Kubernetes\",\n      \"OU\": \"Cluster\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee kubernetes-csr.json\n\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -hostname=@@{K8SC.address}@@,${FIRST_IP_SERVICE_SUBNET},127.0.0.1,kubernetes.default -profile=kubernetes kubernetes-csr.json | cfssljson -bare kubernetes\n\n# -*- Setting up Authentication & authenticate using RBAC (Role-Based Access Control).\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\nkubectl config set-cluster kubernetes-prod-cluster --certificate-authority=ca.pem --embed-certs=true --server=https://${INTERNAL_IP}:${MASTER_API_HTTPS} --kubeconfig=kubernetes-minion${count}.kubeconfig\nkubectl config set-credentials system:node:kubernetes-minion${count} --client-certificate=kubernetes-minion${count}.pem --client-key=kubernetes-minion${count}-key.pem --embed-certs=true --kubeconfig=kubernetes-minion${count}.kubeconfig\nkubectl config set-context default --cluster=kubernetes-prod-cluster --user=system:node:kubernetes-minion${count} --kubeconfig=kubernetes-minion${count}.kubeconfig\nkubectl config use-context default --kubeconfig=kubernetes-minion${count}.kubeconfig\ncount=$((count+1))\ndone\nkubectl config set-cluster kubernetes-prod-cluster --certificate-authority=ca.pem --embed-certs=true --server=https://${INTERNAL_IP}:${MASTER_API_HTTPS} --kubeconfig=kube-proxy.kubeconfig\nkubectl config set-credentials kube-proxy --client-certificate=kube-proxy.pem --client-key=kube-proxy-key.pem --embed-certs=true --kubeconfig=kube-proxy.kubeconfig\nkubectl config set-context default --cluster=kubernetes-prod-cluster --user=kube-proxy --kubeconfig=kube-proxy.kubeconfig\n\nkubectl config use-context default --kubeconfig=kube-proxy.kubeconfig", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "0771aa80-129f-40f8-a3ce-daddd5122bc4"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "bc25109d-423c-48d1-ac68-802bb7cc01ed"}], "description": "", "name": "250a0dd1_runbook", "state": "NOT_VALIDATED", "main_task_local_reference": {"kind": "app_task", "name": "eaae934f_dag", "uuid": "ac82a688-1922-4c0a-b862-b27a3d169363"}, "message_list": [], "variable_list": [], "uuid": "bdaa5d74-ff31-46ba-87a5-67150da2889b"}, "type": "", "uninstall_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "ea79eea5-26bf-4dda-a359-17ac9ebb57aa"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageUninstallTask", "uuid": "56399b11-be2d-4351-b92d-c26b49eb2ecb"}], "name": "cfa35d5b_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "64aff83e-0f68-4abf-a027-002d4d021905"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "ea79eea5-26bf-4dda-a359-17ac9ebb57aa"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageUninstallTask", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "0771aa80-129f-40f8-a3ce-daddd5122bc4"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "56399b11-be2d-4351-b92d-c26b49eb2ecb"}], "description": "", "name": "6f5a2b1c_runbook", "state": "NOT_VALIDATED", "main_task_local_reference": {"kind": "app_task", "name": "cfa35d5b_dag", "uuid": "64aff83e-0f68-4abf-a027-002d4d021905"}, "message_list": [], "variable_list": [], "uuid": "0cee906e-3d95-4b5a-9a61-5af8b6daff98"}}, "variable_list": [], "uuid": "ea79eea5-26bf-4dda-a359-17ac9ebb57aa"}, {"description": "", "action_list": [{"description": "System action for installing an application", "type": "system", "uuid": "04ae199c-f210-4943-8125-e3ecfc610869", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "d1998de7-8c52-486f-bfe7-f6404622e84d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PE_Install_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "e25b6b64-c6d9-4d93-9e33-199142c0786c"}], "name": "SYS_GEN__DAG_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "ad547263-1c08-4b22-8139-46dc2df2b2f2"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "d1998de7-8c52-486f-bfe7-f6404622e84d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PE_Install_d1998de7_8c52_486f_bfe7_f6404622e84d", "state": "ACTIVE", "attrs": {"install_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "d1998de7-8c52-486f-bfe7-f6404622e84d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageInstallTask", "uuid": "351e11f4-01ee-4f5f-b55d-3b254142899b"}], "name": "f9943e3a_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "ea493e59-b4d8-4104-b65b-397c9907d5e2"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "d1998de7-8c52-486f-bfe7-f6404622e84d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageInstallTask", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\nsudo hostnamectl set-hostname --static kubernetes-minion@@{calm_array_index}@@\necho \"@@{K8SC.address}@@ kubernetes-controller\" | sudo tee -a /etc/hosts\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\n\techo \"${ip} kubernetes-minion${count}\" | sudo tee -a /etc/hosts\n\tcount=$((count+1))\ndone\n\nsudo yum update -y\n\n# -*- Pre-requisites\nsudo yum install -y wget sshpass iscsi-initiator-utils socat\n\nwget https://get.docker.com/builds/Linux/x86_64/docker-1.12.6.tgz\nwget https://github.com/containernetworking/plugins/releases/download/v0.6.0/cni-plugins-amd64-v0.6.0.tgz\nwget https://storage.googleapis.com/kubernetes-release/release/@@{KUBERNETES_VERSION}@@/bin/linux/amd64/kubectl\nwget https://storage.googleapis.com/kubernetes-release/release/@@{KUBERNETES_VERSION}@@/bin/linux/amd64/kube-proxy\nwget https://storage.googleapis.com/kubernetes-release/release/@@{KUBERNETES_VERSION}@@/bin/linux/amd64/kubelet\nchmod +x kubectl kube-proxy kubelet\n\nsudo mkdir -p /var/lib/docker\nsudo yum install -y lvm2\nsudo pvcreate /dev/sd{b,c,d}\nsudo vgcreate docker /dev/sd{b,c,d}\nsleep 3\nsudo lvcreate -l 100%VG -n docker_lvm docker\nsudo mkfs.xfs /dev/docker/docker_lvm\n\necho -e \"/dev/docker/docker_lvm \\t /var/lib/docker \\t xfs \\t defaults \\t 0 0\" | sudo tee /etc/fstab\nsudo mount -a", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "0771aa80-129f-40f8-a3ce-daddd5122bc4"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "351e11f4-01ee-4f5f-b55d-3b254142899b"}], "description": "", "name": "e6dd38ad_runbook", "state": "NOT_VALIDATED", "main_task_local_reference": {"kind": "app_task", "name": "f9943e3a_dag", "uuid": "ea493e59-b4d8-4104-b65b-397c9907d5e2"}, "message_list": [], "variable_list": [], "uuid": "b3c17ea8-0723-4319-9c22-29bf0822d3fa"}, "type": "", "uninstall_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "d1998de7-8c52-486f-bfe7-f6404622e84d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageUninstallTask", "uuid": "87680374-5d15-4408-831a-1fe805cd3021"}], "name": "f5f5341c_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "060e5dd9-8343-4e8e-890b-568cd0d24fd2"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "d1998de7-8c52-486f-bfe7-f6404622e84d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageUninstallTask", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "0771aa80-129f-40f8-a3ce-daddd5122bc4"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "87680374-5d15-4408-831a-1fe805cd3021"}], "description": "", "name": "7f8d209b_runbook", "state": "NOT_VALIDATED", "main_task_local_reference": {"kind": "app_task", "name": "f5f5341c_dag", "uuid": "060e5dd9-8343-4e8e-890b-568cd0d24fd2"}, "message_list": [], "variable_list": [], "uuid": "d53c9650-e1ad-428c-8653-02f86203d3d9"}}, "timeout_secs": "0", "type": "CUSTOM_PACKAGE_INSTALL", "variable_list": [], "uuid": "e25b6b64-c6d9-4d93-9e33-199142c0786c"}], "description": "", "name": "SYS_GEN__Runbook_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "ad547263-1c08-4b22-8139-46dc2df2b2f2"}, "message_list": [], "variable_list": [], "uuid": "5d57158a-3326-4949-99f7-d7e97903e380"}, "message_list": [], "name": "action_install"}, {"description": "System action for creating an application", "type": "system", "uuid": "0c6b3547-e1dc-45aa-bff3-a2e35760da13", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "d1998de7-8c52-486f-bfe7-f6404622e84d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "ecbb7667-6e08-4efa-bd08-474533422dcd"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "d8ce659a-75ea-491e-94e2-1d237ab385cb"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "413ceb31-4aff-43cd-8e80-c2d6112b5bc3"}], "name": "SYS_GEN__Composite_DAG_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "d8ce659a-75ea-491e-94e2-1d237ab385cb"}, "edge_type": "inherent", "type": "", "uuid": "7263f12f-9780-4daf-82ca-38afa0e7dffe", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "413ceb31-4aff-43cd-8e80-c2d6112b5bc3"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "ecbb7667-6e08-4efa-bd08-474533422dcd"}, "edge_type": "inherent", "type": "", "uuid": "06be24f8-5882-4b9f-aea8-79037b4e8231", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "d8ce659a-75ea-491e-94e2-1d237ab385cb"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "9aea39fe-ec83-4a7c-b60d-4b729c18f608"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "d1998de7-8c52-486f-bfe7-f6404622e84d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "5d57158a-3326-4949-99f7-d7e97903e380"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "ecbb7667-6e08-4efa-bd08-474533422dcd"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "d4254ddc-5560-4e40-927a-7b25ce88f366"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "658fecfa_runbook", "uuid": "321b7eca-6bed-4f30-9432-8dca6b84d02b"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "d8ce659a-75ea-491e-94e2-1d237ab385cb"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "d4254ddc-5560-4e40-927a-7b25ce88f366"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "6583643e_runbook", "uuid": "1395ad61-6541-456c-ab17-ee020c863928"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "413ceb31-4aff-43cd-8e80-c2d6112b5bc3"}], "description": "", "name": "SYS_GEN__Runbook_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "9aea39fe-ec83-4a7c-b60d-4b729c18f608"}, "message_list": [], "variable_list": [], "uuid": "563a6305-01ae-4cd2-80a7-68e9ad216a36"}, "message_list": [], "name": "action_create"}, {"description": "System action for uninstalling an application", "type": "system", "uuid": "a54e1f2d-c923-486a-9383-4e131562c023", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "d1998de7-8c52-486f-bfe7-f6404622e84d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PE_Uninstall_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "dba40531-73d9-4847-8671-5285e8ab8ab4"}], "name": "SYS_GEN__DAG_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "2239b624-ac9d-47e9-a496-2b772e0a246c"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "d1998de7-8c52-486f-bfe7-f6404622e84d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PE_Uninstall_d1998de7_8c52_486f_bfe7_f6404622e84d", "state": "ACTIVE", "attrs": {"install_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "d1998de7-8c52-486f-bfe7-f6404622e84d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageInstallTask", "uuid": "351e11f4-01ee-4f5f-b55d-3b254142899b"}], "name": "f9943e3a_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "ea493e59-b4d8-4104-b65b-397c9907d5e2"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "d1998de7-8c52-486f-bfe7-f6404622e84d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageInstallTask", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\nsudo hostnamectl set-hostname --static kubernetes-minion@@{calm_array_index}@@\necho \"@@{K8SC.address}@@ kubernetes-controller\" | sudo tee -a /etc/hosts\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\n\techo \"${ip} kubernetes-minion${count}\" | sudo tee -a /etc/hosts\n\tcount=$((count+1))\ndone\n\nsudo yum update -y\n\n# -*- Pre-requisites\nsudo yum install -y wget sshpass iscsi-initiator-utils socat\n\nwget https://get.docker.com/builds/Linux/x86_64/docker-1.12.6.tgz\nwget https://github.com/containernetworking/plugins/releases/download/v0.6.0/cni-plugins-amd64-v0.6.0.tgz\nwget https://storage.googleapis.com/kubernetes-release/release/@@{KUBERNETES_VERSION}@@/bin/linux/amd64/kubectl\nwget https://storage.googleapis.com/kubernetes-release/release/@@{KUBERNETES_VERSION}@@/bin/linux/amd64/kube-proxy\nwget https://storage.googleapis.com/kubernetes-release/release/@@{KUBERNETES_VERSION}@@/bin/linux/amd64/kubelet\nchmod +x kubectl kube-proxy kubelet\n\nsudo mkdir -p /var/lib/docker\nsudo yum install -y lvm2\nsudo pvcreate /dev/sd{b,c,d}\nsudo vgcreate docker /dev/sd{b,c,d}\nsleep 3\nsudo lvcreate -l 100%VG -n docker_lvm docker\nsudo mkfs.xfs /dev/docker/docker_lvm\n\necho -e \"/dev/docker/docker_lvm \\t /var/lib/docker \\t xfs \\t defaults \\t 0 0\" | sudo tee /etc/fstab\nsudo mount -a", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "0771aa80-129f-40f8-a3ce-daddd5122bc4"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "351e11f4-01ee-4f5f-b55d-3b254142899b"}], "description": "", "name": "e6dd38ad_runbook", "state": "NOT_VALIDATED", "main_task_local_reference": {"kind": "app_task", "name": "f9943e3a_dag", "uuid": "ea493e59-b4d8-4104-b65b-397c9907d5e2"}, "message_list": [], "variable_list": [], "uuid": "b3c17ea8-0723-4319-9c22-29bf0822d3fa"}, "type": "", "uninstall_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "d1998de7-8c52-486f-bfe7-f6404622e84d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageUninstallTask", "uuid": "87680374-5d15-4408-831a-1fe805cd3021"}], "name": "f5f5341c_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "060e5dd9-8343-4e8e-890b-568cd0d24fd2"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "d1998de7-8c52-486f-bfe7-f6404622e84d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageUninstallTask", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "0771aa80-129f-40f8-a3ce-daddd5122bc4"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "87680374-5d15-4408-831a-1fe805cd3021"}], "description": "", "name": "7f8d209b_runbook", "state": "NOT_VALIDATED", "main_task_local_reference": {"kind": "app_task", "name": "f5f5341c_dag", "uuid": "060e5dd9-8343-4e8e-890b-568cd0d24fd2"}, "message_list": [], "variable_list": [], "uuid": "d53c9650-e1ad-428c-8653-02f86203d3d9"}}, "timeout_secs": "0", "type": "CUSTOM_PACKAGE_UNINSTALL", "variable_list": [], "uuid": "dba40531-73d9-4847-8671-5285e8ab8ab4"}], "description": "", "name": "SYS_GEN__Runbook_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "2239b624-ac9d-47e9-a496-2b772e0a246c"}, "message_list": [], "variable_list": [], "uuid": "3f283f0c-0930-4ba2-8df3-fd241ddef9f3"}, "message_list": [], "name": "action_uninstall"}, {"description": "System action for deleting an application. Deletes physical machines as well", "type": "system", "uuid": "6419b925-bb41-4533-b3a0-1701d771de4e", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "d1998de7-8c52-486f-bfe7-f6404622e84d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "771e8ea8-2570-404d-a13a-e3164c02202b"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "e0482c28-ee10-4797-837e-8372c255a334"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "47e09de6-9a00-48d5-bf9a-42ea352fa7a4"}], "name": "SYS_GEN__Composite_DAG_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "771e8ea8-2570-404d-a13a-e3164c02202b"}, "edge_type": "inherent", "type": "", "uuid": "5dd8aaae-c8e4-4aba-96e9-a4100900943b", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "e0482c28-ee10-4797-837e-8372c255a334"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "e0482c28-ee10-4797-837e-8372c255a334"}, "edge_type": "inherent", "type": "", "uuid": "901280b0-8097-477e-ad2b-4de5ca4218b1", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "47e09de6-9a00-48d5-bf9a-42ea352fa7a4"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "dba83977-8ab8-416e-bc71-6868a4b28bf2"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "d4254ddc-5560-4e40-927a-7b25ce88f366"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "3cee8199_runbook", "uuid": "f624e457-58bc-4997-9618-a17583a38ca6"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "771e8ea8-2570-404d-a13a-e3164c02202b"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "d4254ddc-5560-4e40-927a-7b25ce88f366"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "4356ce2d_runbook", "uuid": "5614b92c-76f5-48e1-ad08-8888fecb9ff0"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "e0482c28-ee10-4797-837e-8372c255a334"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "d1998de7-8c52-486f-bfe7-f6404622e84d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "3f283f0c-0930-4ba2-8df3-fd241ddef9f3"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "47e09de6-9a00-48d5-bf9a-42ea352fa7a4"}], "description": "", "name": "SYS_GEN__Runbook_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "dba83977-8ab8-416e-bc71-6868a4b28bf2"}, "message_list": [], "variable_list": [], "uuid": "1a531ad8-285c-4bed-b271-db1264d4c142"}, "message_list": [], "name": "action_delete"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "a7161525-322e-409f-b1cc-036b4854f45f", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "d1998de7-8c52-486f-bfe7-f6404622e84d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "17cebcc8-49f7-4452-bb2a-bf6341beaeb5"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "d633aa2a-c03a-4a56-ae7c-15728abb2af6"}], "name": "SYS_GEN__Composite_DAG_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "17cebcc8-49f7-4452-bb2a-bf6341beaeb5"}, "edge_type": "inherent", "type": "", "uuid": "f5bc22fd-80a2-47ea-b1a0-631fe742dac0", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "d633aa2a-c03a-4a56-ae7c-15728abb2af6"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "183cc309-e5bd-42c8-a925-0d035cc763f7"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "d4254ddc-5560-4e40-927a-7b25ce88f366"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "25b466fc_runbook", "uuid": "a6a0c7c7-37f8-47d1-a2e1-12a5952d1066"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "17cebcc8-49f7-4452-bb2a-bf6341beaeb5"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "d1998de7-8c52-486f-bfe7-f6404622e84d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_d1998de7_8c52_486f_bfe7_f6404622e84d", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "d633aa2a-c03a-4a56-ae7c-15728abb2af6"}], "description": "", "name": "SYS_GEN__Runbook_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "183cc309-e5bd-42c8-a925-0d035cc763f7"}, "message_list": [], "variable_list": [], "uuid": "c9e04184-2019-426d-8e67-622311e1273f"}, "message_list": [], "name": "action_soft_delete"}, {"description": "System action for starting an application", "type": "system", "uuid": "21dd83f5-3c52-402e-98b3-8d8173873cb9", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "d1998de7-8c52-486f-bfe7-f6404622e84d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "b8dc22b2-819c-4b79-a800-67bad23b226b"}], "name": "SYS_GEN__Composite_DAG_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "65a5a3fc-5424-4083-b8e9-8912df7fe59f"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "d4254ddc-5560-4e40-927a-7b25ce88f366"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "6583643e_runbook", "uuid": "1395ad61-6541-456c-ab17-ee020c863928"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "b8dc22b2-819c-4b79-a800-67bad23b226b"}], "description": "", "name": "SYS_GEN__Runbook_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "65a5a3fc-5424-4083-b8e9-8912df7fe59f"}, "message_list": [], "variable_list": [], "uuid": "c17b064a-ee8e-4f9c-a1c2-69a0f9414b2d"}, "message_list": [], "name": "action_start"}, {"description": "System action for stopping an application", "type": "system", "uuid": "1e0bac19-5759-45d0-9d0d-798c6ab56540", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "d1998de7-8c52-486f-bfe7-f6404622e84d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "94a2ad52-657b-4d98-9310-8b3dce9f85ec"}], "name": "SYS_GEN__Composite_DAG_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "f7a5b059-3b40-422c-a8f2-58705ea9879e"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "d4254ddc-5560-4e40-927a-7b25ce88f366"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "3cee8199_runbook", "uuid": "f624e457-58bc-4997-9618-a17583a38ca6"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "94a2ad52-657b-4d98-9310-8b3dce9f85ec"}], "description": "", "name": "SYS_GEN__Runbook_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "f7a5b059-3b40-422c-a8f2-58705ea9879e"}, "message_list": [], "variable_list": [], "uuid": "8d1da27c-eae5-420d-8c5a-497b1d3c5f22"}, "message_list": [], "name": "action_stop"}], "type": "DEB", "service_local_reference_list": [{"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "d4254ddc-5560-4e40-927a-7b25ce88f366"}], "name": "K8SMP", "state": "ACTIVE", "version": "", "editables": {}, "message_list": [], "options": {"install_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "d1998de7-8c52-486f-bfe7-f6404622e84d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageInstallTask", "uuid": "351e11f4-01ee-4f5f-b55d-3b254142899b"}], "name": "f9943e3a_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "ea493e59-b4d8-4104-b65b-397c9907d5e2"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "d1998de7-8c52-486f-bfe7-f6404622e84d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageInstallTask", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\nsudo hostnamectl set-hostname --static kubernetes-minion@@{calm_array_index}@@\necho \"@@{K8SC.address}@@ kubernetes-controller\" | sudo tee -a /etc/hosts\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\n\techo \"${ip} kubernetes-minion${count}\" | sudo tee -a /etc/hosts\n\tcount=$((count+1))\ndone\n\nsudo yum update -y\n\n# -*- Pre-requisites\nsudo yum install -y wget sshpass iscsi-initiator-utils socat\n\nwget https://get.docker.com/builds/Linux/x86_64/docker-1.12.6.tgz\nwget https://github.com/containernetworking/plugins/releases/download/v0.6.0/cni-plugins-amd64-v0.6.0.tgz\nwget https://storage.googleapis.com/kubernetes-release/release/@@{KUBERNETES_VERSION}@@/bin/linux/amd64/kubectl\nwget https://storage.googleapis.com/kubernetes-release/release/@@{KUBERNETES_VERSION}@@/bin/linux/amd64/kube-proxy\nwget https://storage.googleapis.com/kubernetes-release/release/@@{KUBERNETES_VERSION}@@/bin/linux/amd64/kubelet\nchmod +x kubectl kube-proxy kubelet\n\nsudo mkdir -p /var/lib/docker\nsudo yum install -y lvm2\nsudo pvcreate /dev/sd{b,c,d}\nsudo vgcreate docker /dev/sd{b,c,d}\nsleep 3\nsudo lvcreate -l 100%VG -n docker_lvm docker\nsudo mkfs.xfs /dev/docker/docker_lvm\n\necho -e \"/dev/docker/docker_lvm \\t /var/lib/docker \\t xfs \\t defaults \\t 0 0\" | sudo tee /etc/fstab\nsudo mount -a", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "0771aa80-129f-40f8-a3ce-daddd5122bc4"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "351e11f4-01ee-4f5f-b55d-3b254142899b"}], "description": "", "name": "e6dd38ad_runbook", "state": "NOT_VALIDATED", "main_task_local_reference": {"kind": "app_task", "name": "f9943e3a_dag", "uuid": "ea493e59-b4d8-4104-b65b-397c9907d5e2"}, "message_list": [], "variable_list": [], "uuid": "b3c17ea8-0723-4319-9c22-29bf0822d3fa"}, "type": "", "uninstall_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "d1998de7-8c52-486f-bfe7-f6404622e84d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageUninstallTask", "uuid": "87680374-5d15-4408-831a-1fe805cd3021"}], "name": "f5f5341c_dag", "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "060e5dd9-8343-4e8e-890b-568cd0d24fd2"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "d1998de7-8c52-486f-bfe7-f6404622e84d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "PackageUninstallTask", "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "0771aa80-129f-40f8-a3ce-daddd5122bc4"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "uuid": "87680374-5d15-4408-831a-1fe805cd3021"}], "description": "", "name": "7f8d209b_runbook", "state": "NOT_VALIDATED", "main_task_local_reference": {"kind": "app_task", "name": "f5f5341c_dag", "uuid": "060e5dd9-8343-4e8e-890b-568cd0d24fd2"}, "message_list": [], "variable_list": [], "uuid": "d53c9650-e1ad-428c-8653-02f86203d3d9"}}, "variable_list": [], "uuid": "d1998de7-8c52-486f-bfe7-f6404622e84d"}, {"description": "", "action_list": [{"description": "System action for installing an application", "type": "system", "uuid": "af024f53-f974-41ba-9ac8-a31ce4edc9e2", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "a56e1157-2c16-472e-9fb0-452fa9e02de3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "Image Fetch task for VM", "uuid": "4b0ce705-4c73-4258-a1be-44ec988d9549"}], "name": "SYS_GEN__DAG_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "749013c7-f9de-4aca-91ce-f5dc0ab19386"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "a56e1157-2c16-472e-9fb0-452fa9e02de3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Image Fetch task for VM", "state": "ACTIVE", "attrs": {"type": "", "name": "CENTOS-7.4-Controller", "resources": {"image_type": "DISK_IMAGE", "checksum": {"checksum_algorithm": "", "type": "", "checksum_value": ""}, "source_uri": "http://download.nutanix.com/calm/CentOS-7-x86_64-GenericCloud.qcow2", "version": {"product_version": "", "type": "", "product_name": ""}, "architecture": "X86_64", "type": ""}, "description": ""}, "timeout_secs": "0", "type": "SUBSTRATE_IMAGE_FETCH", "variable_list": [], "uuid": "4b0ce705-4c73-4258-a1be-44ec988d9549"}], "description": "", "name": "SYS_GEN__Runbook_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "uuid": "749013c7-f9de-4aca-91ce-f5dc0ab19386"}, "message_list": [], "variable_list": [], "uuid": "730bb3b7-ed77-4f5f-9c95-7eda55226846"}, "message_list": [], "name": "action_install"}, {"description": "System action for creating an application", "type": "system", "uuid": "15c7bde4-e47a-413f-81a7-35aee98f9ffd", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "a56e1157-2c16-472e-9fb0-452fa9e02de3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "uuid": "af19a3e6-20ab-4e93-9547-991c1d1772de"}], "name": "SYS_GEN__Composite_DAG_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "3c2e861d-ab1d-4318-af54-a32ec75835c6"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "a56e1157-2c16-472e-9fb0-452fa9e02de3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "uuid": "730bb3b7-ed77-4f5f-9c95-7eda55226846"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "af19a3e6-20ab-4e93-9547-991c1d1772de"}], "description": "", "name": "SYS_GEN__Runbook_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "uuid": "3c2e861d-ab1d-4318-af54-a32ec75835c6"}, "message_list": [], "variable_list": [], "uuid": "04a0b2ab-d17e-4d4b-92f0-0bc746add163"}, "message_list": [], "name": "action_create"}, {"description": "System action for uninstalling an application", "type": "system", "uuid": "fbedd7b9-4574-47ce-bc08-bed1245ba160", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "a56e1157-2c16-472e-9fb0-452fa9e02de3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DAG_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "2483bd89-6e95-467f-81a2-b3ae52a6d251"}], "description": "", "name": "SYS_GEN__Runbook_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "uuid": "2483bd89-6e95-467f-81a2-b3ae52a6d251"}, "message_list": [], "variable_list": [], "uuid": "8c45d1a8-b1e4-4354-80d0-b1df3b9302eb"}, "message_list": [], "name": "action_uninstall"}, {"description": "System action for deleting an application. Deletes physical machines as well", "type": "system", "uuid": "44ea6cc1-a2f7-4e07-b0e0-1c5da5cd9420", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "a56e1157-2c16-472e-9fb0-452fa9e02de3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "uuid": "80926dff-b386-4d55-bf7d-df4045636cbb"}], "name": "SYS_GEN__Composite_DAG_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "1956dcae-1eb5-4447-a824-4d689905686d"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "a56e1157-2c16-472e-9fb0-452fa9e02de3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "uuid": "8c45d1a8-b1e4-4354-80d0-b1df3b9302eb"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "80926dff-b386-4d55-bf7d-df4045636cbb"}], "description": "", "name": "SYS_GEN__Runbook_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "uuid": "1956dcae-1eb5-4447-a824-4d689905686d"}, "message_list": [], "variable_list": [], "uuid": "8e7c0d94-062a-4a0d-b995-237cf84bbf5a"}, "message_list": [], "name": "action_delete"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "ba1571a6-24ba-48e6-8168-ee6f611c3a22", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "a56e1157-2c16-472e-9fb0-452fa9e02de3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_a56e1157_2c16_472e_9fb0_452fa9e02de3", "uuid": "60211280-25b5-44ec-bc1b-098fd5df5573"}], "name": "SYS_GEN__Composite_DAG_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "e7be8b51-c15e-49d7-b3b8-74433d90130f"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "a56e1157-2c16-472e-9fb0-452fa9e02de3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_a56e1157_2c16_472e_9fb0_452fa9e02de3", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "60211280-25b5-44ec-bc1b-098fd5df5573"}], "description": "", "name": "SYS_GEN__Runbook_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "uuid": "e7be8b51-c15e-49d7-b3b8-74433d90130f"}, "message_list": [], "variable_list": [], "uuid": "e6f3d226-816e-4c1f-b1aa-3778885d280a"}, "message_list": [], "name": "action_soft_delete"}, {"description": "System action for starting an application", "type": "system", "uuid": "d4da1465-bdab-47ea-b63b-d1798f80c926", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "a56e1157-2c16-472e-9fb0-452fa9e02de3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Composite_DAG_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "ea783992-4c96-45be-8b9e-d58df61bfc0d"}], "description": "", "name": "SYS_GEN__Runbook_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "uuid": "ea783992-4c96-45be-8b9e-d58df61bfc0d"}, "message_list": [], "variable_list": [], "uuid": "e38874dd-0f6c-4859-af38-e3957df209e4"}, "message_list": [], "name": "action_start"}, {"description": "System action for stopping an application", "type": "system", "uuid": "93e43496-c6f9-4279-a943-ed1b017325bf", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "a56e1157-2c16-472e-9fb0-452fa9e02de3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Composite_DAG_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "5c70a0af-68e1-42d7-affb-5a5509155397"}], "description": "", "name": "SYS_GEN__Runbook_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "uuid": "5c70a0af-68e1-42d7-affb-5a5509155397"}, "message_list": [], "variable_list": [], "uuid": "83598c81-878d-4e3d-9716-92a16063e0ca"}, "message_list": [], "name": "action_stop"}], "type": "SUBSTRATE_IMAGE", "service_local_reference_list": [], "name": "CENTOS_IMAGE_CONTROLLER", "state": "ACTIVE", "version": "", "editables": {}, "message_list": [], "options": {"type": "", "name": "CENTOS-7.4-Controller", "resources": {"image_type": "DISK_IMAGE", "checksum": {"checksum_algorithm": "", "type": "", "checksum_value": ""}, "source_uri": "http://download.nutanix.com/calm/CentOS-7-x86_64-GenericCloud.qcow2", "version": {"product_version": "", "type": "", "product_name": ""}, "architecture": "X86_64", "type": ""}, "description": ""}, "variable_list": [], "uuid": "a56e1157-2c16-472e-9fb0-452fa9e02de3"}, {"description": "", "action_list": [{"description": "System action for installing an application", "type": "system", "uuid": "87c267aa-741c-4352-884b-24d718a04d35", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "43b2690d-ca2e-4580-813e-0ea73f68d970"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "Image Fetch task for VM", "uuid": "26773ac6-7cc1-4245-b7a5-013be74131f9"}], "name": "SYS_GEN__DAG_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "870f84d9-32a4-466a-94c5-3ff807762cfa"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "43b2690d-ca2e-4580-813e-0ea73f68d970"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "Image Fetch task for VM", "state": "ACTIVE", "attrs": {"type": "", "name": "CENTOS-7.4-Minion", "resources": {"image_type": "DISK_IMAGE", "checksum": {"checksum_algorithm": "", "type": "", "checksum_value": ""}, "source_uri": "http://download.nutanix.com/calm/CentOS-7-x86_64-GenericCloud.qcow2", "version": {"product_version": "", "type": "", "product_name": ""}, "architecture": "X86_64", "type": ""}, "description": ""}, "timeout_secs": "0", "type": "SUBSTRATE_IMAGE_FETCH", "variable_list": [], "uuid": "26773ac6-7cc1-4245-b7a5-013be74131f9"}], "description": "", "name": "SYS_GEN__Runbook_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "uuid": "870f84d9-32a4-466a-94c5-3ff807762cfa"}, "message_list": [], "variable_list": [], "uuid": "77bab59a-9c1c-4bda-9ed4-670425b97451"}, "message_list": [], "name": "action_install"}, {"description": "System action for creating an application", "type": "system", "uuid": "9aba4948-425e-435f-b3c0-654e44a9ff61", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "43b2690d-ca2e-4580-813e-0ea73f68d970"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "uuid": "7db03e24-29b5-4768-87ac-0091ab14022e"}], "name": "SYS_GEN__Composite_DAG_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "aec0b4a4-e6a8-479e-a56b-d1ae66251784"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "43b2690d-ca2e-4580-813e-0ea73f68d970"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "uuid": "77bab59a-9c1c-4bda-9ed4-670425b97451"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "7db03e24-29b5-4768-87ac-0091ab14022e"}], "description": "", "name": "SYS_GEN__Runbook_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "uuid": "aec0b4a4-e6a8-479e-a56b-d1ae66251784"}, "message_list": [], "variable_list": [], "uuid": "565bc564-e96e-40cb-81a8-eb7b2c071f90"}, "message_list": [], "name": "action_create"}, {"description": "System action for uninstalling an application", "type": "system", "uuid": "5b7b6caa-b858-42a9-916c-e99f7c17567c", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "43b2690d-ca2e-4580-813e-0ea73f68d970"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DAG_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "cdf3a3c8-9d4a-4744-ad25-f8e98eb5f6b4"}], "description": "", "name": "SYS_GEN__Runbook_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__DAG_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "uuid": "cdf3a3c8-9d4a-4744-ad25-f8e98eb5f6b4"}, "message_list": [], "variable_list": [], "uuid": "1eab1708-b4df-4b93-bc88-f2c57956b8e1"}, "message_list": [], "name": "action_uninstall"}, {"description": "System action for deleting an application. Deletes physical machines as well", "type": "system", "uuid": "07b60fc1-0c98-4d82-8edb-d30d1a778bf4", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "43b2690d-ca2e-4580-813e-0ea73f68d970"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "uuid": "1276e187-146c-4c2f-ae2f-ff7e31b8e211"}], "name": "SYS_GEN__Composite_DAG_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "bfed1b2d-750c-416d-b04e-01dc0fb9c831"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "43b2690d-ca2e-4580-813e-0ea73f68d970"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "uuid": "1eab1708-b4df-4b93-bc88-f2c57956b8e1"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "1276e187-146c-4c2f-ae2f-ff7e31b8e211"}], "description": "", "name": "SYS_GEN__Runbook_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "uuid": "bfed1b2d-750c-416d-b04e-01dc0fb9c831"}, "message_list": [], "variable_list": [], "uuid": "4f15736b-d2aa-4a62-a139-49a8a4d0865e"}, "message_list": [], "name": "action_delete"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "e8d9c6c1-51a6-4abe-b8ad-efd6342853ae", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "43b2690d-ca2e-4580-813e-0ea73f68d970"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_43b2690d_ca2e_4580_813e_0ea73f68d970", "uuid": "cd14f89a-741e-46f2-b610-172ac87408ed"}], "name": "SYS_GEN__Composite_DAG_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "0ed0909c-e909-4667-ada3-5a71ed37624b"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "43b2690d-ca2e-4580-813e-0ea73f68d970"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_43b2690d_ca2e_4580_813e_0ea73f68d970", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "cd14f89a-741e-46f2-b610-172ac87408ed"}], "description": "", "name": "SYS_GEN__Runbook_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "uuid": "0ed0909c-e909-4667-ada3-5a71ed37624b"}, "message_list": [], "variable_list": [], "uuid": "3f54ce50-dc63-4c42-a196-4d4d1338c6a0"}, "message_list": [], "name": "action_soft_delete"}, {"description": "System action for starting an application", "type": "system", "uuid": "d66b8274-9aac-49e2-ab9e-d501fe5e1340", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "43b2690d-ca2e-4580-813e-0ea73f68d970"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Composite_DAG_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "074b1c3a-720a-486a-8873-f322798a0905"}], "description": "", "name": "SYS_GEN__Runbook_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "uuid": "074b1c3a-720a-486a-8873-f322798a0905"}, "message_list": [], "variable_list": [], "uuid": "2dfb24dc-43ec-4727-b956-60140b2ab827"}, "message_list": [], "name": "action_start"}, {"description": "System action for stopping an application", "type": "system", "uuid": "803ae795-0b17-41fb-97b6-02cce426ee02", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "43b2690d-ca2e-4580-813e-0ea73f68d970"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Composite_DAG_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "41f7a921-0871-4f39-88ee-500154b9c647"}], "description": "", "name": "SYS_GEN__Runbook_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "uuid": "41f7a921-0871-4f39-88ee-500154b9c647"}, "message_list": [], "variable_list": [], "uuid": "ba2f1a5f-dc77-4092-bb0d-b2221b1dfdf8"}, "message_list": [], "name": "action_stop"}], "type": "SUBSTRATE_IMAGE", "service_local_reference_list": [], "name": "CENTOS_IMAGE_MINION", "state": "ACTIVE", "version": "", "editables": {}, "message_list": [], "options": {"type": "", "name": "CENTOS-7.4-Minion", "resources": {"image_type": "DISK_IMAGE", "checksum": {"checksum_algorithm": "", "type": "", "checksum_value": ""}, "source_uri": "http://download.nutanix.com/calm/CentOS-7-x86_64-GenericCloud.qcow2", "version": {"product_version": "", "type": "", "product_name": ""}, "architecture": "X86_64", "type": ""}, "description": ""}, "variable_list": [], "uuid": "43b2690d-ca2e-4580-813e-0ea73f68d970"}], "app_profile_list": [{"deployment_create_list": [{"type": "GREENFIELD", "description": "", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "e7e5be52-1b63-42d7-8b17-13af56920780", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__DE_Provision_ff94efe8_2c46_4f35_862f_db430c239c7e", "uuid": "07abaa12-a024-4ba7-ab60-4fca9dec9a85"}, {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "uuid": "ded92abb-6ae3-495e-a19b-0a5f8c8a81fa"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "72e86fcc-fb21-4e77-8ad7-eca4eeb061ff"}, {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "2cb50068-fcbe-4c9f-8a28-d1c88f4d9f48"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "238d15ae-5768-45ea-bfbe-04c3d20c6655"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "aa704eb6-7dfe-4408-9029-d4269b6f4333"}], "name": "SYS_GEN__Composite_DAG_Deployment_ff94efe8_2c46_4f35_862f_db430c239c7e", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "238d15ae-5768-45ea-bfbe-04c3d20c6655"}, "edge_type": "inherent", "type": "", "uuid": "2bf65aaf-864b-4d86-8e9c-9177ddc37ad1", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "aa704eb6-7dfe-4408-9029-d4269b6f4333"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "2cb50068-fcbe-4c9f-8a28-d1c88f4d9f48"}, "edge_type": "inherent", "type": "", "uuid": "c7feceb8-f923-4e7d-ba33-09ead20d6dea", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "238d15ae-5768-45ea-bfbe-04c3d20c6655"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "72e86fcc-fb21-4e77-8ad7-eca4eeb061ff"}, "edge_type": "inherent", "type": "", "uuid": "43a62357-3561-4f28-8bed-a636589b4a67", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "2cb50068-fcbe-4c9f-8a28-d1c88f4d9f48"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Provision_ff94efe8_2c46_4f35_862f_db430c239c7e", "uuid": "07abaa12-a024-4ba7-ab60-4fca9dec9a85"}, "edge_type": "inherent", "type": "", "uuid": "9f36868f-9f8a-4fb5-98a4-e5ace886887b", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "72e86fcc-fb21-4e77-8ad7-eca4eeb061ff"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "uuid": "ded92abb-6ae3-495e-a19b-0a5f8c8a81fa"}, "edge_type": "inherent", "type": "", "uuid": "955e1284-d6cb-4355-b368-6dcf3af71d0b", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "72e86fcc-fb21-4e77-8ad7-eca4eeb061ff"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Provision_ff94efe8_2c46_4f35_862f_db430c239c7e", "uuid": "07abaa12-a024-4ba7-ab60-4fca9dec9a85"}, "edge_type": "inherent", "type": "", "uuid": "4af85b8b-c84a-4fe6-88e6-a4764663099e", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "uuid": "ded92abb-6ae3-495e-a19b-0a5f8c8a81fa"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "b0717d08-6a8b-4337-8a9a-a4835a358064"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Provision_ff94efe8_2c46_4f35_862f_db430c239c7e", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "CREATE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "07abaa12-a024-4ba7-ab60-4fca9dec9a85"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "a56e1157-2c16-472e-9fb0-452fa9e02de3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "uuid": "730bb3b7-ed77-4f5f-9c95-7eda55226846"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "ded92abb-6ae3-495e-a19b-0a5f8c8a81fa"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "28a8843a-8ae9-4ed9-9a2e-f910fe59b444"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "7bf674a7-dbc0-4199-94f6-d4857d93570f"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "72e86fcc-fb21-4e77-8ad7-eca4eeb061ff"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "ea79eea5-26bf-4dda-a359-17ac9ebb57aa"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "ed91111c-1d3f-4da5-a623-0f970e7dbdb3"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "2cb50068-fcbe-4c9f-8a28-d1c88f4d9f48"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "65a78bcf-970b-472c-b501-866e109c8a56"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "80edfe72_runbook", "uuid": "181b2cc8-b196-482e-8988-0e6dce472c23"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "238d15ae-5768-45ea-bfbe-04c3d20c6655"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "65a78bcf-970b-472c-b501-866e109c8a56"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "ec49e982_runbook", "uuid": "d947e531-a020-4b99-9b4b-6f3fc665c5ae"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "aa704eb6-7dfe-4408-9029-d4269b6f4333"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_ff94efe8_2c46_4f35_862f_db430c239c7e", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_ff94efe8_2c46_4f35_862f_db430c239c7e", "uuid": "b0717d08-6a8b-4337-8a9a-a4835a358064"}, "message_list": [], "variable_list": [], "uuid": "91756af3-8fa9-4c5f-8cc2-c630da5f7013"}, "message_list": [], "name": "action_create"}, {"description": "System action for starting an application", "type": "system", "uuid": "d58c6a58-3b89-4a45-951c-8a3658583c0c", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "0b7281a1-4317-40ef-9f00-e1fa6e942418"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "905c3fdc-e2da-4939-b401-4757b0f438cb"}], "name": "SYS_GEN__Composite_DAG_Deployment_ff94efe8_2c46_4f35_862f_db430c239c7e", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "0b7281a1-4317-40ef-9f00-e1fa6e942418"}, "edge_type": "inherent", "type": "", "uuid": "89f9923b-bb3b-4af9-9c05-7f21891e503f", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "905c3fdc-e2da-4939-b401-4757b0f438cb"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "1015325c-9b87-4694-98fe-f4c00aab9d9b"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "28a8843a-8ae9-4ed9-9a2e-f910fe59b444"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "1665c5c3-f61d-4389-bea5-2f079115b2ae"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "0b7281a1-4317-40ef-9f00-e1fa6e942418"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "65a78bcf-970b-472c-b501-866e109c8a56"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "ec49e982_runbook", "uuid": "d947e531-a020-4b99-9b4b-6f3fc665c5ae"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "905c3fdc-e2da-4939-b401-4757b0f438cb"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_ff94efe8_2c46_4f35_862f_db430c239c7e", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_ff94efe8_2c46_4f35_862f_db430c239c7e", "uuid": "1015325c-9b87-4694-98fe-f4c00aab9d9b"}, "message_list": [], "variable_list": [], "uuid": "9341cd7f-1eca-430f-9237-2c1c520f45e4"}, "message_list": [], "name": "action_start"}, {"description": "System action for stopping an application", "type": "system", "uuid": "008afb36-896b-4114-b63c-a41fa901b862", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "03c754fd-97e1-4671-80c9-3c35f9426199"}, {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "f00ad967-32bd-40cf-8ea5-2b8a8d5a0880"}], "name": "SYS_GEN__Composite_DAG_Deployment_ff94efe8_2c46_4f35_862f_db430c239c7e", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "03c754fd-97e1-4671-80c9-3c35f9426199"}, "edge_type": "inherent", "type": "", "uuid": "1fed11df-2ffc-42b1-8c2b-648a08d906c4", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "f00ad967-32bd-40cf-8ea5-2b8a8d5a0880"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "1f18ebbf-78af-4557-8d13-89f458d1e474"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "65a78bcf-970b-472c-b501-866e109c8a56"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "e34ef8d6_runbook", "uuid": "0a7823be-b563-467d-b056-78527970edc9"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "03c754fd-97e1-4671-80c9-3c35f9426199"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "28a8843a-8ae9-4ed9-9a2e-f910fe59b444"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "d5a0b374-ee92-448d-aa15-17b91400fdd1"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "f00ad967-32bd-40cf-8ea5-2b8a8d5a0880"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_ff94efe8_2c46_4f35_862f_db430c239c7e", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_ff94efe8_2c46_4f35_862f_db430c239c7e", "uuid": "1f18ebbf-78af-4557-8d13-89f458d1e474"}, "message_list": [], "variable_list": [], "uuid": "b1a442af-3e00-4e0e-b2d1-6fdf26eeb242"}, "message_list": [], "name": "action_stop"}, {"description": "System action for deleting an application. Deletes physical machines as well", "type": "system", "uuid": "c3960dd6-94d7-4bf3-874a-13263997dea5", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "194ee589-c77c-4ea0-af8b-9afa5ecd03e6"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "00233b75-a82b-4ab8-adc3-d4f86c07ec5e"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "6648bb9a-a17f-4cf5-9b66-9f9ff5ffd4b5"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "06abd4b3-b526-4860-a07d-c4e7c7e7087b"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "uuid": "637a6b98-d84c-4b7e-bd20-16dd49cf8b0f"}, {"kind": "app_task", "name": "SYS_GEN__DE_Delete_ff94efe8_2c46_4f35_862f_db430c239c7e", "uuid": "edcc7060-91b5-43ce-8a91-8154b00d3056"}], "name": "SYS_GEN__Composite_DAG_Deployment_ff94efe8_2c46_4f35_862f_db430c239c7e", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "194ee589-c77c-4ea0-af8b-9afa5ecd03e6"}, "edge_type": "inherent", "type": "", "uuid": "f45fa90e-6acb-4153-ae32-ea79d2ced763", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "00233b75-a82b-4ab8-adc3-d4f86c07ec5e"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "00233b75-a82b-4ab8-adc3-d4f86c07ec5e"}, "edge_type": "inherent", "type": "", "uuid": "72dd4a85-8109-403d-b0a1-970ab2f33c2e", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "6648bb9a-a17f-4cf5-9b66-9f9ff5ffd4b5"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "06abd4b3-b526-4860-a07d-c4e7c7e7087b"}, "edge_type": "inherent", "type": "", "uuid": "7cd8d7a0-cfa3-4d80-8fc7-f037f559eef9", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Delete_ff94efe8_2c46_4f35_862f_db430c239c7e", "uuid": "edcc7060-91b5-43ce-8a91-8154b00d3056"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "6648bb9a-a17f-4cf5-9b66-9f9ff5ffd4b5"}, "edge_type": "inherent", "type": "", "uuid": "aa6b1e9a-e075-412a-9543-3db551cadc05", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "06abd4b3-b526-4860-a07d-c4e7c7e7087b"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "uuid": "637a6b98-d84c-4b7e-bd20-16dd49cf8b0f"}, "edge_type": "inherent", "type": "", "uuid": "fbea44a5-9c40-4977-a53c-089427255b2f", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Delete_ff94efe8_2c46_4f35_862f_db430c239c7e", "uuid": "edcc7060-91b5-43ce-8a91-8154b00d3056"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "06abd4b3-b526-4860-a07d-c4e7c7e7087b"}, "edge_type": "inherent", "type": "", "uuid": "452180f9-31af-4484-9cea-097bbbb2d3e3", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "uuid": "637a6b98-d84c-4b7e-bd20-16dd49cf8b0f"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "120b2a0d-066b-487c-922c-2a47f580b6a2"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "65a78bcf-970b-472c-b501-866e109c8a56"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "e34ef8d6_runbook", "uuid": "0a7823be-b563-467d-b056-78527970edc9"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "194ee589-c77c-4ea0-af8b-9afa5ecd03e6"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "65a78bcf-970b-472c-b501-866e109c8a56"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "c9c07e72_runbook", "uuid": "70fffd70-6ca8-4bdc-bb8e-29b8b064262a"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "00233b75-a82b-4ab8-adc3-d4f86c07ec5e"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "ea79eea5-26bf-4dda-a359-17ac9ebb57aa"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "ba457547-e01a-44b0-9160-34251eb044d3"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "6648bb9a-a17f-4cf5-9b66-9f9ff5ffd4b5"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "28a8843a-8ae9-4ed9-9a2e-f910fe59b444"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "4860f0fc-1d79-4439-b939-aaecab0704d4"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "06abd4b3-b526-4860-a07d-c4e7c7e7087b"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "a56e1157-2c16-472e-9fb0-452fa9e02de3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "uuid": "8c45d1a8-b1e4-4354-80d0-b1df3b9302eb"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "637a6b98-d84c-4b7e-bd20-16dd49cf8b0f"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Delete_ff94efe8_2c46_4f35_862f_db430c239c7e", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "edcc7060-91b5-43ce-8a91-8154b00d3056"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_ff94efe8_2c46_4f35_862f_db430c239c7e", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_ff94efe8_2c46_4f35_862f_db430c239c7e", "uuid": "120b2a0d-066b-487c-922c-2a47f580b6a2"}, "message_list": [], "variable_list": [], "uuid": "7a993a13-13ed-4da4-81f6-38d19ecf189f"}, "message_list": [], "name": "action_delete"}, {"description": "System action for scaleout", "type": "system", "uuid": "32d2f657-9c0d-4826-a507-634884856d91", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Deployment_Scaleout_ff94efe8_2c46_4f35_862f_db430c239c7e", "uuid": "e486520c-1d05-42ab-9764-2193cc1934b0"}], "name": "SYS_GEN__Composite_DAG_Deployment_ff94efe8_2c46_4f35_862f_db430c239c7e", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "cda8b234-7812-4adb-91f6-a61357e14a59"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Deployment_Scaleout_ff94efe8_2c46_4f35_862f_db430c239c7e", "state": "ACTIVE", "attrs": {"scaling_count": "@@{scaling_count}@@", "type": "", "scaling_type": "SCALEOUT"}, "timeout_secs": "0", "type": "SCALING", "variable_list": [], "uuid": "e486520c-1d05-42ab-9764-2193cc1934b0"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_ff94efe8_2c46_4f35_862f_db430c239c7e", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_ff94efe8_2c46_4f35_862f_db430c239c7e", "uuid": "cda8b234-7812-4adb-91f6-a61357e14a59"}, "message_list": [], "variable_list": [{"val_type": "STRING", "description": "", "name": "scaling_count", "type": "LOCAL", "value": "0", "label": "", "state": "ACTIVE", "attrs": {}, "editables": {"value": true}, "message_list": [], "uuid": "4045c979-3f87-4dc0-a7a7-9c401c611cdd"}], "uuid": "e38bccc5-3777-4678-89a5-2c3dab838924"}, "message_list": [], "name": "action_scaleout"}, {"description": "System action for scalein", "type": "system", "uuid": "1fc20b8c-c90a-4a98-97ed-62b0255dfbff", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Deployment_Scalein_ff94efe8_2c46_4f35_862f_db430c239c7e", "uuid": "09ed6be4-befd-4c72-8685-bbd65f03560d"}], "name": "SYS_GEN__Composite_DAG_Deployment_ff94efe8_2c46_4f35_862f_db430c239c7e", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "e2fdaa4f-11b8-4c99-90db-1d380015c09b"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Deployment_Scalein_ff94efe8_2c46_4f35_862f_db430c239c7e", "state": "ACTIVE", "attrs": {"scaling_count": "@@{scaling_count}@@", "type": "", "scaling_type": "SCALEIN"}, "timeout_secs": "0", "type": "SCALING", "variable_list": [], "uuid": "09ed6be4-befd-4c72-8685-bbd65f03560d"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_ff94efe8_2c46_4f35_862f_db430c239c7e", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_ff94efe8_2c46_4f35_862f_db430c239c7e", "uuid": "e2fdaa4f-11b8-4c99-90db-1d380015c09b"}, "message_list": [], "variable_list": [{"val_type": "STRING", "description": "", "name": "scaling_count", "type": "LOCAL", "value": "0", "label": "", "state": "ACTIVE", "attrs": {}, "editables": {"value": true}, "message_list": [], "uuid": "ce652f65-85cc-4260-903c-c41c0d625099"}], "uuid": "0e78bc1f-8af4-48bc-b06e-f114d19b8844"}, "message_list": [], "name": "action_scalein"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "b99aa183-f8dc-4e71-b777-d408b7bd27eb", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "89f95a59-c0c1-4fed-93fd-722e579ff640"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "eaeb57a5-8154-47b1-94e5-70cb36b8e156"}, {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "ad12b404-84d0-4934-9e46-e49ca462310d"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_a56e1157_2c16_472e_9fb0_452fa9e02de3", "uuid": "15815c60-d4ed-448c-8c83-484bdb01c94f"}, {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_ff94efe8_2c46_4f35_862f_db430c239c7e", "uuid": "57a70781-9ce6-42b4-91ab-6134e2edfb40"}], "name": "SYS_GEN__Composite_DAG_Deployment_ff94efe8_2c46_4f35_862f_db430c239c7e", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "89f95a59-c0c1-4fed-93fd-722e579ff640"}, "edge_type": "inherent", "type": "", "uuid": "c8440fbb-5037-4a46-8d3c-796a43179e9b", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "eaeb57a5-8154-47b1-94e5-70cb36b8e156"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "ad12b404-84d0-4934-9e46-e49ca462310d"}, "edge_type": "inherent", "type": "", "uuid": "7ef0a691-8a60-48e0-9ec2-11e7d3ba26a5", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_a56e1157_2c16_472e_9fb0_452fa9e02de3", "uuid": "15815c60-d4ed-448c-8c83-484bdb01c94f"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "ad12b404-84d0-4934-9e46-e49ca462310d"}, "edge_type": "inherent", "type": "", "uuid": "dc2bd234-9fad-4843-8811-886b74bfad38", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_ff94efe8_2c46_4f35_862f_db430c239c7e", "uuid": "57a70781-9ce6-42b4-91ab-6134e2edfb40"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "eaeb57a5-8154-47b1-94e5-70cb36b8e156"}, "edge_type": "inherent", "type": "", "uuid": "a6e4d8ea-5caa-44c5-a5b9-9338756d7e8c", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "ad12b404-84d0-4934-9e46-e49ca462310d"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_a56e1157_2c16_472e_9fb0_452fa9e02de3", "uuid": "15815c60-d4ed-448c-8c83-484bdb01c94f"}, "edge_type": "inherent", "type": "", "uuid": "3d1dd11a-13c5-4546-9002-d161018375bb", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_ff94efe8_2c46_4f35_862f_db430c239c7e", "uuid": "57a70781-9ce6-42b4-91ab-6134e2edfb40"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "ada1aec6-eae6-4282-a1b5-64dd3159f00c"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "65a78bcf-970b-472c-b501-866e109c8a56"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "3c8f0554_runbook", "uuid": "c51a449f-4fda-4864-aafb-3d3803f64ee6"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "89f95a59-c0c1-4fed-93fd-722e579ff640"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "ea79eea5-26bf-4dda-a359-17ac9ebb57aa"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "eaeb57a5-8154-47b1-94e5-70cb36b8e156"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "28a8843a-8ae9-4ed9-9a2e-f910fe59b444"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "e9da900a-5331-4b5e-9a38-46402e0645de"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "ad12b404-84d0-4934-9e46-e49ca462310d"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "a56e1157-2c16-472e-9fb0-452fa9e02de3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_a56e1157_2c16_472e_9fb0_452fa9e02de3", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "15815c60-d4ed-448c-8c83-484bdb01c94f"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Soft_Delete_ff94efe8_2c46_4f35_862f_db430c239c7e", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "57a70781-9ce6-42b4-91ab-6134e2edfb40"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_ff94efe8_2c46_4f35_862f_db430c239c7e", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_ff94efe8_2c46_4f35_862f_db430c239c7e", "uuid": "ada1aec6-eae6-4282-a1b5-64dd3159f00c"}, "message_list": [], "variable_list": [], "uuid": "b92f670c-3cc9-4687-819e-bdd1d49fa605"}, "message_list": [], "name": "action_soft_delete"}], "message_list": [], "editables": {}, "name": "d584b567_deployment", "state": "ACTIVE", "max_replicas": "1", "package_local_reference_list": [{"kind": "app_package", "name": "K8SCP", "uuid": "ea79eea5-26bf-4dda-a359-17ac9ebb57aa"}], "substrate_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "28a8843a-8ae9-4ed9-9a2e-f910fe59b444"}, "min_replicas": "1", "variable_list": [], "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, {"type": "GREENFIELD", "description": "", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "ea378ea3-0b59-428d-8094-54c1faf67386", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "28fff97c-9794-4449-b296-3523101461e2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__DE_Provision_28fff97c_9794_4449_b296_3523101461e2", "uuid": "0a2d861f-fa24-4892-b1f8-11450fcf7eb9"}, {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "uuid": "3a57e7b5-9a43-4116-b22a-2e18b3804b41"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "6727d783-0dfd-445f-ac3a-b4793c014311"}, {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "86f20a99-769a-48f1-aaf3-a81e17731691"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "b2b11718-16b6-4a90-9b79-56df114b58f7"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "407c13e7-2387-4d00-a4b2-ef5805cc2f95"}], "name": "SYS_GEN__Composite_DAG_Deployment_28fff97c_9794_4449_b296_3523101461e2", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "b2b11718-16b6-4a90-9b79-56df114b58f7"}, "edge_type": "inherent", "type": "", "uuid": "7c506216-ce8c-47f5-9653-d80f2f8f87cb", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "407c13e7-2387-4d00-a4b2-ef5805cc2f95"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "86f20a99-769a-48f1-aaf3-a81e17731691"}, "edge_type": "inherent", "type": "", "uuid": "e6027f40-8ae4-468f-85e0-1f4acac774c1", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "b2b11718-16b6-4a90-9b79-56df114b58f7"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "6727d783-0dfd-445f-ac3a-b4793c014311"}, "edge_type": "inherent", "type": "", "uuid": "9758b55a-0a2b-45e3-a128-97d3ddff45a7", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "86f20a99-769a-48f1-aaf3-a81e17731691"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "uuid": "3a57e7b5-9a43-4116-b22a-2e18b3804b41"}, "edge_type": "inherent", "type": "", "uuid": "6c60a029-3c5a-41b3-baff-145f8ad2a214", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "6727d783-0dfd-445f-ac3a-b4793c014311"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Provision_28fff97c_9794_4449_b296_3523101461e2", "uuid": "0a2d861f-fa24-4892-b1f8-11450fcf7eb9"}, "edge_type": "inherent", "type": "", "uuid": "b0c5bbb2-4c0c-437a-8329-15739a14a050", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "6727d783-0dfd-445f-ac3a-b4793c014311"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Provision_28fff97c_9794_4449_b296_3523101461e2", "uuid": "0a2d861f-fa24-4892-b1f8-11450fcf7eb9"}, "edge_type": "inherent", "type": "", "uuid": "e8f75204-20d1-44ad-bd19-330b0c4a1bc4", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "uuid": "3a57e7b5-9a43-4116-b22a-2e18b3804b41"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "e6c761fb-d03d-4e6b-9a25-e47aef0974c2"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "28fff97c-9794-4449-b296-3523101461e2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Provision_28fff97c_9794_4449_b296_3523101461e2", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "CREATE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "0a2d861f-fa24-4892-b1f8-11450fcf7eb9"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "43b2690d-ca2e-4580-813e-0ea73f68d970"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "28fff97c-9794-4449-b296-3523101461e2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "uuid": "77bab59a-9c1c-4bda-9ed4-670425b97451"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "3a57e7b5-9a43-4116-b22a-2e18b3804b41"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "b766185a-667f-488a-ba64-00194e53907a"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "56a51e58-7d42-44f9-93cc-3169b1ed9a76"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "6727d783-0dfd-445f-ac3a-b4793c014311"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "d1998de7-8c52-486f-bfe7-f6404622e84d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "28fff97c-9794-4449-b296-3523101461e2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "5d57158a-3326-4949-99f7-d7e97903e380"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "86f20a99-769a-48f1-aaf3-a81e17731691"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "d4254ddc-5560-4e40-927a-7b25ce88f366"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "28fff97c-9794-4449-b296-3523101461e2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "658fecfa_runbook", "uuid": "321b7eca-6bed-4f30-9432-8dca6b84d02b"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "b2b11718-16b6-4a90-9b79-56df114b58f7"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "d4254ddc-5560-4e40-927a-7b25ce88f366"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "28fff97c-9794-4449-b296-3523101461e2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "6583643e_runbook", "uuid": "1395ad61-6541-456c-ab17-ee020c863928"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "407c13e7-2387-4d00-a4b2-ef5805cc2f95"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_28fff97c_9794_4449_b296_3523101461e2", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_28fff97c_9794_4449_b296_3523101461e2", "uuid": "e6c761fb-d03d-4e6b-9a25-e47aef0974c2"}, "message_list": [], "variable_list": [], "uuid": "ca24f612-e432-4317-ab2a-31111a2353ed"}, "message_list": [], "name": "action_create"}, {"description": "System action for starting an application", "type": "system", "uuid": "e1370dfb-593e-4933-906e-88fb8c4d7ba4", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "28fff97c-9794-4449-b296-3523101461e2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "cd53de8c-8b1b-43a8-8a35-93fa5cddccca"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "a32476a6-5091-4a86-807a-7c52879caca9"}], "name": "SYS_GEN__Composite_DAG_Deployment_28fff97c_9794_4449_b296_3523101461e2", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "cd53de8c-8b1b-43a8-8a35-93fa5cddccca"}, "edge_type": "inherent", "type": "", "uuid": "500cc63f-cb4b-4a89-aa43-804dbee42630", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "a32476a6-5091-4a86-807a-7c52879caca9"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "b11b57e4-cd9b-4adc-b4b1-59487dcb1848"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "b766185a-667f-488a-ba64-00194e53907a"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "684fbbe2-88ed-4031-aad1-635be044561e"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "cd53de8c-8b1b-43a8-8a35-93fa5cddccca"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "d4254ddc-5560-4e40-927a-7b25ce88f366"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "28fff97c-9794-4449-b296-3523101461e2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "6583643e_runbook", "uuid": "1395ad61-6541-456c-ab17-ee020c863928"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "a32476a6-5091-4a86-807a-7c52879caca9"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_28fff97c_9794_4449_b296_3523101461e2", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_28fff97c_9794_4449_b296_3523101461e2", "uuid": "b11b57e4-cd9b-4adc-b4b1-59487dcb1848"}, "message_list": [], "variable_list": [], "uuid": "574acafe-3800-46d0-bc08-8ed7222f4eff"}, "message_list": [], "name": "action_start"}, {"description": "System action for stopping an application", "type": "system", "uuid": "0e5e9ff4-d7b1-4167-aa2b-ef64675de278", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "28fff97c-9794-4449-b296-3523101461e2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "3bd27672-366e-40f0-be36-9fa78b5ed3f6"}, {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "e4e940b4-e0fe-4869-9c0f-9b49be38a92b"}], "name": "SYS_GEN__Composite_DAG_Deployment_28fff97c_9794_4449_b296_3523101461e2", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "3bd27672-366e-40f0-be36-9fa78b5ed3f6"}, "edge_type": "inherent", "type": "", "uuid": "9ba33d97-2fb5-4bde-90ec-03cbadb996f4", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "e4e940b4-e0fe-4869-9c0f-9b49be38a92b"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "244823b3-91f4-46bb-a0f0-984ca3dca18f"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "d4254ddc-5560-4e40-927a-7b25ce88f366"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "28fff97c-9794-4449-b296-3523101461e2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "3cee8199_runbook", "uuid": "f624e457-58bc-4997-9618-a17583a38ca6"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "3bd27672-366e-40f0-be36-9fa78b5ed3f6"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "b766185a-667f-488a-ba64-00194e53907a"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "4633a79e-82bd-44a8-acca-2a7a06b5e66e"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "e4e940b4-e0fe-4869-9c0f-9b49be38a92b"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_28fff97c_9794_4449_b296_3523101461e2", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_28fff97c_9794_4449_b296_3523101461e2", "uuid": "244823b3-91f4-46bb-a0f0-984ca3dca18f"}, "message_list": [], "variable_list": [], "uuid": "8db78d04-539a-483d-895e-0f962b5bac99"}, "message_list": [], "name": "action_stop"}, {"description": "System action for deleting an application. Deletes physical machines as well", "type": "system", "uuid": "c80bb816-774f-4f83-8239-9db73ab0ecb1", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "28fff97c-9794-4449-b296-3523101461e2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "9cef45c3-5da8-4498-be67-a605a9a0db74"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "309b6e91-b500-4381-b534-9e00fcc2a218"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "ffd927e4-2b57-4232-998c-cb3266bbfe1d"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "4e812a46-d987-42ef-af37-3a07e534081d"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "uuid": "c0b7d8bf-ab1e-4a27-a221-ed9adae25cd6"}, {"kind": "app_task", "name": "SYS_GEN__DE_Delete_28fff97c_9794_4449_b296_3523101461e2", "uuid": "e3069f09-502f-4214-87fe-f25086d36d76"}], "name": "SYS_GEN__Composite_DAG_Deployment_28fff97c_9794_4449_b296_3523101461e2", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "9cef45c3-5da8-4498-be67-a605a9a0db74"}, "edge_type": "inherent", "type": "", "uuid": "b892c2ee-baf0-4c0b-b09f-9cdd52e07d2f", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "309b6e91-b500-4381-b534-9e00fcc2a218"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "309b6e91-b500-4381-b534-9e00fcc2a218"}, "edge_type": "inherent", "type": "", "uuid": "073ca701-7229-4c16-b685-47a1dcd9f79a", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "ffd927e4-2b57-4232-998c-cb3266bbfe1d"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "4e812a46-d987-42ef-af37-3a07e534081d"}, "edge_type": "inherent", "type": "", "uuid": "32764b74-da18-43e2-bc57-c12096e0b993", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "uuid": "c0b7d8bf-ab1e-4a27-a221-ed9adae25cd6"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "ffd927e4-2b57-4232-998c-cb3266bbfe1d"}, "edge_type": "inherent", "type": "", "uuid": "94eca2ad-6611-4711-aae7-2a1f7a868958", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "4e812a46-d987-42ef-af37-3a07e534081d"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "4e812a46-d987-42ef-af37-3a07e534081d"}, "edge_type": "inherent", "type": "", "uuid": "e3870eed-5c89-4ec1-bd78-fd2fab853dd1", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Delete_28fff97c_9794_4449_b296_3523101461e2", "uuid": "e3069f09-502f-4214-87fe-f25086d36d76"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "uuid": "c0b7d8bf-ab1e-4a27-a221-ed9adae25cd6"}, "edge_type": "inherent", "type": "", "uuid": "a426fdbf-4d66-43e6-93b3-eb400295962f", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Delete_28fff97c_9794_4449_b296_3523101461e2", "uuid": "e3069f09-502f-4214-87fe-f25086d36d76"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "a3020ff7-f455-4ae3-ba3e-91ee54b5f205"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "d4254ddc-5560-4e40-927a-7b25ce88f366"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "28fff97c-9794-4449-b296-3523101461e2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "3cee8199_runbook", "uuid": "f624e457-58bc-4997-9618-a17583a38ca6"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "9cef45c3-5da8-4498-be67-a605a9a0db74"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "d4254ddc-5560-4e40-927a-7b25ce88f366"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "28fff97c-9794-4449-b296-3523101461e2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "4356ce2d_runbook", "uuid": "5614b92c-76f5-48e1-ad08-8888fecb9ff0"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "309b6e91-b500-4381-b534-9e00fcc2a218"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "d1998de7-8c52-486f-bfe7-f6404622e84d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "28fff97c-9794-4449-b296-3523101461e2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "3f283f0c-0930-4ba2-8df3-fd241ddef9f3"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "ffd927e4-2b57-4232-998c-cb3266bbfe1d"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "b766185a-667f-488a-ba64-00194e53907a"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "840bffcb-9d24-4f4b-881b-c440fd48b345"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "4e812a46-d987-42ef-af37-3a07e534081d"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "43b2690d-ca2e-4580-813e-0ea73f68d970"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "28fff97c-9794-4449-b296-3523101461e2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "uuid": "1eab1708-b4df-4b93-bc88-f2c57956b8e1"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "c0b7d8bf-ab1e-4a27-a221-ed9adae25cd6"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "28fff97c-9794-4449-b296-3523101461e2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Delete_28fff97c_9794_4449_b296_3523101461e2", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "e3069f09-502f-4214-87fe-f25086d36d76"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_28fff97c_9794_4449_b296_3523101461e2", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_28fff97c_9794_4449_b296_3523101461e2", "uuid": "a3020ff7-f455-4ae3-ba3e-91ee54b5f205"}, "message_list": [], "variable_list": [], "uuid": "01fc7296-3cf6-4c5e-bf34-4cf88db3221c"}, "message_list": [], "name": "action_delete"}, {"description": "System action for scaleout", "type": "system", "uuid": "03c0a93e-fada-474e-a01a-70b45a3e0222", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "28fff97c-9794-4449-b296-3523101461e2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Deployment_Scaleout_28fff97c_9794_4449_b296_3523101461e2", "uuid": "ec9aebfa-02ca-4918-975e-b3eacf873554"}], "name": "SYS_GEN__Composite_DAG_Deployment_28fff97c_9794_4449_b296_3523101461e2", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "4a71e124-42b2-44ca-8563-872d7044714a"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "28fff97c-9794-4449-b296-3523101461e2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Deployment_Scaleout_28fff97c_9794_4449_b296_3523101461e2", "state": "ACTIVE", "attrs": {"scaling_count": "@@{scaling_count}@@", "type": "", "scaling_type": "SCALEOUT"}, "timeout_secs": "0", "type": "SCALING", "variable_list": [], "uuid": "ec9aebfa-02ca-4918-975e-b3eacf873554"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_28fff97c_9794_4449_b296_3523101461e2", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_28fff97c_9794_4449_b296_3523101461e2", "uuid": "4a71e124-42b2-44ca-8563-872d7044714a"}, "message_list": [], "variable_list": [{"val_type": "STRING", "description": "", "name": "scaling_count", "type": "LOCAL", "value": "0", "label": "", "state": "ACTIVE", "attrs": {}, "editables": {"value": true}, "message_list": [], "uuid": "532e14f1-ac02-4def-94fa-c2c2d5048ac9"}], "uuid": "11a4cd69-7684-4a7a-a072-578b427b5cf2"}, "message_list": [], "name": "action_scaleout"}, {"description": "System action for scalein", "type": "system", "uuid": "cb56e9cf-354c-43f4-b219-755f05cacb90", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "28fff97c-9794-4449-b296-3523101461e2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__Deployment_Scalein_28fff97c_9794_4449_b296_3523101461e2", "uuid": "6c4bc3d6-229a-40c8-9d28-01c660236905"}], "name": "SYS_GEN__Composite_DAG_Deployment_28fff97c_9794_4449_b296_3523101461e2", "state": "ACTIVE", "attrs": {"edges": [], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "517c4137-588f-4b8e-9390-a7c575f4086a"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "28fff97c-9794-4449-b296-3523101461e2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Deployment_Scalein_28fff97c_9794_4449_b296_3523101461e2", "state": "ACTIVE", "attrs": {"scaling_count": "@@{scaling_count}@@", "type": "", "scaling_type": "SCALEIN"}, "timeout_secs": "0", "type": "SCALING", "variable_list": [], "uuid": "6c4bc3d6-229a-40c8-9d28-01c660236905"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_28fff97c_9794_4449_b296_3523101461e2", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_28fff97c_9794_4449_b296_3523101461e2", "uuid": "517c4137-588f-4b8e-9390-a7c575f4086a"}, "message_list": [], "variable_list": [{"val_type": "STRING", "description": "", "name": "scaling_count", "type": "LOCAL", "value": "0", "label": "", "state": "ACTIVE", "attrs": {}, "editables": {"value": true}, "message_list": [], "uuid": "6ee9aedf-ea10-4c6d-b6b0-f89ee14acf16"}], "uuid": "f5a8e07c-1b91-4bf9-bd3b-b7d749a7dfdb"}, "message_list": [], "name": "action_scalein"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "ec163d7f-2413-4651-90b2-630a1ad06bd2", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "28fff97c-9794-4449-b296-3523101461e2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "f6e2dafb-b491-487d-8c43-d23350beac7d"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "1cbf9bb4-74fe-41b8-9d37-3d7cdc4c96c3"}, {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "df898941-248d-4e4b-b6e9-5e919eed5056"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_43b2690d_ca2e_4580_813e_0ea73f68d970", "uuid": "1eeb1d7d-9953-4d8d-b359-8994da9d15d5"}, {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_28fff97c_9794_4449_b296_3523101461e2", "uuid": "c60a7346-0e15-4e0e-a5a7-adc4c34c2e27"}], "name": "SYS_GEN__Composite_DAG_Deployment_28fff97c_9794_4449_b296_3523101461e2", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "f6e2dafb-b491-487d-8c43-d23350beac7d"}, "edge_type": "inherent", "type": "", "uuid": "18cbd945-8539-4f51-bfba-dc7d9f013794", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "1cbf9bb4-74fe-41b8-9d37-3d7cdc4c96c3"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_43b2690d_ca2e_4580_813e_0ea73f68d970", "uuid": "1eeb1d7d-9953-4d8d-b359-8994da9d15d5"}, "edge_type": "inherent", "type": "", "uuid": "bd3874e6-8837-40d2-b1d1-9773dbb224d4", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_28fff97c_9794_4449_b296_3523101461e2", "uuid": "c60a7346-0e15-4e0e-a5a7-adc4c34c2e27"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "1cbf9bb4-74fe-41b8-9d37-3d7cdc4c96c3"}, "edge_type": "inherent", "type": "", "uuid": "3be9b432-3647-4e37-a0ad-c1bf162826d9", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "df898941-248d-4e4b-b6e9-5e919eed5056"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "df898941-248d-4e4b-b6e9-5e919eed5056"}, "edge_type": "inherent", "type": "", "uuid": "2b9c38cd-fe26-4152-a403-9fb5aa2cbcc9", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_28fff97c_9794_4449_b296_3523101461e2", "uuid": "c60a7346-0e15-4e0e-a5a7-adc4c34c2e27"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "df898941-248d-4e4b-b6e9-5e919eed5056"}, "edge_type": "inherent", "type": "", "uuid": "3f32d71c-5212-4f2f-8dfa-d7712c24a53e", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_43b2690d_ca2e_4580_813e_0ea73f68d970", "uuid": "1eeb1d7d-9953-4d8d-b359-8994da9d15d5"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "dad1237e-5e9c-40ec-b07d-de11abf003a8"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "d4254ddc-5560-4e40-927a-7b25ce88f366"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "28fff97c-9794-4449-b296-3523101461e2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "25b466fc_runbook", "uuid": "a6a0c7c7-37f8-47d1-a2e1-12a5952d1066"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "f6e2dafb-b491-487d-8c43-d23350beac7d"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "d1998de7-8c52-486f-bfe7-f6404622e84d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_d1998de7_8c52_486f_bfe7_f6404622e84d", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "1cbf9bb4-74fe-41b8-9d37-3d7cdc4c96c3"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "b766185a-667f-488a-ba64-00194e53907a"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "6f0a0e37-864e-4128-b21f-0aa3bcdf2a77"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "df898941-248d-4e4b-b6e9-5e919eed5056"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "43b2690d-ca2e-4580-813e-0ea73f68d970"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_43b2690d_ca2e_4580_813e_0ea73f68d970", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "1eeb1d7d-9953-4d8d-b359-8994da9d15d5"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "28fff97c-9794-4449-b296-3523101461e2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Soft_Delete_28fff97c_9794_4449_b296_3523101461e2", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "c60a7346-0e15-4e0e-a5a7-adc4c34c2e27"}], "description": "", "name": "SYS_GEN__Runbook_Deployment_28fff97c_9794_4449_b296_3523101461e2", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Deployment_28fff97c_9794_4449_b296_3523101461e2", "uuid": "dad1237e-5e9c-40ec-b07d-de11abf003a8"}, "message_list": [], "variable_list": [], "uuid": "597f1c2e-10fb-4476-ba77-48f19ed93003"}, "message_list": [], "name": "action_soft_delete"}], "message_list": [], "editables": {"min_replicas": true, "max_replicas": true}, "name": "ff8e191c_deployment", "state": "ACTIVE", "max_replicas": "2", "package_local_reference_list": [{"kind": "app_package", "name": "K8SMP", "uuid": "d1998de7-8c52-486f-bfe7-f6404622e84d"}], "substrate_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "b766185a-667f-488a-ba64-00194e53907a"}, "min_replicas": "2", "variable_list": [], "uuid": "28fff97c-9794-4449-b296-3523101461e2"}], "description": "", "action_list": [{"description": "System action for creating an application", "type": "system", "uuid": "d5dfc698-9206-49e9-ae63-632578295cad", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_profile", "name": "Nutanix", "uuid": "0706a107-cf7e-49c5-b822-300e60f95085"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__DE_Provision_28fff97c_9794_4449_b296_3523101461e2", "uuid": "47212949-715f-49ff-a78a-9c1f64f91145"}, {"kind": "app_task", "name": "SYS_GEN__DE_Provision_ff94efe8_2c46_4f35_862f_db430c239c7e", "uuid": "0a93f137-8e6b-48d6-bbde-a415a0ab73cf"}, {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "uuid": "28ecdc28-2696-461f-a63a-a05d58bd7f8e"}, {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "uuid": "5badd5d8-0a5a-48a3-926c-d0988ac78b21"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "349d6086-991a-418c-b96b-3a53686ffac5"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "12fc4842-c51f-4cef-a6ef-8124a31093e5"}, {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "bc781c97-ed77-44e5-8f56-e1946130aef1"}, {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "ac4e631c-b276-4790-a335-5cc6fbbe8831"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "64f420dc-5484-4f88-b236-14cc681eeb3f"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "ec188992-1764-4864-b177-ff8529cfb5be"}, {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "85ebd293-5caf-4530-b1a0-c62a21ac7569"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "660d919a-cced-4a53-aee9-8271464c6e22"}], "name": "SYS_GEN__Composite_DAG_Application_0706a107_cf7e_49c5_b822_300e60f95085", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "85ebd293-5caf-4530-b1a0-c62a21ac7569"}, "edge_type": "inherent", "type": "", "uuid": "29124cfb-0262-4952-a417-0e8a9ac47e8d", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "660d919a-cced-4a53-aee9-8271464c6e22"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "ac4e631c-b276-4790-a335-5cc6fbbe8831"}, "edge_type": "inherent", "type": "", "uuid": "a7d6d1b1-b122-4d65-b9c0-43d779c3b68f", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "85ebd293-5caf-4530-b1a0-c62a21ac7569"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "12fc4842-c51f-4cef-a6ef-8124a31093e5"}, "edge_type": "inherent", "type": "", "uuid": "ba88621b-97d3-40dc-9b83-dc75b0162918", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "ac4e631c-b276-4790-a335-5cc6fbbe8831"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Provision_ff94efe8_2c46_4f35_862f_db430c239c7e", "uuid": "0a93f137-8e6b-48d6-bbde-a415a0ab73cf"}, "edge_type": "inherent", "type": "", "uuid": "6230320e-0010-4c81-86b4-bd24ff3ea8f6", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "12fc4842-c51f-4cef-a6ef-8124a31093e5"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "uuid": "5badd5d8-0a5a-48a3-926c-d0988ac78b21"}, "edge_type": "inherent", "type": "", "uuid": "5f9edaf7-4583-4ac6-8bb1-9f221d10ee85", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "12fc4842-c51f-4cef-a6ef-8124a31093e5"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Provision_ff94efe8_2c46_4f35_862f_db430c239c7e", "uuid": "0a93f137-8e6b-48d6-bbde-a415a0ab73cf"}, "edge_type": "inherent", "type": "", "uuid": "89aa97f4-9c9a-4638-9d8d-873f180a86ad", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "uuid": "5badd5d8-0a5a-48a3-926c-d0988ac78b21"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "64f420dc-5484-4f88-b236-14cc681eeb3f"}, "edge_type": "inherent", "type": "", "uuid": "21f48b9c-a6c3-44e7-96d6-00bd6b2e6807", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "ec188992-1764-4864-b177-ff8529cfb5be"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "bc781c97-ed77-44e5-8f56-e1946130aef1"}, "edge_type": "inherent", "type": "", "uuid": "4bb81978-32f3-48c2-a32b-69435502a3ed", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "64f420dc-5484-4f88-b236-14cc681eeb3f"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "349d6086-991a-418c-b96b-3a53686ffac5"}, "edge_type": "inherent", "type": "", "uuid": "796ce562-ec4e-4888-969e-afcd9639e787", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "bc781c97-ed77-44e5-8f56-e1946130aef1"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "uuid": "28ecdc28-2696-461f-a63a-a05d58bd7f8e"}, "edge_type": "inherent", "type": "", "uuid": "8839c7e1-8e34-462e-bf06-62482315b847", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "349d6086-991a-418c-b96b-3a53686ffac5"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Provision_28fff97c_9794_4449_b296_3523101461e2", "uuid": "47212949-715f-49ff-a78a-9c1f64f91145"}, "edge_type": "inherent", "type": "", "uuid": "68d6f931-9410-4a87-a307-def0f4a5d0aa", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "349d6086-991a-418c-b96b-3a53686ffac5"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Provision_28fff97c_9794_4449_b296_3523101461e2", "uuid": "47212949-715f-49ff-a78a-9c1f64f91145"}, "edge_type": "inherent", "type": "", "uuid": "846f423a-d1b7-4d78-9779-3fcb450e7fd1", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "uuid": "28ecdc28-2696-461f-a63a-a05d58bd7f8e"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "12fc4842-c51f-4cef-a6ef-8124a31093e5"}, "edge_type": "dependency", "type": "", "uuid": "7587d1bc-fea5-407a-92d1-83e50eb74547", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "bc781c97-ed77-44e5-8f56-e1946130aef1"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "349d6086-991a-418c-b96b-3a53686ffac5"}, "edge_type": "dependency", "type": "", "uuid": "d233aedf-86c0-45e4-b8fe-24209ff29e1e", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__install_CRb_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "ac4e631c-b276-4790-a335-5cc6fbbe8831"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "12fc4842-c51f-4cef-a6ef-8124a31093e5"}, "edge_type": "dependency", "type": "", "uuid": "c169bfe3-691f-49aa-b185-083ffa59bd54", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "64f420dc-5484-4f88-b236-14cc681eeb3f"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "ec188992-1764-4864-b177-ff8529cfb5be"}, "edge_type": "dependency", "type": "", "uuid": "a1449aa2-359f-42bf-a873-f6acae290cff", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__create_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "85ebd293-5caf-4530-b1a0-c62a21ac7569"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "8e2e0e76-1382-4e6c-bf96-aaca854d8615"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "28fff97c-9794-4449-b296-3523101461e2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Provision_28fff97c_9794_4449_b296_3523101461e2", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "CREATE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "47212949-715f-49ff-a78a-9c1f64f91145"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Provision_ff94efe8_2c46_4f35_862f_db430c239c7e", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "CREATE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "0a93f137-8e6b-48d6-bbde-a415a0ab73cf"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "43b2690d-ca2e-4580-813e-0ea73f68d970"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "28fff97c-9794-4449-b296-3523101461e2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "uuid": "77bab59a-9c1c-4bda-9ed4-670425b97451"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "28ecdc28-2696-461f-a63a-a05d58bd7f8e"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "a56e1157-2c16-472e-9fb0-452fa9e02de3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "uuid": "730bb3b7-ed77-4f5f-9c95-7eda55226846"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "5badd5d8-0a5a-48a3-926c-d0988ac78b21"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "b766185a-667f-488a-ba64-00194e53907a"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "56a51e58-7d42-44f9-93cc-3169b1ed9a76"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "349d6086-991a-418c-b96b-3a53686ffac5"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "28a8843a-8ae9-4ed9-9a2e-f910fe59b444"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "7bf674a7-dbc0-4199-94f6-d4857d93570f"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "12fc4842-c51f-4cef-a6ef-8124a31093e5"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "d1998de7-8c52-486f-bfe7-f6404622e84d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "28fff97c-9794-4449-b296-3523101461e2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "5d57158a-3326-4949-99f7-d7e97903e380"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "bc781c97-ed77-44e5-8f56-e1946130aef1"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "ea79eea5-26bf-4dda-a359-17ac9ebb57aa"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__install_CRb_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "ed91111c-1d3f-4da5-a623-0f970e7dbdb3"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "ac4e631c-b276-4790-a335-5cc6fbbe8831"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "d4254ddc-5560-4e40-927a-7b25ce88f366"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "28fff97c-9794-4449-b296-3523101461e2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "658fecfa_runbook", "uuid": "321b7eca-6bed-4f30-9432-8dca6b84d02b"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "64f420dc-5484-4f88-b236-14cc681eeb3f"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "d4254ddc-5560-4e40-927a-7b25ce88f366"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "28fff97c-9794-4449-b296-3523101461e2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "6583643e_runbook", "uuid": "1395ad61-6541-456c-ab17-ee020c863928"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "ec188992-1764-4864-b177-ff8529cfb5be"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "65a78bcf-970b-472c-b501-866e109c8a56"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__create_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "80edfe72_runbook", "uuid": "181b2cc8-b196-482e-8988-0e6dce472c23"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "85ebd293-5caf-4530-b1a0-c62a21ac7569"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "65a78bcf-970b-472c-b501-866e109c8a56"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "ec49e982_runbook", "uuid": "d947e531-a020-4b99-9b4b-6f3fc665c5ae"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "660d919a-cced-4a53-aee9-8271464c6e22"}], "description": "", "name": "SYS_GEN__Runbook_Application_0706a107_cf7e_49c5_b822_300e60f95085", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Application_0706a107_cf7e_49c5_b822_300e60f95085", "uuid": "8e2e0e76-1382-4e6c-bf96-aaca854d8615"}, "message_list": [], "variable_list": [], "uuid": "ebfcc8bd-c991-4d3e-8735-491c78172337"}, "message_list": [], "name": "action_create"}, {"description": "System action for starting an application", "type": "system", "uuid": "9c984bed-3f08-4483-8301-85cee1065cb5", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_profile", "name": "Nutanix", "uuid": "0706a107-cf7e-49c5-b822-300e60f95085"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "82de1798-9d4c-4a30-b005-bd38eeefe28c"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "8c2e08c9-b3e0-4917-bc10-e3fc3692645d"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "67e9b99b-b40b-40a1-8f78-742d8ef113d0"}, {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "7d7f41da-868d-4797-b0c4-6f87c242d276"}], "name": "SYS_GEN__Composite_DAG_Application_0706a107_cf7e_49c5_b822_300e60f95085", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "82de1798-9d4c-4a30-b005-bd38eeefe28c"}, "edge_type": "inherent", "type": "", "uuid": "513cd532-0d5d-4f10-9b38-9d3ebd2c89d5", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "7d7f41da-868d-4797-b0c4-6f87c242d276"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "8c2e08c9-b3e0-4917-bc10-e3fc3692645d"}, "edge_type": "inherent", "type": "", "uuid": "8f35ef1a-c15f-4321-b592-50f83daa00f2", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "67e9b99b-b40b-40a1-8f78-742d8ef113d0"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "82de1798-9d4c-4a30-b005-bd38eeefe28c"}, "edge_type": "create_action_edge", "type": "", "uuid": "da3f5f74-a893-4c70-a954-cd88dd65f363", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "67e9b99b-b40b-40a1-8f78-742d8ef113d0"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "67e9b99b-b40b-40a1-8f78-742d8ef113d0"}, "edge_type": "create_action_edge", "type": "", "uuid": "fd29bfa1-aca2-4017-aecc-a08987bed191", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__start_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "7d7f41da-868d-4797-b0c4-6f87c242d276"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "a00044d9-54cf-4287-9e88-193b7a091a4f"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "28a8843a-8ae9-4ed9-9a2e-f910fe59b444"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "1665c5c3-f61d-4389-bea5-2f079115b2ae"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "82de1798-9d4c-4a30-b005-bd38eeefe28c"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "b766185a-667f-488a-ba64-00194e53907a"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "684fbbe2-88ed-4031-aad1-635be044561e"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "8c2e08c9-b3e0-4917-bc10-e3fc3692645d"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "d4254ddc-5560-4e40-927a-7b25ce88f366"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "28fff97c-9794-4449-b296-3523101461e2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "6583643e_runbook", "uuid": "1395ad61-6541-456c-ab17-ee020c863928"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "67e9b99b-b40b-40a1-8f78-742d8ef113d0"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "65a78bcf-970b-472c-b501-866e109c8a56"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__start_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "ec49e982_runbook", "uuid": "d947e531-a020-4b99-9b4b-6f3fc665c5ae"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "7d7f41da-868d-4797-b0c4-6f87c242d276"}], "description": "", "name": "SYS_GEN__Runbook_Application_0706a107_cf7e_49c5_b822_300e60f95085", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Application_0706a107_cf7e_49c5_b822_300e60f95085", "uuid": "a00044d9-54cf-4287-9e88-193b7a091a4f"}, "message_list": [], "variable_list": [], "uuid": "6332518b-dc3c-44ca-bc4a-443796c1aec8"}, "message_list": [], "name": "action_start"}, {"description": "System action for stopping an application", "type": "system", "uuid": "e155db5f-ceb9-43cd-87a4-7d35356d53ec", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_profile", "name": "Nutanix", "uuid": "0706a107-cf7e-49c5-b822-300e60f95085"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "c821cea2-58b8-487a-82cd-4cd8f48b4f4b"}, {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "f18a6a5c-3554-4406-9fa2-7c67087a9350"}, {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "5628a29f-4d48-4e62-8ad8-38497ca279f5"}, {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "3975e04c-ee31-4556-8140-faa9497b9511"}], "name": "SYS_GEN__Composite_DAG_Application_0706a107_cf7e_49c5_b822_300e60f95085", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "c821cea2-58b8-487a-82cd-4cd8f48b4f4b"}, "edge_type": "inherent", "type": "", "uuid": "c4e0fc82-bcbc-41ef-a2a5-a4787e8f1f0e", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "3975e04c-ee31-4556-8140-faa9497b9511"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "f18a6a5c-3554-4406-9fa2-7c67087a9350"}, "edge_type": "inherent", "type": "", "uuid": "561aca64-204a-4cc4-b0e5-d13dc24ddf3d", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "5628a29f-4d48-4e62-8ad8-38497ca279f5"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "f18a6a5c-3554-4406-9fa2-7c67087a9350"}, "edge_type": "create_action_edge", "type": "", "uuid": "641b73af-8d72-4e06-ab10-85e0de46d47d", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "3975e04c-ee31-4556-8140-faa9497b9511"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "c821cea2-58b8-487a-82cd-4cd8f48b4f4b"}, "edge_type": "create_action_edge", "type": "", "uuid": "3a3f6253-1740-4b0f-a05e-b542e94e35d3", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "f18a6a5c-3554-4406-9fa2-7c67087a9350"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "f1c047ce-91c5-41f2-b993-264aa392e05c"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "65a78bcf-970b-472c-b501-866e109c8a56"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "e34ef8d6_runbook", "uuid": "0a7823be-b563-467d-b056-78527970edc9"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "c821cea2-58b8-487a-82cd-4cd8f48b4f4b"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "d4254ddc-5560-4e40-927a-7b25ce88f366"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "28fff97c-9794-4449-b296-3523101461e2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "3cee8199_runbook", "uuid": "f624e457-58bc-4997-9618-a17583a38ca6"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "f18a6a5c-3554-4406-9fa2-7c67087a9350"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "b766185a-667f-488a-ba64-00194e53907a"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "4633a79e-82bd-44a8-acca-2a7a06b5e66e"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "5628a29f-4d48-4e62-8ad8-38497ca279f5"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "28a8843a-8ae9-4ed9-9a2e-f910fe59b444"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "d5a0b374-ee92-448d-aa15-17b91400fdd1"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "3975e04c-ee31-4556-8140-faa9497b9511"}], "description": "", "name": "SYS_GEN__Runbook_Application_0706a107_cf7e_49c5_b822_300e60f95085", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Application_0706a107_cf7e_49c5_b822_300e60f95085", "uuid": "f1c047ce-91c5-41f2-b993-264aa392e05c"}, "message_list": [], "variable_list": [], "uuid": "ee0209f0-1621-4637-b2ae-731d266b58d9"}, "message_list": [], "name": "action_stop"}, {"description": "System action for deleting an application. Deletes physical machines as well", "type": "system", "uuid": "7ac68a70-df55-4886-b5b8-aa1ce4083e42", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_profile", "name": "Nutanix", "uuid": "0706a107-cf7e-49c5-b822-300e60f95085"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "0d19f110-ca27-46ce-a63b-ad13a2340861"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "03519daa-5d62-4a2d-aef4-0c92f4fdd9a5"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "2d44a62f-b6d8-4c79-874b-67af338bf271"}, {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "af9c1f83-9abc-4713-9aab-14da1f96dc0c"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "420bdb52-3c32-4c65-9d2c-8153b4803dd3"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "781a9d50-627f-458b-b820-2a816fcce0c3"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "2d72d07c-688e-4de5-92c1-dbacebe4ba05"}, {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "2c327cbd-6dfe-4673-8089-798a01be1503"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "uuid": "0febeae3-62a5-40a3-8feb-dbbbcee89f2e"}, {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "uuid": "8e1fa6fc-05e1-4478-8739-47bfa54b5a2c"}, {"kind": "app_task", "name": "SYS_GEN__DE_Delete_28fff97c_9794_4449_b296_3523101461e2", "uuid": "d4e7ba75-cd3f-4dd7-b86b-1f0a38d5cfe8"}, {"kind": "app_task", "name": "SYS_GEN__DE_Delete_ff94efe8_2c46_4f35_862f_db430c239c7e", "uuid": "4c501feb-f5a6-41dc-9ad8-46cfb1404397"}], "name": "SYS_GEN__Composite_DAG_Application_0706a107_cf7e_49c5_b822_300e60f95085", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "0d19f110-ca27-46ce-a63b-ad13a2340861"}, "edge_type": "inherent", "type": "", "uuid": "63fad7ea-ab15-424f-a59b-61b6cd46abc8", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "03519daa-5d62-4a2d-aef4-0c92f4fdd9a5"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "03519daa-5d62-4a2d-aef4-0c92f4fdd9a5"}, "edge_type": "inherent", "type": "", "uuid": "e8dc9ed9-6615-4ec1-8c84-397a4d728b40", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "2d44a62f-b6d8-4c79-874b-67af338bf271"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "2d72d07c-688e-4de5-92c1-dbacebe4ba05"}, "edge_type": "inherent", "type": "", "uuid": "4b9a2313-6d78-44f9-b80a-6250b64c84e2", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Delete_ff94efe8_2c46_4f35_862f_db430c239c7e", "uuid": "4c501feb-f5a6-41dc-9ad8-46cfb1404397"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "2d44a62f-b6d8-4c79-874b-67af338bf271"}, "edge_type": "inherent", "type": "", "uuid": "6b675f2f-359d-4e04-9f4a-e7423ab02065", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "2d72d07c-688e-4de5-92c1-dbacebe4ba05"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "uuid": "0febeae3-62a5-40a3-8feb-dbbbcee89f2e"}, "edge_type": "inherent", "type": "", "uuid": "4658acc8-0fdd-4f82-bf98-6efbde9467ea", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Delete_ff94efe8_2c46_4f35_862f_db430c239c7e", "uuid": "4c501feb-f5a6-41dc-9ad8-46cfb1404397"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "2d72d07c-688e-4de5-92c1-dbacebe4ba05"}, "edge_type": "inherent", "type": "", "uuid": "c9fd8aea-8872-4104-b2d5-59669eedf442", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "uuid": "0febeae3-62a5-40a3-8feb-dbbbcee89f2e"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "af9c1f83-9abc-4713-9aab-14da1f96dc0c"}, "edge_type": "inherent", "type": "", "uuid": "f5873a5c-f18c-4e81-a1e3-41d37dd84d7e", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "420bdb52-3c32-4c65-9d2c-8153b4803dd3"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "420bdb52-3c32-4c65-9d2c-8153b4803dd3"}, "edge_type": "inherent", "type": "", "uuid": "1db494f8-35f1-4c2e-97cb-a44835f0caa1", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "781a9d50-627f-458b-b820-2a816fcce0c3"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "2c327cbd-6dfe-4673-8089-798a01be1503"}, "edge_type": "inherent", "type": "", "uuid": "edb672fe-2f3d-4ed5-bd91-984956a8f6d7", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "uuid": "8e1fa6fc-05e1-4478-8739-47bfa54b5a2c"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "781a9d50-627f-458b-b820-2a816fcce0c3"}, "edge_type": "inherent", "type": "", "uuid": "fd812a5c-9ada-483a-ac33-6ebe41b94e2b", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "2c327cbd-6dfe-4673-8089-798a01be1503"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "2c327cbd-6dfe-4673-8089-798a01be1503"}, "edge_type": "inherent", "type": "", "uuid": "3d39ce12-81f1-45c4-9f13-6334a97056ef", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Delete_28fff97c_9794_4449_b296_3523101461e2", "uuid": "d4e7ba75-cd3f-4dd7-b86b-1f0a38d5cfe8"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "uuid": "8e1fa6fc-05e1-4478-8739-47bfa54b5a2c"}, "edge_type": "inherent", "type": "", "uuid": "295fa694-0325-41d1-9a3c-9db33899fb47", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Delete_28fff97c_9794_4449_b296_3523101461e2", "uuid": "d4e7ba75-cd3f-4dd7-b86b-1f0a38d5cfe8"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "781a9d50-627f-458b-b820-2a816fcce0c3"}, "edge_type": "create_action_edge", "type": "", "uuid": "c6668e5d-3f11-4ff4-b05c-ed1ac87e351c", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "2d72d07c-688e-4de5-92c1-dbacebe4ba05"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__uninstall_CRb_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "2d44a62f-b6d8-4c79-874b-67af338bf271"}, "edge_type": "create_action_edge", "type": "", "uuid": "ce97de52-ac20-4c65-ae8f-1f4d453467d1", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "2c327cbd-6dfe-4673-8089-798a01be1503"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "420bdb52-3c32-4c65-9d2c-8153b4803dd3"}, "edge_type": "create_action_edge", "type": "", "uuid": "56a0cbfb-e652-42b2-b9cf-5ffeb443e036", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "2d72d07c-688e-4de5-92c1-dbacebe4ba05"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__delete_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "03519daa-5d62-4a2d-aef4-0c92f4fdd9a5"}, "edge_type": "create_action_edge", "type": "", "uuid": "bb2e74ce-cd2a-42ce-a392-8e2b707bd791", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__stop_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "af9c1f83-9abc-4713-9aab-14da1f96dc0c"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "473abb9f-d108-4ecf-aa57-85edefac5bf3"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "65a78bcf-970b-472c-b501-866e109c8a56"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "e34ef8d6_runbook", "uuid": "0a7823be-b563-467d-b056-78527970edc9"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "0d19f110-ca27-46ce-a63b-ad13a2340861"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "65a78bcf-970b-472c-b501-866e109c8a56"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "c9c07e72_runbook", "uuid": "70fffd70-6ca8-4bdc-bb8e-29b8b064262a"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "03519daa-5d62-4a2d-aef4-0c92f4fdd9a5"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "ea79eea5-26bf-4dda-a359-17ac9ebb57aa"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "ba457547-e01a-44b0-9160-34251eb044d3"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "2d44a62f-b6d8-4c79-874b-67af338bf271"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "d4254ddc-5560-4e40-927a-7b25ce88f366"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__stop_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "28fff97c-9794-4449-b296-3523101461e2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "3cee8199_runbook", "uuid": "f624e457-58bc-4997-9618-a17583a38ca6"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "af9c1f83-9abc-4713-9aab-14da1f96dc0c"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "d4254ddc-5560-4e40-927a-7b25ce88f366"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "28fff97c-9794-4449-b296-3523101461e2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "4356ce2d_runbook", "uuid": "5614b92c-76f5-48e1-ad08-8888fecb9ff0"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "420bdb52-3c32-4c65-9d2c-8153b4803dd3"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "d1998de7-8c52-486f-bfe7-f6404622e84d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "28fff97c-9794-4449-b296-3523101461e2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "3f283f0c-0930-4ba2-8df3-fd241ddef9f3"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "781a9d50-627f-458b-b820-2a816fcce0c3"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "28a8843a-8ae9-4ed9-9a2e-f910fe59b444"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "4860f0fc-1d79-4439-b939-aaecab0704d4"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "2d72d07c-688e-4de5-92c1-dbacebe4ba05"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "b766185a-667f-488a-ba64-00194e53907a"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__delete_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "840bffcb-9d24-4f4b-881b-c440fd48b345"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "2c327cbd-6dfe-4673-8089-798a01be1503"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "a56e1157-2c16-472e-9fb0-452fa9e02de3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_a56e1157_2c16_472e_9fb0_452fa9e02de3", "uuid": "8c45d1a8-b1e4-4354-80d0-b1df3b9302eb"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "0febeae3-62a5-40a3-8feb-dbbbcee89f2e"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "43b2690d-ca2e-4580-813e-0ea73f68d970"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__uninstall_CRb_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "28fff97c-9794-4449-b296-3523101461e2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Package_43b2690d_ca2e_4580_813e_0ea73f68d970", "uuid": "1eab1708-b4df-4b93-bc88-f2c57956b8e1"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "8e1fa6fc-05e1-4478-8739-47bfa54b5a2c"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "28fff97c-9794-4449-b296-3523101461e2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Delete_28fff97c_9794_4449_b296_3523101461e2", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "d4e7ba75-cd3f-4dd7-b86b-1f0a38d5cfe8"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Delete_ff94efe8_2c46_4f35_862f_db430c239c7e", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "4c501feb-f5a6-41dc-9ad8-46cfb1404397"}], "description": "", "name": "SYS_GEN__Runbook_Application_0706a107_cf7e_49c5_b822_300e60f95085", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Application_0706a107_cf7e_49c5_b822_300e60f95085", "uuid": "473abb9f-d108-4ecf-aa57-85edefac5bf3"}, "message_list": [], "variable_list": [], "uuid": "1ff7bd45-891e-4abb-b4ca-77b78b8c7b16"}, "message_list": [], "name": "action_delete"}, {"description": "System action for deleting an application. Does not delete physical machines", "type": "system", "uuid": "9ea9ac11-0dc5-4f1e-a809-75d0bee0da92", "state": "ACTIVE", "critical": true, "attrs": {}, "runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_profile", "name": "Nutanix", "uuid": "0706a107-cf7e-49c5-b822-300e60f95085"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [{"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "996921f3-6411-4204-805f-974c9193b727"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "d0f50ffc-b8fd-4d15-8af4-4ce9fab3c1bf"}, {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "13d1c7de-91c8-41ff-bd9c-c3717b3ca3df"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "aaf3046c-97b8-4513-8353-22f5546a006b"}, {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "dab5bebb-e28b-48cf-bb49-9b42db958c1b"}, {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "b009edcc-4d21-41d7-998e-8455060ebb69"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_a56e1157_2c16_472e_9fb0_452fa9e02de3", "uuid": "059deea8-562d-4b5c-a746-4860fdd674f3"}, {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_43b2690d_ca2e_4580_813e_0ea73f68d970", "uuid": "860872d0-35ef-4818-a67a-ee3640099348"}, {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_28fff97c_9794_4449_b296_3523101461e2", "uuid": "c0a9594d-b20d-4ef0-b91b-a6ef7d6febb8"}, {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_ff94efe8_2c46_4f35_862f_db430c239c7e", "uuid": "38d11813-81ae-48a1-983c-2cbd27b5536d"}], "name": "SYS_GEN__Composite_DAG_Application_0706a107_cf7e_49c5_b822_300e60f95085", "state": "ACTIVE", "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "996921f3-6411-4204-805f-974c9193b727"}, "edge_type": "inherent", "type": "", "uuid": "17800c07-8060-4694-b9d3-5c5fc0ea95b6", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "d0f50ffc-b8fd-4d15-8af4-4ce9fab3c1bf"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "dab5bebb-e28b-48cf-bb49-9b42db958c1b"}, "edge_type": "inherent", "type": "", "uuid": "20fe6af5-8c2b-4f29-a474-3808f75cd5c6", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_a56e1157_2c16_472e_9fb0_452fa9e02de3", "uuid": "059deea8-562d-4b5c-a746-4860fdd674f3"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "dab5bebb-e28b-48cf-bb49-9b42db958c1b"}, "edge_type": "inherent", "type": "", "uuid": "e4d3fec1-b10c-40e1-bc0b-bcc589c4933e", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_ff94efe8_2c46_4f35_862f_db430c239c7e", "uuid": "38d11813-81ae-48a1-983c-2cbd27b5536d"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "d0f50ffc-b8fd-4d15-8af4-4ce9fab3c1bf"}, "edge_type": "inherent", "type": "", "uuid": "e3e7e0c6-6b74-41d1-9a62-1fc350062f3d", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "dab5bebb-e28b-48cf-bb49-9b42db958c1b"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_a56e1157_2c16_472e_9fb0_452fa9e02de3", "uuid": "059deea8-562d-4b5c-a746-4860fdd674f3"}, "edge_type": "inherent", "type": "", "uuid": "27283cbb-fe93-4b0c-ad35-e3c920f6abf8", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_ff94efe8_2c46_4f35_862f_db430c239c7e", "uuid": "38d11813-81ae-48a1-983c-2cbd27b5536d"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "13d1c7de-91c8-41ff-bd9c-c3717b3ca3df"}, "edge_type": "inherent", "type": "", "uuid": "576c5bda-10e5-49e4-b3e6-2f5e727b1678", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "aaf3046c-97b8-4513-8353-22f5546a006b"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_43b2690d_ca2e_4580_813e_0ea73f68d970", "uuid": "860872d0-35ef-4818-a67a-ee3640099348"}, "edge_type": "inherent", "type": "", "uuid": "69676431-ea09-4d85-8e02-13b0b6ae42ad", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_28fff97c_9794_4449_b296_3523101461e2", "uuid": "c0a9594d-b20d-4ef0-b91b-a6ef7d6febb8"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "aaf3046c-97b8-4513-8353-22f5546a006b"}, "edge_type": "inherent", "type": "", "uuid": "55264481-c663-40b7-8948-a6cc2a2c9ddd", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "b009edcc-4d21-41d7-998e-8455060ebb69"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "b009edcc-4d21-41d7-998e-8455060ebb69"}, "edge_type": "inherent", "type": "", "uuid": "130d94de-fb27-4b1c-9f8b-08817af3eee4", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__DE_Soft_Delete_28fff97c_9794_4449_b296_3523101461e2", "uuid": "c0a9594d-b20d-4ef0-b91b-a6ef7d6febb8"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "b009edcc-4d21-41d7-998e-8455060ebb69"}, "edge_type": "inherent", "type": "", "uuid": "4dab7a64-eed8-4afb-8218-5bb587820977", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_43b2690d_ca2e_4580_813e_0ea73f68d970", "uuid": "860872d0-35ef-4818-a67a-ee3640099348"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_d1998de7_8c52_486f_bfe7_f6404622e84d", "uuid": "aaf3046c-97b8-4513-8353-22f5546a006b"}, "edge_type": "create_action_edge", "type": "", "uuid": "c886cafd-4261-4aff-b46c-ee7b4502d9a1", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "dab5bebb-e28b-48cf-bb49-9b42db958c1b"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__Package_Element_Delete_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "uuid": "d0f50ffc-b8fd-4d15-8af4-4ce9fab3c1bf"}, "edge_type": "create_action_edge", "type": "", "uuid": "810802a4-2b16-41b5-a84f-d332c42cb057", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "b009edcc-4d21-41d7-998e-8455060ebb69"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "13d1c7de-91c8-41ff-bd9c-c3717b3ca3df"}, "edge_type": "create_action_edge", "type": "", "uuid": "2cb4ee93-8024-4ee6-9fb9-55f0d5adc660", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "dab5bebb-e28b-48cf-bb49-9b42db958c1b"}}, {"from_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "uuid": "996921f3-6411-4204-805f-974c9193b727"}, "edge_type": "create_action_edge", "type": "", "uuid": "30b1c2bf-c922-4a4b-98cb-a1051e42cc85", "to_task_reference": {"kind": "app_task", "name": "SYS_GEN__soft_delete_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "uuid": "13d1c7de-91c8-41ff-bd9c-c3717b3ca3df"}}], "type": "DAG"}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "uuid": "6a69815e-fd97-491e-8533-2abcadc76bb4"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master", "uuid": "65a78bcf-970b-472c-b501-866e109c8a56"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Service_65a78bcf_970b_472c_b501_866e109c8a56", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "3c8f0554_runbook", "uuid": "c51a449f-4fda-4864-aafb-3d3803f64ee6"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "996921f3-6411-4204-805f-974c9193b727"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP", "uuid": "ea79eea5-26bf-4dda-a359-17ac9ebb57aa"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_ea79eea5_26bf_4dda_a359_17ac9ebb57aa", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "d0f50ffc-b8fd-4d15-8af4-4ce9fab3c1bf"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion", "uuid": "d4254ddc-5560-4e40-927a-7b25ce88f366"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Service_d4254ddc_5560_4e40_927a_7b25ce88f366", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "deployment_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "28fff97c-9794-4449-b296-3523101461e2"}, "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "25b466fc_runbook", "uuid": "a6a0c7c7-37f8-47d1-a2e1-12a5952d1066"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "13d1c7de-91c8-41ff-bd9c-c3717b3ca3df"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP", "uuid": "d1998de7-8c52-486f-bfe7-f6404622e84d"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_d1998de7_8c52_486f_bfe7_f6404622e84d", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "aaf3046c-97b8-4513-8353-22f5546a006b"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SC", "uuid": "28a8843a-8ae9-4ed9-9a2e-f910fe59b444"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_28a8843a_8ae9_4ed9_9a2e_f910fe59b444", "uuid": "e9da900a-5331-4b5e-9a38-46402e0645de"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "dab5bebb-e28b-48cf-bb49-9b42db958c1b"}, {"target_any_local_reference": {"kind": "app_substrate", "name": "K8SM", "uuid": "b766185a-667f-488a-ba64-00194e53907a"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__soft_delete_CRb_Substrate_b766185a_667f_488a_ba64_00194e53907a", "state": "ACTIVE", "attrs": {"type": "CALL_RUNBOOK", "inarg_list": [], "runbook_reference": {"kind": "app_runbook", "name": "SYS_GEN__Runbook_Substrate_b766185a_667f_488a_ba64_00194e53907a", "uuid": "6f0a0e37-864e-4128-b21f-0aa3bcdf2a77"}}, "timeout_secs": "0", "type": "CALL_RUNBOOK", "variable_list": [], "uuid": "b009edcc-4d21-41d7-998e-8455060ebb69"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "a56e1157-2c16-472e-9fb0-452fa9e02de3"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_a56e1157_2c16_472e_9fb0_452fa9e02de3", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "059deea8-562d-4b5c-a746-4860fdd674f3"}, {"target_any_local_reference": {"kind": "app_package", "name": "CENTOS_IMAGE_MINION", "uuid": "43b2690d-ca2e-4580-813e-0ea73f68d970"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__Package_Element_Delete_43b2690d_ca2e_4580_813e_0ea73f68d970", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_ELEMENT", "variable_list": [], "uuid": "860872d0-35ef-4818-a67a-ee3640099348"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "ff8e191c_deployment", "uuid": "28fff97c-9794-4449-b296-3523101461e2"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Soft_Delete_28fff97c_9794_4449_b296_3523101461e2", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "c0a9594d-b20d-4ef0-b91b-a6ef7d6febb8"}, {"target_any_local_reference": {"kind": "app_blueprint_deployment", "name": "d584b567_deployment", "uuid": "ff94efe8-2c46-4f35-862f-db430c239c7e"}, "retries": "0", "description": "", "message_list": [], "child_tasks_local_reference_list": [], "name": "SYS_GEN__DE_Soft_Delete_ff94efe8_2c46_4f35_862f_db430c239c7e", "state": "ACTIVE", "attrs": {"type": ""}, "timeout_secs": "0", "type": "SOFT_DELETE_DEPLOYMENT_ELEMENT", "variable_list": [], "uuid": "38d11813-81ae-48a1-983c-2cbd27b5536d"}], "description": "", "name": "SYS_GEN__Runbook_Application_0706a107_cf7e_49c5_b822_300e60f95085", "state": "ACTIVE", "main_task_local_reference": {"kind": "app_task", "name": "SYS_GEN__Composite_DAG_Application_0706a107_cf7e_49c5_b822_300e60f95085", "uuid": "6a69815e-fd97-491e-8533-2abcadc76bb4"}, "message_list": [], "variable_list": [], "uuid": "b6de3c25-bdcf-4532-9556-eaae1b225041"}, "message_list": [], "name": "action_soft_delete"}], "name": "Nutanix", "state": "ACTIVE", "message_list": [], "dependency_list": [{"getter_resource_kind": "PackageCfg", "setter_resource_attr": "address", "setter_resource_kind": "SubstrateCfg", "setter_resource_name": "K8SM", "action_name": "action_create", "action_resource_name": "Nutanix", "getter_resource_name": "K8SMP", "action_resource_kind": "ApplicationCfg"}, {"getter_resource_kind": "PackageCfg", "setter_resource_attr": "address", "setter_resource_kind": "SubstrateCfg", "setter_resource_name": "K8SC", "action_name": "action_create", "action_resource_name": "Nutanix", "getter_resource_name": "K8SMP", "action_resource_kind": "ApplicationCfg"}, {"getter_resource_kind": "PackageCfg", "setter_resource_attr": "address", "setter_resource_kind": "SubstrateCfg", "setter_resource_name": "K8SM", "action_name": "action_create", "action_resource_name": "Nutanix", "getter_resource_name": "K8SCP", "action_resource_kind": "ApplicationCfg"}, {"getter_resource_kind": "PackageCfg", "setter_resource_attr": "address", "setter_resource_kind": "SubstrateCfg", "setter_resource_name": "K8SC", "action_name": "action_create", "action_resource_name": "Nutanix", "getter_resource_name": "K8SCP", "action_resource_kind": "ApplicationCfg"}, {"getter_resource_kind": "ServiceCfg", "setter_resource_attr": "address", "setter_resource_kind": "SubstrateCfg", "setter_resource_name": "K8SC", "action_name": "action_create", "action_resource_name": "Nutanix", "getter_resource_name": "Kubernetes_Minion", "action_resource_kind": "ApplicationCfg"}, {"getter_resource_kind": "ServiceCfg", "setter_resource_attr": "COMPLETE", "setter_resource_kind": "ServiceCfg", "setter_resource_name": "Kubernetes_Minion", "action_name": "action_create", "action_resource_name": "Nutanix", "getter_resource_name": "Kubernetes_Master", "action_resource_kind": "ApplicationCfg"}, {"getter_resource_kind": "ServiceCfg", "setter_resource_attr": "COMPLETE", "setter_resource_kind": "ServiceCfg", "setter_resource_name": "Kubernetes_Minion", "action_name": "action_start", "action_resource_name": "Nutanix", "getter_resource_name": "Kubernetes_Master", "action_resource_kind": "ApplicationCfg"}, {"getter_resource_kind": "PackageCfg", "setter_resource_attr": "address", "setter_resource_kind": "SubstrateCfg", "setter_resource_name": "K8SC", "action_name": "action_create", "action_resource_name": "d584b567_deployment", "getter_resource_name": "K8SCP", "action_resource_kind": "DeploymentCfg"}, {"getter_resource_kind": "PackageCfg", "setter_resource_attr": "address", "setter_resource_kind": "SubstrateCfg", "setter_resource_name": "K8SM", "action_name": "action_create", "action_resource_name": "ff8e191c_deployment", "getter_resource_name": "K8SMP", "action_resource_kind": "DeploymentCfg"}], "variable_list": [{"val_type": "STRING", "description": "", "name": "KUBERNETES_VERSION", "type": "LOCAL", "value": "v1.7.7", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {}, "message_list": [], "uuid": "a73349c6-8706-4328-a532-21b66e9c2a0b"}, {"val_type": "STRING", "description": "", "name": "CLUSTER_SUBNET", "type": "LOCAL", "value": "10.200.0.0/16", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "e51a1afe-3b63-4a06-ba1a-3c852ce6ed52"}, {"val_type": "STRING", "description": "", "name": "SERVICE_SUBNET", "type": "LOCAL", "value": "10.32.0.0/24", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "c1e76de8-9df7-43ca-a028-547ef48af404"}, {"val_type": "STRING", "description": "", "name": "KUBE_CLUSTER_DNS", "type": "LOCAL", "value": "10.32.0.10", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "05c7d3c5-18e4-4130-8814-1b98fccae270"}, {"val_type": "STRING", "description": "", "name": "PRISM_CLUSTER_IP", "type": "LOCAL", "value": "10.1.174.139", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "f8b765bc-90aa-4df9-9ce9-16387afe94a4"}, {"val_type": "STRING", "description": "", "name": "PRISM_DATA_SERVICE_IP", "type": "LOCAL", "value": "10.1.174.227", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "9abfb1ae-e3b5-41a9-828c-14aea505e70a"}, {"val_type": "STRING", "description": "", "name": "PRISM_USERNAME", "type": "LOCAL", "value": "admin", "label": "", "state": "ACTIVE", "attrs": {}, "editables": {"value": true}, "message_list": [], "uuid": "07ac825d-21fc-4b48-a93a-9ca60975e015"}, {"val_type": "STRING", "description": "", "name": "PRISM_PASSWORD", "type": "SECRET", "value": "", "label": "", "state": "ACTIVE", "attrs": {"is_secret_modified": false, "secret_reference": {"uuid": "18e5ba40-5f54-413a-825f-9e0a91471b7b"}, "type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "17d9a816-808d-47ab-9a4b-8f39de36d19b"}, {"val_type": "STRING", "description": "", "name": "CONTAINER_NAME", "type": "LOCAL", "value": "k8demo", "label": "", "state": "ACTIVE", "attrs": {"type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "9698f899-8873-4bac-87dc-5292c1e21da3"}, {"val_type": "STRING", "description": "", "name": "INSTANCE_PUBLIC_KEY", "type": "SECRET", "value": "", "label": "", "state": "ACTIVE", "attrs": {"is_secret_modified": false, "secret_reference": {"uuid": "517fbb7d-2311-4aac-acd3-e8c4214dd4ce"}, "type": ""}, "editables": {"value": true}, "message_list": [], "uuid": "de02c7e9-0238-44cd-bcae-74ebe65ea0bb"}], "uuid": "0706a107-cf7e-49c5-b822-300e60f95085"}], "default_credential_local_reference": {"kind": "app_credential", "name": "CENTOS", "uuid": "0771aa80-129f-40f8-a3ce-daddd5122bc4"}, "type": "USER"}, "name": "K8sMarketplaceClone"}, "spec": {"description": "Accessibility: \n* https://[CONTROLLER_IP]:6443\n* Admin certificates are available in controller node $HOME/CA\n", "resources": {"service_definition_list": [{"singleton": false, "name": "Kubernetes_Master", "action_list": [{"critical": false, "type": "system", "description": "System action for creating an application", "name": "action_create", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [{"kind": "app_task", "name": "GenerateEncryptionKey"}, {"kind": "app_task", "name": "ConfigureController"}], "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "GenerateEncryptionKey"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "ConfigureController"}}], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "16c98103_dag"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#!/bin/bash\n\nENCRYPTION_KEY=$(head -c 32 /dev/urandom | base64)\necho \"kind: EncryptionConfig\napiVersion: v1\nresources:\n  - resources:\n      - secrets\n    providers:\n      - aescbc:\n          keys:\n            - name: key1\n              secret: ${ENCRYPTION_KEY}\n      - identity: {}\" | tee encryption-config.yaml", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "GenerateEncryptionKey"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\nINTERNAL_IP=@@{address}@@\nETCD_SERVER_PORT=2379\nETCD_CLIENT_PORT=2380\nMASTER_API_PORT=8080\nSERVICE_SUBNET=\"@@{SERVICE_SUBNET}@@\"\nCLUSTER_SUBNET=\"@@{CLUSTER_SUBNET}@@\"\n\n\ncount=0\nfor i in $(echo \"@@{address}@@\" | tr \",\" \"\\n\"); do\n  CON+=\"controller${count}=https://${i}:${ETCD_CLIENT_PORT}\",\n  ETCD+=\"https://${i}:${ETCD_SERVER_PORT}\",\n  count=$((count+1))\ndone\nALL_CONTROLLERS=$(echo $CON | sed  's/,$//')\nETCD_SERVERS=$(echo $ETCD | sed  's/,$//')\n\n# -*- Bootstrapping a H/A etcd cluster.\nETCD_NAME=controller@@{calm_array_index}@@\nsudo mkdir -p /etc/etcd/ /var/lib/etcd\ntar -xvf etcd-v3.2.6-linux-amd64.tar.gz\nsudo mv etcd-v3.2.6-linux-amd64/etcd* /usr/bin/\nsudo cp ca.pem kubernetes-key.pem kubernetes.pem /etc/etcd/\nrm -rf etcd-v3.2.6-linux-amd64*\n\necho \"[Unit]\nDescription=etcd\nDocumentation=https://github.com/coreos\n\n[Service]\nExecStart=/usr/bin/etcd \\\\\n  --name ${ETCD_NAME} \\\\\n  --cert-file=/etc/etcd/kubernetes.pem \\\\\n  --key-file=/etc/etcd/kubernetes-key.pem \\\\\n  --peer-cert-file=/etc/etcd/kubernetes.pem \\\\\n  --peer-key-file=/etc/etcd/kubernetes-key.pem \\\\\n  --trusted-ca-file=/etc/etcd/ca.pem \\\\\n  --peer-trusted-ca-file=/etc/etcd/ca.pem \\\\\n  --peer-client-cert-auth \\\\\n  --client-cert-auth \\\\\n  --initial-advertise-peer-urls https://${INTERNAL_IP}:${ETCD_CLIENT_PORT} \\\\\n  --listen-peer-urls https://${INTERNAL_IP}:${ETCD_CLIENT_PORT} \\\\\n  --listen-client-urls https://${INTERNAL_IP}:${ETCD_SERVER_PORT},http://127.0.0.1:${ETCD_SERVER_PORT} \\\\\n  --advertise-client-urls https://${INTERNAL_IP}:${ETCD_SERVER_PORT} \\\\\n  --initial-cluster-token etcd-cluster-0 \\\\\n  --initial-cluster ${ALL_CONTROLLERS} \\\\\n  --initial-cluster-state new \\\\\n  --data-dir=/var/lib/etcd\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/etcd.service\n\n# -*- Bootstrapping an H/A Kubernetes Control Plane\nsudo mkdir -p /var/lib/kubernetes/\nsudo mv kube-apiserver kube-controller-manager kube-scheduler /usr/bin/ \nsudo cp ca.pem /var/lib/kubernetes/\nsudo mv ca-key.pem kubernetes-key.pem kubernetes.pem encryption-config.yaml /var/lib/kubernetes/\n\necho \"[Unit]\nDescription=Kubernetes API Server\nDocumentation=https://github.com/GoogleCloudPlatform/kubernetes\n\n[Service]\nExecStart=/usr/bin/kube-apiserver \\\\\n  --admission-control=NamespaceLifecycle,LimitRanger,ServiceAccount,DefaultStorageClass,ResourceQuota \\\\\n  --advertise-address=${INTERNAL_IP} \\\\\n  --allow-privileged=true \\\\\n  --apiserver-count=3 \\\\\n  --audit-log-maxage=30 \\\\\n  --audit-log-maxbackup=3 \\\\\n  --audit-log-maxsize=100 \\\\\n  --audit-log-path=/var/lib/audit.log \\\\\n  --authorization-mode=RBAC \\\\\n  --bind-address=0.0.0.0 \\\\\n  --client-ca-file=/var/lib/kubernetes/ca.pem \\\\\n  --enable-swagger-ui=true \\\\\n  --etcd-cafile=/var/lib/kubernetes/ca.pem \\\\\n  --etcd-certfile=/var/lib/kubernetes/kubernetes.pem \\\\\n  --etcd-keyfile=/var/lib/kubernetes/kubernetes-key.pem \\\\\n  --etcd-servers=${ETCD_SERVERS} \\\\\n  --event-ttl=1h \\\\\n  --experimental-encryption-provider-config=/var/lib/kubernetes/encryption-config.yaml \\\\\n  --insecure-bind-address=0.0.0.0 \\\\\n  --kubelet-certificate-authority=/var/lib/kubernetes/ca.pem \\\\\n  --kubelet-client-certificate=/var/lib/kubernetes/kubernetes.pem \\\\\n  --kubelet-client-key=/var/lib/kubernetes/kubernetes-key.pem \\\\\n  --kubelet-https=true \\\\\n  --runtime-config=rbac.authorization.k8s.io/v1alpha1 \\\\\n  --service-account-key-file=/var/lib/kubernetes/ca-key.pem \\\\\n  --service-cluster-ip-range=${SERVICE_SUBNET} \\\\\n  --service-node-port-range=30000-32767 \\\\\n  --tls-cert-file=/var/lib/kubernetes/kubernetes.pem \\\\\n  --tls-private-key-file=/var/lib/kubernetes/kubernetes-key.pem \\\\\n  --v=2\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/kube-apiserver.service\n\necho \"[Unit]\nDescription=Kubernetes Controller Manager\nDocumentation=https://github.com/GoogleCloudPlatform/kubernetes\n\n[Service]\nExecStart=/usr/bin/kube-controller-manager \\\\\n  --address=0.0.0.0 \\\\\n  --allocate-node-cidrs=true \\\\\n  --cluster-cidr=${CLUSTER_SUBNET} \\\\\n  --cluster-name=kubernetes \\\\\n  --cluster-signing-cert-file=/var/lib/kubernetes/ca.pem \\\\\n  --cluster-signing-key-file=/var/lib/kubernetes/ca-key.pem \\\\\n  --leader-elect=true \\\\\n  --master=http://${INTERNAL_IP}:${MASTER_API_PORT} \\\\\n  --root-ca-file=/var/lib/kubernetes/ca.pem \\\\\n  --service-account-private-key-file=/var/lib/kubernetes/ca-key.pem \\\\\n  --service-cluster-ip-range=${SERVICE_SUBNET} \\\\\n  --v=2\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/kube-controller-manager.service\n\necho \"[Unit]\nDescription=Kubernetes Scheduler\nDocumentation=https://github.com/GoogleCloudPlatform/kubernetes\n\n[Service]\nExecStart=/usr/bin/kube-scheduler \\\\\n  --leader-elect=true \\\\\n  --master=http://${INTERNAL_IP}:${MASTER_API_PORT} \\\\\n  --v=2\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/kube-scheduler.service\n\nsudo systemctl daemon-reload\nsudo systemctl enable etcd\nsudo systemctl start etcd\nsleep 5\nsudo systemctl enable kube-apiserver kube-controller-manager kube-scheduler\nsudo systemctl start kube-apiserver kube-controller-manager kube-scheduler", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "ConfigureController"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "16c98103_dag"}, "name": "80edfe72_runbook"}}, {"critical": false, "type": "system", "description": "System action for deleting an application. Deletes physical machines as well", "name": "action_delete", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "d83d296d_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "d83d296d_dag"}, "name": "c9c07e72_runbook"}}, {"critical": false, "type": "system", "description": "System action for starting an application", "name": "action_start", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [{"kind": "app_task", "name": "FinalSteps"}, {"kind": "app_task", "name": "SetupFlannel"}, {"kind": "app_task", "name": "SetupKubeDns"}, {"kind": "app_task", "name": "SetupNutanixVolumePlugin"}], "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "FinalSteps"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "SetupFlannel"}}, {"from_task_reference": {"kind": "app_task", "name": "SetupFlannel"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "SetupKubeDns"}}, {"from_task_reference": {"kind": "app_task", "name": "SetupKubeDns"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "SetupNutanixVolumePlugin"}}], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "3a7a0f2a_dag"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\necho \"@@{Kubernetes_Minion.COMPLETE}@@\"\nINTERNAL_IP=@@{address}@@\n\nsleep 20\n\nmkdir -p CA Net DNS\nmv *.pem *.csr *.json *.kubeconfig CA/\n\nkubectl config set-cluster kubernetes-prod-cluster --certificate-authority=$HOME/CA/ca.pem --embed-certs=true --server=https://${INTERNAL_IP}:6443\nkubectl config set-credentials admin --client-certificate=$HOME/CA/admin.pem --client-key=$HOME/CA/admin-key.pem\nkubectl config set-context kubernetes-prod-cluster --cluster=kubernetes-prod-cluster --user=admin\nkubectl config use-context kubernetes-prod-cluster\n\nkubectl get componentstatuses\nkubectl get nodes", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "FinalSteps"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\necho '---\nkind: ClusterRole\napiVersion: rbac.authorization.k8s.io/v1beta1\nmetadata:\n  name: flannel\nrules:\n  - apiGroups:\n      - \"\"\n    resources:\n      - pods\n    verbs:\n      - get\n  - apiGroups:\n      - \"\"\n    resources:\n      - nodes\n    verbs:\n      - list\n      - watch\n  - apiGroups:\n      - \"\"\n    resources:\n      - nodes/status\n    verbs:\n      - patch\n---\nkind: ClusterRoleBinding\napiVersion: rbac.authorization.k8s.io/v1beta1\nmetadata:\n  name: flannel\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: flannel\nsubjects:\n- kind: ServiceAccount\n  name: flannel\n  namespace: kube-system\n---\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: flannel\n  namespace: kube-system\n---\nkind: ConfigMap\napiVersion: v1\nmetadata:\n  name: kube-flannel-cfg\n  namespace: kube-system\n  labels:\n    tier: node\n    app: flannel\ndata:\n  cni-conf.json: |\n    {\n      \"name\": \"cbr0\",\n      \"type\": \"flannel\",\n      \"delegate\": {\n        \"isDefaultGateway\": true\n      }\n    }\n  net-conf.json: |\n    {\n      \"Network\": \"@@{CLUSTER_SUBNET}@@\",\n      \"Backend\": {\n        \"Type\": \"vxlan\"\n      }\n    }\n---\napiVersion: extensions/v1beta1\nkind: DaemonSet\nmetadata:\n  name: kube-flannel-ds\n  namespace: kube-system\n  labels:\n    tier: node\n    app: flannel\nspec:\n  template:\n    metadata:\n      labels:\n        tier: node\n        app: flannel\n    spec:\n      hostNetwork: true\n      nodeSelector:\n        beta.kubernetes.io/arch: amd64\n      tolerations:\n      - key: node-role.kubernetes.io/master\n        operator: Exists\n        effect: NoSchedule\n      serviceAccountName: flannel\n      initContainers:\n      - name: install-cni\n        image: quay.io/coreos/flannel:v0.9.0-amd64\n        command:\n        - cp\n        args:\n        - -f\n        - /etc/kube-flannel/cni-conf.json\n        - /etc/cni/net.d/10-flannel.conf\n        volumeMounts:\n        - name: cni\n          mountPath: /etc/cni/net.d\n        - name: flannel-cfg\n          mountPath: /etc/kube-flannel/\n      containers:\n      - name: kube-flannel\n        image: quay.io/coreos/flannel:v0.9.0-amd64\n        command: [ \"/opt/bin/flanneld\", \"--ip-masq\", \"--kube-subnet-mgr\" ]\n        securityContext:\n          privileged: true\n        env:\n        - name: POD_NAME\n          valueFrom:\n            fieldRef:\n              fieldPath: metadata.name\n        - name: POD_NAMESPACE\n          valueFrom:\n            fieldRef:\n              fieldPath: metadata.namespace\n        volumeMounts:\n        - name: run\n          mountPath: /run\n        - name: flannel-cfg\n          mountPath: /etc/kube-flannel/\n      volumes:\n        - name: run\n          hostPath:\n            path: /run\n        - name: cni\n          hostPath:\n            path: /etc/cni/net.d\n        - name: flannel-cfg\n          configMap:\n            name: kube-flannel-cfg' | tee kube-flannel.yml\nkubectl create -f kube-flannel.yml\nmv kube-flannel.yml Net/\n\nkubectl get nodes --output=jsonpath='{range .items[*]}{.spec.podCIDR} via {.status.addresses[?(@.type==\"InternalIP\")].address} {\"\\n\"}{end}' | sudo tee /etc/sysconfig/network-scripts/route-eth0\necho \"@@{SERVICE_SUBNET}@@ via $(kubectl get nodes kubernetes-minion0 --output=jsonpath='{.status.addresses[?(@.type==\"InternalIP\")].address}')\" | sudo tee -a /etc/sysconfig/network-scripts/route-eth0\nsleep 5\nsudo systemctl restart network", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "SetupFlannel"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\necho 'apiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: kube-dns\n  namespace: kube-system\n  labels:\n    kubernetes.io/cluster-service: \"true\"\n    addonmanager.kubernetes.io/mode: Reconcile\n---\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: kube-dns\n  namespace: kube-system\n  labels:\n    addonmanager.kubernetes.io/mode: EnsureExists\ndata:\n  upstreamNameservers: |\n    [\"8.8.8.8\", \"4.2.2.2\"]\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: kube-dns\n  namespace: kube-system\n  labels:\n    k8s-app: kube-dns\n    kubernetes.io/cluster-service: \"true\"\n    kubernetes.io/name: \"KubeDNS\"\nspec:\n  selector:\n    k8s-app: kube-dns\n  clusterIP: @@{KUBE_CLUSTER_DNS}@@\n  ports:\n    - name: dns\n      port: 53\n      protocol: UDP\n    - name: dns-tcp\n      port: 53\n      protocol: TCP\n---\napiVersion: extensions/v1beta1\nkind: Deployment\nmetadata:\n  name: kube-dns\n  namespace: kube-system\n  labels:\n    k8s-app: kube-dns\n    kubernetes.io/cluster-service: \"true\"\n    addonmanager.kubernetes.io/mode: Reconcile\nspec:\n  strategy:\n    rollingUpdate:\n      maxSurge: 10%\n      maxUnavailable: 0\n  selector:\n    matchLabels:\n      k8s-app: kube-dns\n  template:\n    metadata:\n      labels:\n        k8s-app: kube-dns\n      annotations:\n        scheduler.alpha.kubernetes.io/critical-pod: ''\n    spec:\n      tolerations:\n      - key: \"CriticalAddonsOnly\"\n        operator: \"Exists\"\n      volumes:\n      - name: kube-dns-config\n        configMap:\n          name: kube-dns\n          optional: true\n      containers:\n      - name: kubedns\n        image: gcr.io/google_containers/k8s-dns-kube-dns-amd64:1.14.4\n        resources:\n          limits:\n            memory: 170Mi\n          requests:\n            cpu: 100m\n            memory: 70Mi\n        livenessProbe:\n          httpGet:\n            path: /healthcheck/kubedns\n            port: 10054\n            scheme: HTTP\n          initialDelaySeconds: 60\n          timeoutSeconds: 5\n          successThreshold: 1\n          failureThreshold: 5\n        readinessProbe:\n          httpGet:\n            path: /readiness\n            port: 8081\n            scheme: HTTP\n          initialDelaySeconds: 3\n          timeoutSeconds: 5\n        args:\n        - --domain=cluster.local.\n        - --dns-port=10053\n        - --config-dir=/kube-dns-config\n        - --v=2\n        env:\n        - name: PROMETHEUS_PORT\n          value: \"10055\"\n        ports:\n        - containerPort: 10053\n          name: dns-local\n          protocol: UDP\n        - containerPort: 10053\n          name: dns-tcp-local\n          protocol: TCP\n        - containerPort: 10055\n          name: metrics\n          protocol: TCP\n        volumeMounts:\n        - name: kube-dns-config\n          mountPath: /kube-dns-config\n      - name: dnsmasq\n        image: gcr.io/google_containers/k8s-dns-dnsmasq-nanny-amd64:1.14.4\n        livenessProbe:\n          httpGet:\n            path: /healthcheck/dnsmasq\n            port: 10054\n            scheme: HTTP\n          initialDelaySeconds: 60\n          timeoutSeconds: 5\n          successThreshold: 1\n          failureThreshold: 5\n        args:\n        - -v=2\n        - -logtostderr\n        - -configDir=/etc/k8s/dns/dnsmasq-nanny\n        - -restartDnsmasq=true\n        - --\n        - -k\n        - --cache-size=1000\n        - --log-facility=-\n        - --server=/cluster.local./127.0.0.1#10053\n        - --server=/in-addr.arpa/127.0.0.1#10053\n        - --server=/ip6.arpa/127.0.0.1#10053\n        ports:\n        - containerPort: 53\n          name: dns\n          protocol: UDP\n        - containerPort: 53\n          name: dns-tcp\n          protocol: TCP\n        resources:\n          requests:\n            cpu: 150m\n            memory: 20Mi\n        volumeMounts:\n        - name: kube-dns-config\n          mountPath: /etc/k8s/dns/dnsmasq-nanny\n      - name: sidecar\n        image: gcr.io/google_containers/k8s-dns-sidecar-amd64:1.14.4\n        livenessProbe:\n          httpGet:\n            path: /metrics\n            port: 10054\n            scheme: HTTP\n          initialDelaySeconds: 60\n          timeoutSeconds: 5\n          successThreshold: 1\n          failureThreshold: 5\n        args:\n        - --v=2\n        - --logtostderr\n        - --probe=kubedns,127.0.0.1:10053,kubernetes.default.svc.cluster.local.,5,A\n        - --probe=dnsmasq,127.0.0.1:53,kubernetes.default.svc.cluster.local.,5,A\n        ports:\n        - containerPort: 10054\n          name: metrics\n          protocol: TCP\n        resources:\n          requests:\n            memory: 20Mi\n            cpu: 10m\n      dnsPolicy:\n      serviceAccountName: kube-dns' | tee kube-dns.yaml\n      \nkubectl create -f kube-dns.yaml\nmv kube-dns.yaml DNS/", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "SetupKubeDns"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\nif [ \"@@{PRISM_CLUSTER_IP}@@\" == \"\" ] && [ \"@@{PRISM_USERNAME}@@\" == \"\" ] && [ \"@@{PRISM_PASSWORD}@@\" == \"\" ]; then\n\texit\nfi\nmkdir volume_plugin\nNTNX_SECRET=$(echo -n \"@@{PRISM_USERNAME}@@:@@{PRISM_PASSWORD}@@\" | base64)\necho 'apiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: nutanixabs-provisioner\n---\nkind: ClusterRole\napiVersion: rbac.authorization.k8s.io/v1beta1\nmetadata:\n  name: nutanixabs-provisioner-runner\nrules:\n  - apiGroups: [\"\"]\n    resources: [\"persistentvolumes\"]\n    verbs: [\"get\", \"list\", \"watch\", \"create\", \"delete\"]\n  - apiGroups: [\"\"]\n    resources: [\"persistentvolumeclaims\"]\n    verbs: [\"get\", \"list\", \"watch\", \"update\"]\n  - apiGroups: [\"storage.k8s.io\"]\n    resources: [\"storageclasses\"]\n    verbs: [\"get\", \"list\", \"watch\"]\n  - apiGroups: [\"\"]\n    resources: [\"events\"]\n    verbs: [\"list\", \"watch\", \"create\", \"update\", \"patch\"]\n  - apiGroups: [\"\"]\n    resources: [\"services\"]\n    verbs: [\"get\"]\n  - apiGroups: [\"\"]\n    resources: [\"secrets\"]\n    verbs: [\"get\", \"create\", \"delete\"]\n---\nkind: ClusterRoleBinding\napiVersion: rbac.authorization.k8s.io/v1beta1\nmetadata:\n  name: run-nutanixabs-provisioner\nsubjects:\n  - kind: ServiceAccount\n    name: nutanixabs-provisioner\n    namespace: default\nroleRef:\n  kind: ClusterRole\n  name: nutanixabs-provisioner-runner\n  apiGroup: rbac.authorization.k8s.io\n---\napiVersion: extensions/v1beta1\nkind: Deployment\nmetadata:\n  name: nutanixabs-provisioner\nspec:\n  replicas: 1\n  strategy:\n    type: Recreate\n  template:\n    metadata:\n      labels:\n        app: nutanixabs-provisioner\n    spec:\n      serviceAccount: nutanixabs-provisioner\n      hostNetwork: true\n      containers:\n        -\n          image: \"subodh73/nutanixabs-provisioner\"\n          name: nutanixabs-provisioner\n          args: [\"--v=4\"]\n          imagePullPolicy: IfNotPresent\n---\napiVersion: v1\nkind: Secret\nmetadata:\n  name: ntnx-secret\n  namespace: default\ndata:\n  key: <SECRET>\ntype: nutanix/abs\n---\nkind: StorageClass\napiVersion: storage.k8s.io/v1\nmetadata:\n  name: silver \nprovisioner: nutanix/abs\nparameters:\n     prismEndPoint: @@{PRISM_CLUSTER_IP}@@:9440\n     dataServiceEndPoint: @@{PRISM_DATA_SERVICE_IP}@@:3260\n     user: @@{PRISM_USERNAME}@@\n     password: @@{PRISM_PASSWORD}@@\n     secretName: ntnx-secret\n     storageContainer: @@{CONTAINER_NAME}@@\n     fsType: ext4\n     chapAuthEnabled: \"false\"' | tee volume_plugin/nutanix-provisioner.yaml\n\nsed -i \"s/<SECRET>/${NTNX_SECRET}/\" volume_plugin/nutanix-provisioner.yaml\nkubectl create -f volume_plugin/nutanix-provisioner.yaml", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "SetupNutanixVolumePlugin"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "3a7a0f2a_dag"}, "name": "ec49e982_runbook"}}, {"critical": false, "type": "system", "description": "System action for stopping an application", "name": "action_stop", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "990f28cf_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "990f28cf_dag"}, "name": "e34ef8d6_runbook"}}, {"critical": false, "type": "system", "description": "System action for deleting an application. Does not delete physical machines", "name": "action_soft_delete", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Master"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "9afd1d8b_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "9afd1d8b_dag"}, "name": "3c8f0554_runbook"}}], "description": "", "port_list": [], "tier": "", "variable_list": [], "depends_on_list": []}, {"singleton": false, "name": "Kubernetes_Minion", "action_list": [{"critical": false, "type": "system", "description": "System action for creating an application", "name": "action_create", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [{"kind": "app_task", "name": "ConfigureMinion"}, {"kind": "app_task", "name": "SetFlag"}], "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "ConfigureMinion"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "SetFlag"}}], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "2a209891_dag"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\nCONTROLLER_IP=@@{K8SC.address}@@\nKUBERNETES_CLUSTER_DNS=\"@@{KUBE_CLUSTER_DNS}@@\"\nUSERNAME=\"@@{CENTOS.username}@@\"\nCLUSTER_SUBNET=\"@@{CLUSTER_SUBNET}@@\"\n\necho \"@@{CENTOS.secret}@@\" | tee centos.pem\nchmod 400 centos.pem\n\nsleep 60\n# -*- Bootstrapping Kubernetes Workers\nHOSTNAME=$(hostname -s)\nscp -i centos.pem -o StrictHostKeyChecking=no ${USERNAME}@${CONTROLLER_IP}:${HOSTNAME}*.pem ./\nscp -i centos.pem -o StrictHostKeyChecking=no ${USERNAME}@${CONTROLLER_IP}:${HOSTNAME}*.kubeconfig ./\nscp -i centos.pem -o StrictHostKeyChecking=no ${USERNAME}@${CONTROLLER_IP}:kube-proxy.kubeconfig ./\nscp -i centos.pem -o StrictHostKeyChecking=no ${USERNAME}@${CONTROLLER_IP}:ca.pem ./\n\nsudo mkdir -p /var/lib/{kubelet,kube-proxy,kubernetes} /var/run/kubernetes\nsudo mv kubectl kube-proxy kubelet /usr/bin/\n\nsudo mv ${HOSTNAME}-key.pem ${HOSTNAME}.pem /var/lib/kubelet/\nsudo mv ${HOSTNAME}.kubeconfig /var/lib/kubelet/kubeconfig\nsudo mv ca.pem /var/lib/kubernetes/\n\n# -*- Install Docker\ntar -xvf docker-1.12.6.tgz\nsudo cp docker/docker* /usr/bin/\necho \"[Unit]\nDescription=Docker Application Container Engine\nDocumentation=http://docs.docker.com\n\n[Service]\nExecStart=/usr/bin/docker daemon \\\\\n  --iptables=false \\\\\n  --ip-masq=false \\\\\n  --host=unix:///var/run/docker.sock \\\\\n  --log-level=error \\\\\n  --storage-driver=overlay\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/docker.service\n\necho \"[Unit]\nDescription=Kubernetes Kubelet\nDocumentation=https://github.com/GoogleCloudPlatform/kubernetes\nAfter=docker.service\nRequires=docker.service\n\n[Service]\nExecStart=/usr/bin/kubelet \\\n  --allow-privileged=true \\\n  --cluster-dns=${KUBERNETES_CLUSTER_DNS} \\\n  --cluster-domain=cluster.local \\\n  --container-runtime=docker \\\n  --enable-custom-metrics \\\n  --kubeconfig=/var/lib/kubelet/kubeconfig \\\n  --network-plugin=cni \\\n  --pod-cidr=${CLUSTER_SUBNET} \\\n  --register-node=true \\\n  --require-kubeconfig \\\n  --runtime-request-timeout=10m \\\n  --tls-cert-file=/var/lib/kubelet/${HOSTNAME}.pem \\\n  --tls-private-key-file=/var/lib/kubelet/${HOSTNAME}-key.pem \\\n  --v=2\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/kubelet.service\n\nsudo mv kube-proxy.kubeconfig /var/lib/kube-proxy/kubeconfig\n\necho \"[Unit]\nDescription=Kubernetes Kube Proxy\nDocumentation=https://github.com/GoogleCloudPlatform/kubernetes\n\n[Service]\nExecStart=/usr/bin/kube-proxy \\\\\n  --cluster-cidr=${CLUSTER_SUBNET} \\\\\n  --masquerade-all=true \\\n  --kubeconfig=/var/lib/kube-proxy/kubeconfig \\\\\n  --proxy-mode=iptables \\\\\n  --v=2\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\" | sudo tee /etc/systemd/system/kube-proxy.service\n\nsudo mkdir -p /etc/cni/net.d\necho '{\n  \"name\": \"cbr0\",\n  \"type\": \"flannel\",\n  \"delegate\": {\n    \"isDefaultGateway\": true\n  }\n}' | sudo tee /etc/cni/net.d/10-flannel.conf\n\nsudo mkdir -p /opt/cni/bin\nsudo tar -zxvf cni-plugins-amd64-v0.6.0.tgz -C /opt/cni/bin\n\n# -*- Configure Iscsi iqn\necho \"InitiatorName=iqn.1994-05.com.nutanix:k8s-worker\" | sudo tee /etc/iscsi/initiatorname.iscsi \n\nsudo systemctl daemon-reload\nsudo systemctl enable docker kubelet kube-proxy iscsid\nsudo systemctl start docker kubelet kube-proxy iscsid", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "ConfigureMinion"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#script\nprint \"COMPLETE=True\"", "eval_variables": ["COMPLETE"], "eval_scope": "local", "type": "", "script_type": "static"}, "timeout_secs": "0", "type": "SET_VARIABLE", "variable_list": [], "name": "SetFlag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "2a209891_dag"}, "name": "658fecfa_runbook"}}, {"critical": false, "type": "system", "description": "System action for deleting an application. Deletes physical machines as well", "name": "action_delete", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "1ca74521_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "1ca74521_dag"}, "name": "4356ce2d_runbook"}}, {"critical": false, "type": "system", "description": "System action for starting an application", "name": "action_start", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [{"kind": "app_task", "name": "Get Images"}, {"kind": "app_task", "name": "Load Images"}], "attrs": {"edges": [{"from_task_reference": {"kind": "app_task", "name": "Get Images"}, "edge_type": "user_defined", "type": "", "to_task_reference": {"kind": "app_task", "name": "Load Images"}}], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "983862b1_dag"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#!/bin/bash -ex\n\nmkdir images\ncd images\n\nwget http://\"@@{artifact_server}@@\"/artifacts/calmdemo-nginx-web-image-v1.2.tar.gz\nwget http://\"@@{artifact_server}@@\"/artifacts/calmdemo-nginx-web-image-v2.0.tar.gz\nwget http://\"@@{artifact_server}@@\"/artifacts/nodejs-mongo-ha-app-image.tar.gz\nwget http://\"@@{artifact_server}@@\"/artifacts/mongo-image-latest.tar.gz ", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "Get Images"}, {"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"exit_status": [], "script": "#!/bin/bash -ex\n\nsudo docker load -i images/calmdemo-nginx-web-image-v1.2.tar.gz\nsudo docker load -i images/calmdemo-nginx-web-image-v2.0.tar.gz \nsudo docker load -i images/nodejs-mongo-ha-app-image.tar.gz\nsudo docker load -i images/mongo-image-latest.tar.gz", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "timeout_secs": "0", "type": "EXEC", "variable_list": [], "name": "Load Images"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "983862b1_dag"}, "name": "6583643e_runbook"}}, {"critical": false, "type": "system", "description": "System action for stopping an application", "name": "action_stop", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "cba58264_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "cba58264_dag"}, "name": "3cee8199_runbook"}}, {"critical": false, "type": "system", "description": "System action for deleting an application. Does not delete physical machines", "name": "action_soft_delete", "runbook": {"variable_list": [], "task_definition_list": [{"target_any_local_reference": {"kind": "app_service", "name": "Kubernetes_Minion"}, "retries": "0", "description": "", "child_tasks_local_reference_list": [], "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "type": "DAG", "variable_list": [], "name": "389a6493_dag"}], "description": "", "main_task_local_reference": {"kind": "app_task", "name": "389a6493_dag"}, "name": "25b466fc_runbook"}}], "description": "", "port_list": [], "tier": "", "variable_list": [{"val_type": "STRING", "description": "", "value": "artifact-server.gso.lab", "label": "", "attrs": {"type": ""}, "type": "LOCAL", "name": "artifact_server"}], "depends_on_list": []}], "substrate_definition_list": [{"description": "", "action_list": [], "readiness_probe": {"connection_type": "SSH", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@", "disable_readiness_probe": false, "timeout_secs": "60", "connection_port": 22}, "editables": {"readiness_probe": {"connection_port": true, "timeout_secs": true}, "create_spec": {"name": true, "resources": {"nic_list": {"0": {"subnet_reference": true}}, "num_vcpus_per_socket": true, "num_sockets": true, "memory_size_mib": true, "guest_customization": true, "disk_list": {"0": {"device_properties": {"disk_address": {}}}}}}}, "os_type": "Linux", "type": "AHV_VM", "create_spec": {"name": "K8SC", "categories": "", "availability_zone_reference": null, "backup_policy": null, "type": "", "cluster_reference": null, "resources": {"nic_list": [{"nic_type": "NORMAL_NIC", "ip_endpoint_list": [], "network_function_chain_reference": null, "network_function_nic_type": "INGRESS", "mac_address": "", "subnet_reference": {"kind": "subnet", "type": "", "name": "", "uuid": "c313afa7-22ec-4571-b386-c747cfb68029"}, "type": ""}], "serial_port_list": [], "guest_tools": null, "num_vcpus_per_socket": 2, "num_sockets": 2, "gpu_list": [], "memory_size_mib": 2048, "parent_reference": null, "hardware_clock_timezone": "", "guest_customization": {"cloud_init": {"meta_data": "", "type": "", "user_data": "#cloud-config\nusers:\n  - name: centos\n    ssh-authorized-keys:\n      - @@{INSTANCE_PUBLIC_KEY}@@\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']"}, "type": "", "sysprep": null}, "power_state": "ON", "type": "", "boot_config": null, "disk_list": [{"data_source_reference": {"kind": "app_package", "type": "", "name": "CENTOS_IMAGE_CONTROLLER", "uuid": "a56e1157-2c16-472e-9fb0-452fa9e02de3"}, "type": "", "disk_size_mib": 1, "device_properties": {"type": "", "device_type": "DISK", "disk_address": {"adapter_type": "SCSI", "device_index": 1, "type": ""}}}]}}, "variable_list": [], "name": "K8SC"}, {"description": "", "action_list": [], "readiness_probe": {"connection_type": "SSH", "disable_readiness_probe": false, "timeout_secs": "60", "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@", "connection_port": 22, "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "editables": {"readiness_probe": {"connection_port": true, "timeout_secs": true}, "create_spec": {"name": true, "resources": {"nic_list": {"0": {"subnet_reference": true}}, "num_vcpus_per_socket": true, "num_sockets": true, "memory_size_mib": true, "guest_customization": true, "disk_list": {"1": {"disk_size_mib": true}, "3": {"disk_size_mib": true}, "2": {"disk_size_mib": true}}}}}, "os_type": "Linux", "type": "AHV_VM", "create_spec": {"name": "K8SM@@{calm_array_index}@@", "categories": "", "availability_zone_reference": null, "backup_policy": null, "type": "", "cluster_reference": null, "resources": {"nic_list": [{"nic_type": "NORMAL_NIC", "ip_endpoint_list": [], "network_function_chain_reference": null, "network_function_nic_type": "INGRESS", "mac_address": "", "subnet_reference": {"kind": "subnet", "type": "", "name": "", "uuid": "c313afa7-22ec-4571-b386-c747cfb68029"}, "type": ""}], "serial_port_list": [], "guest_tools": null, "num_vcpus_per_socket": 2, "num_sockets": 2, "gpu_list": [], "memory_size_mib": 2048, "parent_reference": null, "hardware_clock_timezone": "", "guest_customization": {"cloud_init": {"meta_data": "", "type": "", "user_data": "#cloud-config\nusers:\n  - name: centos\n    ssh-authorized-keys:\n      - @@{INSTANCE_PUBLIC_KEY}@@\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']"}, "type": "", "sysprep": null}, "power_state": "ON", "type": "", "boot_config": null, "disk_list": [{"data_source_reference": {"kind": "app_package", "type": "", "name": "CENTOS_IMAGE_MINION", "uuid": "43b2690d-ca2e-4580-813e-0ea73f68d970"}, "type": "", "disk_size_mib": 1, "device_properties": {"type": "", "device_type": "DISK", "disk_address": {"adapter_type": "SCSI", "device_index": 0, "type": ""}}}, {"data_source_reference": null, "type": "", "disk_size_mib": 10240, "device_properties": {"type": "", "device_type": "DISK", "disk_address": {"adapter_type": "SCSI", "device_index": 1, "type": ""}}}, {"data_source_reference": null, "type": "", "disk_size_mib": 10240, "device_properties": {"type": "", "device_type": "DISK", "disk_address": {"adapter_type": "SCSI", "device_index": 2, "type": ""}}}, {"data_source_reference": null, "type": "", "disk_size_mib": 10240, "device_properties": {"type": "", "device_type": "DISK", "disk_address": {"adapter_type": "SCSI", "device_index": 3, "type": ""}}}]}}, "variable_list": [], "name": "K8SM"}], "credential_definition_list": [{"username": "centos", "description": "", "secret": {"attrs": {"is_secret_modified": false, "secret_reference": {}}}, "editables": {"username": true, "secret": true}, "type": "KEY", "name": "CENTOS"}], "package_definition_list": [{"description": "", "action_list": [], "service_local_reference_list": [{"kind": "app_service", "name": "Kubernetes_Master"}], "version": "", "type": "DEB", "options": {"install_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP"}, "retries": "0", "description": "", "type": "DAG", "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageInstallTask"}], "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "message_list": [], "variable_list": [], "name": "eaae934f_dag"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP"}, "retries": "0", "description": "", "type": "EXEC", "child_tasks_local_reference_list": [], "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\nINTERNAL_IP=@@{address}@@\nMASTER_API_HTTPS=6443\nKUBERNETES_VERSION=\"@@{KUBERNETES_VERSION}@@\" \nSERVICE_SUBNET=\"@@{SERVICE_SUBNET}@@\"\n\nsudo hostnamectl set-hostname --static kubernetes-controller\necho \"${INTERNAL_IP} kubernetes-controller\" | sudo tee -a /etc/hosts\nsudo easy_install netaddr\nFIRST_IP_SERVICE_SUBNET=$(python -c \"from netaddr import * ; print IPNetwork('${SERVICE_SUBNET}')[1]\")\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\n  echo \"${ip} kubernetes-minion${count}\" | sudo tee -a /etc/hosts\n  count=$((count+1))\ndone\n\nsudo yum update -y\n\n# -*- Pre-requisites\nsudo yum install -y wget \n\nwget https://pkg.cfssl.org/R1.2/cfssl_linux-amd64\nwget https://pkg.cfssl.org/R1.2/cfssljson_linux-amd64\nchmod +x cfssljson_linux-amd64 cfssl_linux-amd64\nsudo mv cfssljson_linux-amd64 /usr/local/bin/cfssljson\nsudo mv cfssl_linux-amd64 /usr/local/bin/cfssl\nwget -q \"https://github.com/coreos/etcd/releases/download/v3.2.6/etcd-v3.2.6-linux-amd64.tar.gz\"\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kube-apiserver\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kube-controller-manager\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kube-scheduler\nwget https://storage.googleapis.com/kubernetes-release/release/${KUBERNETES_VERSION}/bin/linux/amd64/kubectl\nchmod +x kube-apiserver kube-controller-manager kube-scheduler kubectl\nsudo mv kubectl /usr/local/bin/\n\n# -*- Creating CA Certificates\n\necho '{\n  \"signing\": {\n    \"default\": {\n      \"expiry\": \"8760h\"\n    },\n    \"profiles\": {\n      \"kubernetes\": {\n        \"usages\": [\"signing\", \"key encipherment\", \"server auth\", \"client auth\"],\n        \"expiry\": \"8760h\"\n      }\n    }\n  }\n}' | tee ca-config.json\n\necho '{\n  \"CN\": \"Kubernetes\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"Kubernetes\",\n      \"OU\": \"CA\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee ca-csr.json\n\ncfssl gencert -initca ca-csr.json | cfssljson -bare ca\n\necho '{\n  \"CN\": \"admin\",\n  \"hosts\": [],\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"system:masters\",\n      \"OU\": \"Cluster\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee admin-csr.json\n\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes admin-csr.json | cfssljson -bare admin\n\n# -*- Generating minion certs.\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\ninstance=\"kubernetes-minion${count}\"\necho '{\n  \"CN\": \"system:node:${instance}\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"system:nodes\",\n      \"OU\": \"Kubernetes The Hard Way\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee ${instance}-csr.json\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -hostname=${instance},${ip} -profile=kubernetes ${instance}-csr.json | cfssljson -bare ${instance}\ncount=$((count+1))\ndone \n\n# -*- Creating kube-proxy certificates\n\necho '{\n  \"CN\": \"system:kube-proxy\",\n  \"hosts\": [],\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"system:node-proxier\",\n      \"OU\": \"Cluster\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee kube-proxy-csr.json\n\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes kube-proxy-csr.json | cfssljson -bare kube-proxy\n\necho '{\n  \"CN\": \"kubernetes\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"US\",\n      \"L\": \"Portland\",\n      \"O\": \"Kubernetes\",\n      \"OU\": \"Cluster\",\n      \"ST\": \"Oregon\"\n    }\n  ]\n}' | tee kubernetes-csr.json\n\ncfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -hostname=@@{K8SC.address}@@,${FIRST_IP_SERVICE_SUBNET},127.0.0.1,kubernetes.default -profile=kubernetes kubernetes-csr.json | cfssljson -bare kubernetes\n\n# -*- Setting up Authentication & authenticate using RBAC (Role-Based Access Control).\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\nkubectl config set-cluster kubernetes-prod-cluster --certificate-authority=ca.pem --embed-certs=true --server=https://${INTERNAL_IP}:${MASTER_API_HTTPS} --kubeconfig=kubernetes-minion${count}.kubeconfig\nkubectl config set-credentials system:node:kubernetes-minion${count} --client-certificate=kubernetes-minion${count}.pem --client-key=kubernetes-minion${count}-key.pem --embed-certs=true --kubeconfig=kubernetes-minion${count}.kubeconfig\nkubectl config set-context default --cluster=kubernetes-prod-cluster --user=system:node:kubernetes-minion${count} --kubeconfig=kubernetes-minion${count}.kubeconfig\nkubectl config use-context default --kubeconfig=kubernetes-minion${count}.kubeconfig\ncount=$((count+1))\ndone\nkubectl config set-cluster kubernetes-prod-cluster --certificate-authority=ca.pem --embed-certs=true --server=https://${INTERNAL_IP}:${MASTER_API_HTTPS} --kubeconfig=kube-proxy.kubeconfig\nkubectl config set-credentials kube-proxy --client-certificate=kube-proxy.pem --client-key=kube-proxy-key.pem --embed-certs=true --kubeconfig=kube-proxy.kubeconfig\nkubectl config set-context default --cluster=kubernetes-prod-cluster --user=kube-proxy --kubeconfig=kube-proxy.kubeconfig\n\nkubectl config use-context default --kubeconfig=kube-proxy.kubeconfig", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "timeout_secs": "0", "message_list": [], "variable_list": [], "name": "PackageInstallTask"}], "description": "", "state": "NOT_VALIDATED", "variable_list": [], "message_list": [], "main_task_local_reference": {"kind": "app_task", "name": "eaae934f_dag"}, "name": "250a0dd1_runbook"}, "type": "", "uninstall_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SCP"}, "retries": "0", "description": "", "type": "DAG", "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageUninstallTask"}], "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "message_list": [], "variable_list": [], "name": "cfa35d5b_dag"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SCP"}, "retries": "0", "description": "", "type": "EXEC", "child_tasks_local_reference_list": [], "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "timeout_secs": "0", "message_list": [], "variable_list": [], "name": "PackageUninstallTask"}], "description": "", "state": "NOT_VALIDATED", "variable_list": [], "message_list": [], "main_task_local_reference": {"kind": "app_task", "name": "cfa35d5b_dag"}, "name": "6f5a2b1c_runbook"}}, "variable_list": [], "name": "K8SCP"}, {"description": "", "action_list": [], "service_local_reference_list": [{"kind": "app_service", "name": "Kubernetes_Minion"}], "version": "", "type": "DEB", "options": {"install_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP"}, "retries": "0", "description": "", "type": "DAG", "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageInstallTask"}], "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "message_list": [], "variable_list": [], "name": "f9943e3a_dag"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP"}, "retries": "0", "description": "", "type": "EXEC", "child_tasks_local_reference_list": [], "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex\n\nsudo hostnamectl set-hostname --static kubernetes-minion@@{calm_array_index}@@\necho \"@@{K8SC.address}@@ kubernetes-controller\" | sudo tee -a /etc/hosts\n\ncount=0\nfor ip in $(echo \"@@{K8SM.address}@@\" | tr \",\" \"\\n\"); do\n\techo \"${ip} kubernetes-minion${count}\" | sudo tee -a /etc/hosts\n\tcount=$((count+1))\ndone\n\nsudo yum update -y\n\n# -*- Pre-requisites\nsudo yum install -y wget sshpass iscsi-initiator-utils socat\n\nwget https://get.docker.com/builds/Linux/x86_64/docker-1.12.6.tgz\nwget https://github.com/containernetworking/plugins/releases/download/v0.6.0/cni-plugins-amd64-v0.6.0.tgz\nwget https://storage.googleapis.com/kubernetes-release/release/@@{KUBERNETES_VERSION}@@/bin/linux/amd64/kubectl\nwget https://storage.googleapis.com/kubernetes-release/release/@@{KUBERNETES_VERSION}@@/bin/linux/amd64/kube-proxy\nwget https://storage.googleapis.com/kubernetes-release/release/@@{KUBERNETES_VERSION}@@/bin/linux/amd64/kubelet\nchmod +x kubectl kube-proxy kubelet\n\nsudo mkdir -p /var/lib/docker\nsudo yum install -y lvm2\nsudo pvcreate /dev/sd{b,c,d}\nsudo vgcreate docker /dev/sd{b,c,d}\nsleep 3\nsudo lvcreate -l 100%VG -n docker_lvm docker\nsudo mkfs.xfs /dev/docker/docker_lvm\n\necho -e \"/dev/docker/docker_lvm \\t /var/lib/docker \\t xfs \\t defaults \\t 0 0\" | sudo tee /etc/fstab\nsudo mount -a", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "timeout_secs": "0", "message_list": [], "variable_list": [], "name": "PackageInstallTask"}], "description": "", "state": "NOT_VALIDATED", "variable_list": [], "message_list": [], "main_task_local_reference": {"kind": "app_task", "name": "f9943e3a_dag"}, "name": "e6dd38ad_runbook"}, "type": "", "uninstall_runbook": {"task_definition_list": [{"target_any_local_reference": {"kind": "app_package", "name": "K8SMP"}, "retries": "0", "description": "", "type": "DAG", "child_tasks_local_reference_list": [{"kind": "app_task", "name": "PackageUninstallTask"}], "state": "NOT_VALIDATED", "attrs": {"edges": [], "type": ""}, "timeout_secs": "0", "message_list": [], "variable_list": [], "name": "f5f5341c_dag"}, {"target_any_local_reference": {"kind": "app_package", "name": "K8SMP"}, "retries": "0", "description": "", "type": "EXEC", "child_tasks_local_reference_list": [], "state": "NOT_VALIDATED", "attrs": {"exit_status": [], "script": "#!/bin/bash\nset -ex", "script_type": "sh", "type": "", "command_line_args": "", "login_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}}, "timeout_secs": "0", "message_list": [], "variable_list": [], "name": "PackageUninstallTask"}], "description": "", "state": "NOT_VALIDATED", "variable_list": [], "message_list": [], "main_task_local_reference": {"kind": "app_task", "name": "f5f5341c_dag"}, "name": "7f8d209b_runbook"}}, "variable_list": [], "name": "K8SMP"}, {"description": "", "action_list": [], "service_local_reference_list": [], "version": "", "type": "SUBSTRATE_IMAGE", "options": {"type": "", "name": "CENTOS-7.4-Controller", "resources": {"image_type": "DISK_IMAGE", "checksum": {"checksum_algorithm": "", "type": "", "checksum_value": ""}, "source_uri": "http://download.nutanix.com/calm/CentOS-7-x86_64-GenericCloud.qcow2", "version": {"product_version": "", "type": "", "product_name": ""}, "architecture": "X86_64", "type": ""}, "description": ""}, "variable_list": [], "name": "CENTOS_IMAGE_CONTROLLER"}, {"description": "", "action_list": [], "service_local_reference_list": [], "version": "", "type": "SUBSTRATE_IMAGE", "options": {"type": "", "name": "CENTOS-7.4-Minion", "resources": {"image_type": "DISK_IMAGE", "checksum": {"checksum_algorithm": "", "type": "", "checksum_value": ""}, "source_uri": "http://download.nutanix.com/calm/CentOS-7-x86_64-GenericCloud.qcow2", "version": {"product_version": "", "type": "", "product_name": ""}, "architecture": "X86_64", "type": ""}, "description": ""}, "variable_list": [], "name": "CENTOS_IMAGE_MINION"}], "app_profile_list": [{"deployment_create_list": [{"description": "", "action_list": [], "package_local_reference_list": [{"kind": "app_package", "name": "K8SCP"}], "min_replicas": "1", "max_replicas": "1", "substrate_local_reference": {"kind": "app_substrate", "name": "K8SC"}, "type": "GREENFIELD", "variable_list": [], "name": "d584b567_deployment"}, {"name": "ff8e191c_deployment", "action_list": [], "package_local_reference_list": [{"kind": "app_package", "name": "K8SMP"}], "editables": {"min_replicas": true, "max_replicas": true}, "min_replicas": "2", "max_replicas": "2", "substrate_local_reference": {"kind": "app_substrate", "name": "K8SM"}, "type": "GREENFIELD", "variable_list": [], "description": ""}], "variable_list": [{"val_type": "STRING", "description": "", "value": "v1.7.7", "label": "", "attrs": {"type": ""}, "type": "LOCAL", "name": "KUBERNETES_VERSION"}, {"val_type": "STRING", "description": "", "value": "10.200.0.0/16", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "CLUSTER_SUBNET"}, {"val_type": "STRING", "description": "", "value": "10.32.0.0/24", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "SERVICE_SUBNET"}, {"val_type": "STRING", "description": "", "value": "10.32.0.10", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "KUBE_CLUSTER_DNS"}, {"val_type": "STRING", "description": "", "value": "10.1.174.139", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "PRISM_CLUSTER_IP"}, {"val_type": "STRING", "description": "", "value": "10.1.174.227", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "PRISM_DATA_SERVICE_IP"}, {"val_type": "STRING", "description": "", "value": "admin", "label": "", "editables": {"value": true}, "type": "LOCAL", "name": "PRISM_USERNAME"}, {"val_type": "STRING", "description": "", "value": "", "label": "", "attrs": {"is_secret_modified": false, "secret_reference": {}, "type": ""}, "editables": {"value": true}, "type": "SECRET", "name": "PRISM_PASSWORD"}, {"val_type": "STRING", "description": "", "value": "k8demo", "label": "", "attrs": {"type": ""}, "editables": {"value": true}, "type": "LOCAL", "name": "CONTAINER_NAME"}, {"val_type": "STRING", "description": "", "value": "", "label": "", "attrs": {"is_secret_modified": false, "secret_reference": {}, "type": ""}, "editables": {"value": true}, "type": "SECRET", "name": "INSTANCE_PUBLIC_KEY"}], "description": "", "action_list": [], "name": "Nutanix"}], "default_credential_local_reference": {"kind": "app_credential", "name": "CENTOS"}, "type": "USER", "client_attrs": {"Kubernetes_Master": {"y": 240, "x": 420}, "Kubernetes_Minion": {"y": 240, "x": 740}}}, "name": "K8sMarketplaceClone"}, "api_version": "3.0", "metadata": {"last_update_time": "1521458882380474", "creation_time": "1518706086154962", "kind": "blueprint", "spec_version": 7, "name": "K8sMarketplaceClone"}}